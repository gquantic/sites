"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5536],{39901:function(e,n,i){var t=i(92777),r=i(82262),a=i(81531),o=i(63553),c=i(37247),s=i(94184),d=i.n(s),l=i(67294),u=(i(43393),i(3248)),m=i(85893);function p(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,t=(0,c.Z)(e);if(n){var r=(0,c.Z)(this).constructor;i=Reflect.construct(t,arguments,r)}else i=t.apply(this,arguments);return(0,o.Z)(this,i)}}var v=function(e){(0,a.Z)(i,e);var n=p(i);function i(){return(0,t.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props.validations.size>0;if(this.props.inline&&e){var n=this.props.validations.first();return(0,m.jsx)("span",{className:"text-danger",children:n})}var i=d()({"form-group":!0,"text-center":!0,hidden:!e,"has-feedback":e,"has-error":e}),t=this.props.validations.map((function(e,n){return(0,m.jsx)("span",{className:"help-block alert alert-danger",children:e},"validation-".concat(n))})).toArray();return(0,m.jsx)("div",{className:i,children:t})}}]),i}(l.Component);v=(0,u.Z)(v,["ValidationStore"],(function(e,n){var i=e.ValidationStore.getValidationErrors(n.validationKey),t=e.ValidationStore.getServerErrors(n.validationKey);return{validations:i.merge(t)}})),n.Z=v},56849:function(e,n,i){i.d(n,{Z:function(){return f}});var t=i(59499),r=(i(67294),i(66688)),a=i(93665),o=i(17253),c=i(8129),s=i(74610),d=i(89574),l=i(85893);function u(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function m(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?u(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var p=(0,d.ZL)()({linkButton:{display:"flex",alignItems:"center"}}),v=function(e){var n=e.fieldName,i=e.options,t=p().classes,d=function(e){var n,i=e.input.value,r=null===(n=e.options.find((function(e){return e.value===i})))||void 0===n?void 0:n.label;return(0,l.jsx)(a.O2.ffAdapter,m(m({},e),{},{Component:function(e){return(0,l.jsx)(o.rU,m(m({},e),{},{children:(0,l.jsxs)("div",{className:t.linkButton,children:[(0,l.jsx)("span",{children:r}),(0,l.jsx)(s.ch,{})]})}))}}))};return(0,l.jsx)(c.xu,{pb:.5,children:(0,l.jsx)(r.gN,m(m({},e),{},{id:n,name:n,options:i,children:function(e){return(0,l.jsx)(d,m({},e))}}))})};v.defaultProps={options:{}};var f=v},45536:function(e,n,i){i.d(n,{Z:function(){return z}});var t=i(50029),r=i(17674),a=i(59499),o=i(87794),c=i.n(o),s=i(67294),d=i(11163),l=i(18499),u=i(96486),m=i(4899),p=i(17253),v=i(80678),f=i(39901),k=i(41640),h=i(81020),y=i.n(h),g=i(79845),b=i(56849),N=i(56966),j=i(8129),x=i(74610),I=i(89574),O=i(85893),A=(0,I.ZL)()({externalLink:{display:"inline-flex",alignItems:"center"},expiredWarning:{display:"flex",alignItems:"center"}}),C=(y().object.isRequired,y().oneOf(v.Z.allTypes()).isRequired,y().func,y().func,y().bool,y().bool,y().bool,y().node,{onConnect:function(){},onDisconnect:function(){},disconnecting:!1,showPublishing:!0,isLoading:!1,errorNode:null}),Z=function(e){var n=e.user,i=e.type,t=e.onConnect,r=e.onDisconnect,a=e.disconnecting,o=e.showPublishing,c=e.isLoading,s=e.errorNode,d=A().classes,l=(0,g.Z)().translate,u=n.adminFields&&n.adminFields.profileAuthorization||{},m=u.externalUsername,f=u.url,k=u.isValid,h=u&&u.id,y=v.Z.getAuthIconComponent(i),I=v.Z.getDisplayName(i),C=f?(0,O.jsxs)(p.rU,{url:f,newTab:!0,className:d.externalLink,children:[m,"\xa0",(0,O.jsx)(x.bu,{})]}):(0,O.jsx)(p.ZT,{children:m}),Z=h?(0,O.jsxs)(p.ZT,{children:[l("UserConnectedAccount.accountName")," ",C]}):(0,O.jsx)(p.ZT,{variant:"body1",children:l("UserConnectedAccount.notConnected")}),D=!h&&(0,O.jsxs)(j.MI,{direction:"row",alignItems:"center",children:[c&&(0,O.jsx)(x.D8,{color:"primary"}),(0,O.jsx)(p.rU,{onClick:t,children:l("UserConnectedAccount.connect")})]}),S=h&&(0,O.jsxs)(j.MI,{direction:"row",alignItems:"center",children:[(0,O.jsx)(p.rU,{type:"destructive",onClick:function(){return r()},children:l("UserConnectedAccount.disconnect")}),a&&(0,O.jsx)(x.D8,{color:"secondary"})]}),P=function(e){switch(e){case v.Z.DISCORD:case v.Z.XBOX:return!0;default:return!1}}(i)&&h&&!k&&(0,O.jsx)(p.MZ,{placement:"right",message:l("UserConnectedAccount.expiredHelper"),children:(0,O.jsx)("div",{children:(0,O.jsxs)(p.ZT,{variant:"body12",color:"red.primary",component:"div",className:d.expiredWarning,children:[(0,O.jsx)(x.uI,{}),(0,O.jsx)("span",{children:l("UserConnectedAccount.expired")})]})})}),w=i.toLowerCase();return(0,O.jsxs)(j.MI,{direction:"row",justify:"space-between",alignItems:"center",children:[(0,O.jsxs)(j.MI,{direction:"column",children:[(0,O.jsxs)(j.MI,{direction:"row",children:[(0,O.jsx)(y,{}),(0,O.jsx)(p.ZT,{variant:"h6",children:I}),P]}),Z,S]}),(0,O.jsxs)(j.MI,{direction:"column",alignItems:"flex-end",children:[h&&o&&(0,O.jsx)(b.Z,{fieldName:"profileAuthorizations.".concat(w),options:N.Z.getAllOptions(l),required:!0}),D,s]})]})};Z.defaultProps=C;var D=Z;function S(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function P(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?S(Object(i),!0).forEach((function(n){(0,a.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserConnectedAccount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AuthorizationType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"userConnectedAccount"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"userConnectedAccount"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishingSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profileAuthorizations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"twitter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"twitch"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mixer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discord"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayFirst"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"adminFields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profileAuthorization"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externalUsername"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isValid"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:169,source:{body:'#import "./UserConnectedAccount.fragment.gql"\n\nquery UserConnectedAccount($userId: ID!, $type: AuthorizationType!) {\n\tuser(id: $userId) {\n\t\t...userConnectedAccount\n\t}\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"disconnectAccount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"profileAuthorizationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disconnectOAuth"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"profileAuthorizationId"},value:{kind:"Variable",name:{kind:"Name",value:"profileAuthorizationId"}}}],directives:[]}]}}],loc:{start:0,end:164,source:{body:"mutation disconnectAccount($userId: ID!, $profileAuthorizationId: ID!) {\n\tdisconnectOAuth(\n\t\tuserId: $userId\n\t\tprofileAuthorizationId: $profileAuthorizationId\n\t)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},U=P({},(0,u.omit)(C,["onConnect"]));function V(e){var n=e.userId,i=e.user,a=e.type,o=e.onConnect,m=e.appConfig,h=(0,d.useRouter)(),y=h.query,g=void 0===y?{}:y,b=(0,k.Z)(w,{variables:{userId:n,type:a},skip:!!i,refetchQueries:function(){return["ConnectedAccounts"]}}),N=b.loading,j=(b.error,b.data),x=b.refetch,I=(0,u.get)(j,["user","adminFields","profileAuthorization","id"]),A=(0,u.get)(j,["user","id"]),C=(0,l.Db)(F,{variables:{userId:n||A,profileAuthorizationId:I},refetchQueries:function(){return["UserConnectedAccount","ConnectedAccounts"]}}),Z=(0,r.Z)(C,2),S=Z[0],U=Z[1].loading,V=function(){var e=(0,t.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=(0,s.useRef)();if(N)return(0,O.jsx)(p.Od,{variant:"text"});var z=v.Z.getValidationKey(a);return(0,O.jsx)(D,P(P({},e),{},{user:i||j.user,refetchQuery:x,onConnect:o||function(e){e&&(e.preventDefault(),e.stopPropagation());var i=m&&m.apiUrl;if(i){var t=v.Z.getAuthApiUrl(a,i,n),r=window.open(t,"_blank","height=700,width=500,scrollbars=yes,resizable=yes");T.current=setInterval((function(){r.closed&&(clearInterval(T.current),x(),g.redirectOnConnected&&h.push(g.redirectOnConnected))}),1e3)}},onDisconnect:V,disconnecting:U,errorNode:(0,O.jsx)(f.Z,{validationKey:z,inline:!0})}))}V.defaultProps=U;var T=(0,m.Z)(V);T.pres=D;var z=T},56966:function(e,n){n.Z={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC",getName:function(e,n){var i;switch(e){case this.PRIVATE:i=n("Publishing.connectedAccount.hidden");break;case this.PUBLIC:i=n("Publishing.connectedAccount.displayOnProfile")}return i},getAllOptions:function(e){var n=this;return[this.PUBLIC,this.PRIVATE].map((function(i){return{value:i,label:n.getName(i,e)}}))}}}}]);
//# sourceMappingURL=5536-e9a8d03feb0bf125.js.map