(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3880],{32375:function(e,t,o){"use strict";o.d(t,{Z:function(){return y}});var n=o(59499),a=o(67294),r=o(86010),s=o(30381),i=o.n(s),l=o(4730),c=o(6848),u=o(50135),p=o(85893),d=["onChange","value"];function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var g=function(e){var t=e.onChange,o=e.value,n=(0,l.Z)(e,d);return(0,p.jsx)(c.w,f({value:o,onChange:t,renderInput:function(e){return(0,p.jsx)(u.Z,f({},e))}},n))},h=o(80859),m=o.n(h),y=function(e){var t=e.className,o=e.initializeDate,s=e.onDateChange,l=(0,a.useState)({active:!0,value:null===o||void 0===o?void 0:o.startDate}),c=l[0],u=l[1],d=(0,a.useState)({active:!1,value:null===o||void 0===o?void 0:o.endDate}),v=d[0],f=d[1];(0,a.useEffect)((function(){var e=c.value!==(null===o||void 0===o?void 0:o.startDate),t=v.value!==(null===o||void 0===o?void 0:o.endDate);s&&(e||t)&&s(c.value,v.value)}),[c.value,v.value]);var h="MMM D, YYYY",y=c.value?i().unix(c.value).format(h):"From",w=v.value?i().unix(v.value).format(h):"To",j=void 0,b=void 0,Z=void 0,x=void 0;return c.active?(Z=void 0,x=v.value?i()(new Date(1e3*v.value)):void 0,j=function(e){var t=i()(e).unix();u((function(e){return{active:e.active,value:t}}))},c.value&&(b=new Date(1e3*c.value))):v.active&&(Z=c.value?i()(new Date(1e3*c.value)):void 0,x=void 0,j=function(e){var t=i()(e).unix();f((function(e){return{active:e.active,value:t}}))},v.value&&(b=new Date(1e3*v.value))),(0,p.jsxs)("div",{className:t,children:[(0,p.jsxs)("div",{className:m().row,children:[(0,p.jsx)("input",{onClick:function(){u((function(e){return{active:!0,value:e.value}})),f((function(e){return{active:!1,value:e.value}}))},type:"button",value:y,className:(0,r.Z)(m().dateInput,(0,n.Z)({},m().activeDateInput,c.active))}),(0,p.jsx)("input",{onClick:function(){u((function(e){return{active:!1,value:e.value}})),f((function(e){return{active:!0,value:e.value}}))},type:"button",value:w,className:(0,r.Z)(m().dateInput,(0,n.Z)({},m().activeDateInput,v.active))})]}),(c.active||v.active)&&(0,p.jsx)(g,{onChange:j,value:b,minDate:Z,maxDate:x,open:!0,orientation:"landscape",sx:{display:"none"}})]})}},76779:function(e,t,o){"use strict";var n=o(22808),a=o(90116),r=o(92777),s=o(82262),i=o(10748),l=o(81531),c=o(63553),u=o(37247),p=o(59499),d=o(67294),v=o(94184),f=o.n(v),g=o(96486),h=o(11214),m=o(30431),y=o(84118),w=o(37212),j=o(2997),b=o(48837),Z=o(83871),x=o(41074),O=o(46841),_=o(4899),C=o(82876),D=o(8129),I=(o(66477),o(55932)),P=o.n(I),S=o(85893);function L(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function k(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?L(Object(o),!0).forEach((function(t){(0,p.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):L(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;o=Reflect.construct(n,arguments,a)}else o=n.apply(this,arguments);return(0,c.Z)(this,o)}}var M=function(e){(0,l.Z)(o,e);var t=A(o);function o(e){var n;(0,r.Z)(this,o),n=t.call(this,e),(0,p.Z)((0,i.Z)(n),"geocodeAndUpdate",(function(e){var t=new window.google.maps.Geocoder,o=(0,i.Z)(n);n.setState({geocoding:!0}),t.geocode({address:e},(function(e,t){o.setState({geocoding:!1}),t===window.google.maps.GeocoderStatus.OK&&o.updateValueFromPlace(e[0])}))})),(0,p.Z)((0,i.Z)(n),"updateValueFromPlace",(function(e){var t=Z.Z.deepGet(e,"geometry.location");if(e.place_id){var o=(0,g.extend)({placeId:e.place_id,lat:t&&t.lat(),lng:t&&t.lng(),fullAddress:e.formatted_address},n.convertMapsAddress(e.address_components));n.props.setValue(o),n.setState({currentLocation:null}),n.props.autoCompleteSelected&&n.props.autoCompleteSelected(o)}})),(0,p.Z)((0,i.Z)(n),"autoCompleteSelected",(function(e){n.geocodeAndUpdate(e);var t={placeId:null,lat:null,lng:null,fullAddress:e,address:e,city:null,postalCode:null,country:null,countryCode:null,state:null};n.props.setValue(t)})),(0,p.Z)((0,i.Z)(n),"onFieldChange",(function(e){var t=(0,g.extend)({},n.props.value,{fullAddress:e,placeId:null});n.props.setValue(t)})),(0,p.Z)((0,i.Z)(n),"onKeyDown",(function(e){var t=n.props.value,o=t&&t.fullAddress&&!t.placeId;if(13===e.keyCode)return o&&!n.state.verifying&&n.verifyLocation(),!1})),(0,p.Z)((0,i.Z)(n),"verifyLocation",(function(e){if(window.google&&Z.Z.deepGet(window.google,"maps.Geocoder")){var t=n.searchInput.value,o=new window.google.maps.Geocoder,a=(0,i.Z)(n);e&&(e.preventDefault(),e.stopPropagation()),n.setState({verifying:!0}),o.geocode({address:t},(function(e){e&&e.length&&a.updateValueFromPlace(e[0]),a.setState({verifying:!1})}))}})),(0,p.Z)((0,i.Z)(n),"convertMapsAddress",(function(e){var t={},o=[];return(e=e||[]).forEach((function(e){e.types.forEach((function(o){var n=null;switch(o){case"street_number":case"route":case"postal_code":case"postal_town":case"administrative_area_level_1":n=e.short_name;break;case"locality":case"sublocality":n=e.long_name;break;case"country":n=e.long_name,t.country_short=e.short_name;break;case"subpremise":n="#".concat(e.long_name)}t[o]=n}))})),t.street_number&&o.push(t.street_number),t.route&&o.push(t.route),t.subpremise&&o.push(t.subpremise),{address:o.join(" "),city:t.locality||t.postal_town||t.sublocality,postalCode:t.postal_code,country:t.country,countryCode:t.country_short,state:t.administrative_area_level_1}})),(0,p.Z)((0,i.Z)(n),"assignInputRef",(function(e){n.searchInput=e}));var a=(0,i.Z)(n);if(n.state={verifying:!1,currentLocation:null},n.mapsApiLoaded=!1,e.suggestCurrentLocation&&!C.sk){var s=e.appConfig,l=s&&s.appData&&s.appData.googleMapsKey;window.fetch("https://www.googleapis.com/geolocation/v1/geolocate?key=".concat(l),{method:"POST",data:{considerIp:!0}}).then((function(e){e.json().then((function(e){var t=e.location,o=t.lat,n=t.lng;if(window.google){var r=new window.google.maps.LatLng(o,n);(new window.google.maps.Geocoder).geocode({latLng:r},(function(e,t){if(t===window.google.maps.GeocoderStatus.OK&&e.length){var o=e.find((function(e){return(0,g.includes)(e.types,"locality")}));o&&a.setState({currentLocation:{description:o.formatted_address,placeId:o.place_id}})}}))}}))}))}return n}return(0,s.Z)(o,[{key:"handleMapsApiLoaded",value:function(){var e=this;if(!this.mapsApiLoaded){var t=this.props.latLng;if(t&&!C.sk){if(!window.google)return;var o=(0,n.Z)(window.google.maps.LatLng,(0,a.Z)(t.split(", ").map((function(e){return parseFloat(e)}))));(new window.google.maps.Geocoder).geocode({latLng:o},(function(t,o){if(o===google.maps.GeocoderStatus.OK&&t.length){var n=t.find((function(e){return(0,g.includes)(e.types,"locality")}));n&&e.updateValueFromPlace(n)}}))}this.mapsApiLoaded=!0}}},{key:"render",value:function(){var e,t,o,n=this,a=this.props,r=a.placeholder,s=a.translate,i=a.classes,l=a.MenuWrapper,c=a.MenuWrapperProps,u=a.appConfig,p=a.InputProps,d=void 0===p?{}:p,v=u&&u.appData&&u.appData.googleMapsKey,g=this.props.value,h="",j=g&&g.fullAddress&&!g.placeId,Z=g&&g.placeId,x=this.props.errorMessage,_=f()(this.props.className,{"has-feedback":x,"has-error":x||!this.state.geocoding&&j});g&&(h=g.fullAddress||""),this.props.showErrors&&(x?e=(0,S.jsx)("span",{className:"validation-error",children:x}):j&&this.state.geocoding?e=(0,S.jsx)("div",{className:"top-spacer-xs",children:s("GoogleMapsAutocomplete.actions.geocode--active")}):j&&(o=this.state.verifying?s("GoogleMapsAutocomplete.actions.findMatch--active"):(0,S.jsxs)("span",{children:[(0,S.jsx)("a",{onClick:this.verifyLocation,children:s("Common.clickHere",null,!0).toLowerCase()}),"\xa0",s("GoogleMapsAutocomplete.actions.findMatch")]}),e=(0,S.jsxs)("div",{className:"top-spacer-xs",children:[s("GoogleMapsAutocomplete.errors.unverified"),","," ",o]})),Z&&(t=(0,S.jsxs)("span",{className:"text-success-brand",children:[(0,S.jsx)("i",{className:"fa fa-check"}),"\xa0",s("GoogleMapsAutocomplete.field.location--verified")]})));var C=this.state.currentLocation,I=function(e){return e===w.Status.LOADING?(0,S.jsx)("div",{children:"Loading..."}):e===w.Status.FAILURE?(0,S.jsx)("div",{children:"Error loading Google Maps."}):e===w.Status.SUCCESS?(n.handleMapsApiLoaded(),L()):void 0},L=function(){return(0,S.jsx)(b.ZP,k(k({},n.props),{},{value:h,onChange:n.onFieldChange,onSelect:n.autoCompleteSelected,children:function(o){var a=o.getInputProps,u=o.suggestions,p=o.getSuggestionItemProps,v=o.loading,f=u;!u.length&&C&&(f=[C]);return(0,S.jsxs)("div",{children:[(0,S.jsx)(O.Z,k(k({},a({placeholder:s(r,null,!0),label:n.props.label||n.props.title,type:"text",ref:n.assignInputRef,helperText:t||e})),d)),0!==f.length&&function(){var e=(0,S.jsx)(y.Z,{classes:i,children:f.map((function(e){return(0,S.jsx)(m.Z,k(k({},p(e,{})),{},{children:(0,S.jsxs)(D.MI,{direction:"row",alignItems:"center",className:P().nowrap,children:[(0,S.jsx)("i",{className:"fa fa-map-marker"}),(0,S.jsx)("span",{children:e.description})]})}))}))});return(0,S.jsxs)("div",{children:[v&&(0,S.jsx)("div",{children:"Loading..."}),l?(0,S.jsx)(l,k(k({},c),{},{children:e})):e]})}()]})}}))};return(0,S.jsx)("div",{className:_,children:(0,S.jsx)(w.Wrapper,{apiKey:v,render:I,retries:5,libraries:["places"]})})}}]),o}(d.Component);(0,p.Z)(M,"defaultProps",{label:null,InputProps:{},placeholder:"GoogleMapsAutocomplete.field.location--placeholder",autocompleteTypes:["address"],autoCompleteSelected:void 0,showErrors:!0,suggestCurrentLocation:!1,onChange:function(){},getErrorMessage:function(){},getValue:function(){},value:""}),t.Z=(0,h.qC)(_.Z,(0,x.Z)(),(0,j.Z)({root:{marginLeft:-16,marginRight:-16,paddingBottom:0}},{name:"GoogleMapsAutocompleteForm"}))(M)},55932:function(e){e.exports={nowrap:"nowrap-sggroe0k"}},80859:function(e){e.exports={row:"styles_row__kNYIj",dateInput:"styles_dateInput__kp7dv",activeDateInput:"styles_activeDateInput__4IGjw"}}}]);
//# sourceMappingURL=3880-bd9d31e3703514af.js.map