(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8412],{49478:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return V},default:function(){return Y}});var r=s(59499),n=s(66147),a=s(67294),i=s(72555),o=s.n(i),l=s(43393),c=s.n(l),d=s(53788),h=s(17253),p=s(30381),g=s.n(p),u=s(78147),m=s(94184),f=s.n(m),v=s(3248),y=s(48206),x=s(74469),j=s(22076),N=s(23080),b=s(60530),S=s(70293),E=s(40242),w=s(92777),Z=s(82262),P=s(81531),R=s(63553),U=s(37247),O=s(17999),k=s(34030),T=s(63043),C=s(64598),I=s(85302),F=s(8129),_=s(85893),B=o()({displayName:"ScoredRoster",getDefaultProps:function(){return{}},getEntrantCell:function(e,t){var s,r=t.get("playerIds")&&t.get("playerIds").first(),n=this.props.rosterPlayers.get(r),a=new I.Z(this.props.tournament);if(this.props.event.get("type")===N.Z.SINGLES){if(!n)return(0,_.jsx)("span",{});var i=[];i.push((0,_.jsx)("span",{children:"$".concat(t.get("cost"))})),t.get("miomRank")?i.push((0,_.jsxs)("span",{children:["\xa0\xa0Miom: ",t.get("miomRank")]})):t.get("sbRank")&&i.push((0,_.jsxs)("span",{children:["\xa0\xa0SB: ",t.get("sbRank")]})),s=(0,_.jsxs)(F.MI,{direction:"column",children:[(0,_.jsx)(C.Z,{playerId:r}),(0,_.jsx)("div",{children:i})]})}else{var o=t.get("name");s=(0,_.jsxs)("div",{children:[(0,_.jsx)("a",{href:"".concat(a.getTabUrl("attendees",!1,"teams"),"/").concat(t.get("id")),className:"link-no-underline",target:"_blank",rel:"noopener noreferrer",children:(0,_.jsx)("div",{className:"gamertag-title text-black",children:o})}),(0,_.jsx)("div",{className:"text-muted",children:(0,_.jsx)("em",{children:"$".concat(t.get("cost"))})})]})}return s},getPlacementCell:function(e,t){var s=t.get("finalPlacement")||t.get("placement");return s||(s="n/a"),(0,_.jsx)("span",{className:"heading-label",children:s})},getScoreCell:function(e,t){return(0,_.jsx)("span",{className:"heading-label",children:t.get("score")})},render:function(){var e=this.props.rosterEntrants.sort((function(e,t){var s=t.get("score")-e.get("score");return 0===s&&(s=t.get("cost")-e.get("cost")),s}));return(0,_.jsxs)(k.Z,{className:"table table-condensed table-striped",data:e,emptyText:"No Results",children:[(0,_.jsx)(T.Z,{dataKey:"name",label:"Player",cellRenderer:this.getEntrantCell}),(0,_.jsx)(T.Z,{dataKey:"id",label:"Placement",className:"text-center",cellRenderer:this.getPlacementCell}),(0,_.jsx)(T.Z,{dataKey:"id",label:"Points",className:"text-center",cellRenderer:this.getScoreCell})]})}}),M=(0,u.Z)(B),D=s(96025);function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,U.Z)(e);if(t){var n=(0,U.Z)(this).constructor;s=Reflect.construct(r,arguments,n)}else s=r.apply(this,arguments);return(0,R.Z)(this,s)}}var K=function(e){(0,P.Z)(s,e);var t=A(s);function s(){return(0,w.Z)(this,s),t.apply(this,arguments)}return(0,Z.Z)(s,[{key:"render",value:function(){this.props.tournament;var e,t=this.props.rosterState,s=t.get("entrants")||c().Map();t.get("name");return t.get("isFollowing")&&(e=(0,_.jsx)("div",{children:(0,_.jsxs)("label",{children:["Following"," ",(0,_.jsx)("a",{href:"https://twitter.com/startgg",target:"_blank",rel:"noopener noreferrer",children:"@startgg"})," ","- 25 points"]})})),(0,_.jsx)("div",{className:"fantasy-roster-view",children:(0,_.jsxs)("div",{className:"row",children:[(0,_.jsxs)("div",{className:"col-sm-7 scored-roster",children:[(0,_.jsx)(h.ZT,{variant:"h5",component:"h3",className:"page-section-heading",children:"Roster"}),(0,_.jsx)(M,{tournament:this.props.tournament,event:this.props.event,rosterEntrants:s,rosterPlayers:this.props.rosterPlayers})]}),(0,_.jsxs)("div",{className:"col-sm-5",children:[(0,_.jsx)(h.ZT,{variant:"h5",component:"h3",className:"page-section-heading",children:"Bonus"}),(0,_.jsx)(O.ZP,{children:(0,_.jsx)(D.Z,{readOnly:!0,rosterState:t,fantasyEvent:this.props.fantasyEvent})}),(0,_.jsx)("br",{}),e]})]})})}}]),s}(a.Component),L=K,z=s(50229),G=s(31859),X="fantasy-roster-edit",$=o()({displayName:"RosterEdit",getInitialState:function(){return{editing:!1}},saveRoster:function(e,t,s){if(s){var r=e;r.payment=this.state.paymentState,this.props.executeAction(j.Z,{data:r,validationKey:X})}},toggleEdit:function(e){e&&(e.preventDefault(),e.stopPropagation()),this.setState({editing:!this.state.editing})},rosterCreated:function(){this.setState({editing:!1})},render:function(){var e,t,s,r,n=this.props.tournament,a=new I.Z(n),i="".concat(a.getTabUrl("fantasy"),"/create/event/").concat(this.props.fantasyEvent.get("id")),o=a.getTabUrl("fantasy"),l=this.props.rosterState,d=this.props.events.get(this.props.fantasyEvent.get("eventId")),p=12;if(1020!==this.props.fantasyEvent.get("id")&&"1020"!==this.props.fantasyEvent.get("id")||(p=8),this.state.editing){t="Discard changes";var u="".concat(a.getTabUrl("attendees"),"/"),m=d.get("type");m===N.Z.TEAMS&&(u+="teams/");var v=this.props.saving?(0,_.jsxs)("span",{children:[(0,_.jsx)("i",{className:"fa fa-spin fa-refresh"})," Saving"]}):(0,_.jsx)("span",{children:"Update Team"});e=(0,_.jsxs)(z.Z,{role:"form",name:"EditFantasyRoster",autoComplete:"on",showSubmit:!1,onSuccess:this.rosterCreated,onSubmit:this.saveRoster,validationKey:X,children:[(0,_.jsx)(E.Z,{name:"fantasyForm",playerLink:u,rosterState:this.props.rosterState,fantasyEvent:this.props.fantasyEvent,currentUser:this.props.currentUser,eventType:m}),(0,_.jsx)(h.zx,{disabled:this.props.saving,buttonType:"submit",type:"primary",size:"lg",children:v})]});var j=l.get("entrants")||c().Map();s=(0,_.jsx)("div",{className:"col-sm-5",children:(0,_.jsx)(G.Z,{playerLink:u,fantasyEvent:this.props.fantasyEvent,event:d,rosterEntrants:j,rosterLimit:p})})}else e=(0,_.jsx)(L,{tournament:n,event:d,rosterState:this.props.rosterState,fantasyEvent:this.props.fantasyEvent,rosterPlayers:this.props.rosterPlayers}),t="Edit your team";var w=(0,_.jsx)("div",{children:(0,_.jsxs)("a",{href:o,children:[(0,_.jsx)("i",{className:"fa fa-arrow-left"}),"\xa0 Back to all teams"]})}),Z=(0,_.jsx)("div",{className:"bottom-spacer"}),P=this.props.fantasyEvent&&this.props.fantasyEvent.get("rosterCreationEndAt")&&g().unix(this.props.fantasyEvent.get("rosterCreationEndAt")).isAfter(g()());if(this.props.ownedByUser)P&&(Z=(0,_.jsxs)("div",{className:"roster-edit-well well well-dark no-shadow text-center",children:[(0,_.jsx)("strong",{children:"Want to make changes?"}),"\xa0\xa0\xa0",(0,_.jsx)("a",{href:"#",onClick:this.toggleEdit,className:"btn btn-primary",children:t})]}));else if(!this.props.currentUserRoster&&P){var R=d.get("videogameId"),U=x.Z.getGenericName(R);r=(0,_.jsxs)("div",{className:"well well-dark no-border no-shadow text-center",children:[(0,_.jsxs)(h.ZT,{variant:"h5",component:"h3",className:"heading-inline",children:["Play Fantasy ",U," for FREE"]}),"\xa0\xa0",(0,_.jsx)("a",{href:i,className:"btn btn-primary btn-lg",children:"Create your team"}),"\xa0\xa0"]})}var O="fantasy/roster/".concat(this.props.rosterState.get("hash")),k=a.getTabUrl(O,this.props.appConfig.siteUrl),T="I just made a team for Fantasy ".concat(n.get("name")).concat(n.get("hashtag")?" #".concat(n.get("hashtag")):""," #FantasySmash"),F=f()({"shadow-box":!0,"fantasy-roster-edit":!0,editing:this.state.editing,"col-sm-7":this.state.editing}),B=f()({container:!0,"container-md":!this.state.editing}),M=f()({row:this.state.editing});return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:"page-section roster-edit-header",children:(0,_.jsxs)(y.Z,{size:"fluid",children:[(0,_.jsx)("div",{className:"text-center",children:w}),(0,_.jsx)(h.ZT,{variant:"h4",component:"h2",className:"page-section-heading",children:l.get("name")}),(0,_.jsxs)("div",{className:"row roster-owner",children:[(0,_.jsx)("div",{className:"col-xs-6",children:(0,_.jsx)("div",{className:"pull-right text-lg heading-inline text-muted",children:"Team Owner"})}),(0,_.jsx)("div",{className:"col-xs-6",children:(0,_.jsx)("div",{className:"pull-left",children:(0,_.jsx)(C.Z,{playerId:this.props.player.get("id")})})})]}),(0,_.jsxs)("div",{className:"row",children:[(0,_.jsx)("div",{className:"col-xs-6",children:(0,_.jsx)("div",{className:"pull-right text-lg heading-inline text-muted",children:(0,_.jsx)(b.Z,{url:k,large:!1,text:"Share"})})}),(0,_.jsx)("div",{className:"col-xs-6",children:(0,_.jsx)("div",{className:"pull-left",children:(0,_.jsx)(S.Z,{url:k,large:!1,text:T})})})]}),Z]})}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)("div",{className:B,children:(0,_.jsxs)("div",{className:M,children:[(0,_.jsxs)("div",{className:F,children:[e,(0,_.jsxs)("div",{className:"row fantasy-score",children:[(0,_.jsx)("div",{className:"col-xs-6",children:(0,_.jsx)("div",{className:"pull-right",children:(0,_.jsxs)(h.ZT,{variant:"h5",component:"h3",className:"heading-inline",children:["Score: ",l.get("score")," points"]})})}),(0,_.jsx)("div",{className:"col-xs-6",children:(0,_.jsxs)("div",{className:"pull-left heading-label",children:[(0,_.jsxs)("div",{children:["Team score:"," ",l.get("score")-l.get("bonusScore")]}),(0,_.jsxs)("div",{children:["Bonus points: ",l.get("bonusScore")]})]})})]})]}),s]})})}),(0,_.jsx)("div",{className:"page-section",children:(0,_.jsx)(y.Z,{size:"fluid",children:r})})]})}});$=(0,v.Z)($,["FantasyEntrantStore","FantasyRosterUIStore","FantasyRosterStore","FantasyEventStore","FormStateStore","UserStore","PlayerStore","TournamentStore"],(function(e,t){var s,r;t.currentUser&&(s=e.FantasyRosterStore.getByUser(t.currentUser.get("id")));var n=e.FantasyRosterUIStore.getState(),a=e.FantasyEventStore.getAll(),i=t.currentUser&&n.get("userId")===t.currentUser.get("id"),o=e.UserStore.get(n.get("userId")),l=c().Map(),d=e.FormStateStore.hasPendingActions(X),h=null;return r=n.get("fantasyEventId")?a.get(n.get("fantasyEventId")):a.first(),o&&(h=e.PlayerStore.get(o.get("playerId")),l=n.get("entrants").reduce((function(t,s){return t.merge(e.PlayerStore.getByIds(s.get("playerIds"))),t}),c().Map().asMutable()).asImmutable()),{rosterState:n,fantasyEvent:r,ownedByUser:i,currentUserRoster:s,rosterPlayers:l,player:h,saving:d}}));var W=(0,u.Z)($),q=o()({displayName:"FantasyEditPage",mixins:[d.Z],getDefaultProps:function(){return{tab:"fantasy"}},getContent:function(){return(0,_.jsx)(W,{hash:this.props.hash,currentUser:this.props.currentUser,appConfig:this.props.appConfig})}});function H(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var J=function(e){return(0,_.jsx)(q,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?H(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},e))},Q={titleKey:"fantasy",pageTelemetry:{name:"Fantasy Roster"}};J.routeMeta=Q,J.getLayout=(0,n.G)(Q);var V=!0,Y=J},28468:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tournament/[slug]/fantasy/roster/[hash]",function(){return s(49478)}])}},function(e){e.O(0,[8412],(function(){e.E(9135),e.E(5720)}),5);e.O(0,[9729,4275,6742,3781,705,7248,2110,9135,5499,4202,646,4762,6086,7586,9609,4761,6772,8745,686,9156,6254,6147,6845,5536,1026,9774,2888,179],(function(){return t=28468,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[hash]-5d4af4f5758a8c98.js.map