"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8285],{85735:function(n,e,t){t.d(e,{T:function(){return h}});var r=t(70865),i=t(96670),o=t(92228),a=t(52903),u=t(75236),l=t(78545),c=t(2982),d=(t(2784),t(56750));function s(){var n=(0,o.Z)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return s=function(){return n},n}function v(){var n=(0,o.Z)(["\n  .spin {\n    width: 24px;\n    height: 24px;\n    animation: "," 1.8s linear infinite;\n    ","\n  }\n"]);return v=function(){return n},n}var m=(0,d.F4)(s()),f=d.ZP.div.withConfig({componentId:"sc-164b0f4c-0"})(v(),m,l.bK),h=function(n){return(0,a.tZ)(f,(0,i.Z)((0,r.Z)({},n),{children:(0,a.tZ)(u.E,{src:n.iconSrc||c.lY7,className:"spin"})}))}},33790:function(n,e,t){t.d(e,{E5:function(){return c},V7:function(){return d},yI:function(){return l},yb:function(){return v},yl:function(){return m}});var r,i,o=t(47842),a=t(88520),u=t(53975),l="Something went wrong. Please try again.",c="https://api.flowcode.com",d="".concat("https://api.flowcode.com","/v2/authentication");!function(n){n.ALREADY_IN_ANOTHER_ORG="already-in-another-org",n.EXISTING_INVITE="existing-invite",n.ALREADY_AT_SEAT_LIMIT="already-at-seat-limit",n.EXISTING_MEMBER="existing-member",n.OTHER="other"}(r||(r={}));var s,v=(i={},(0,o.Z)(i,r.ALREADY_IN_ANOTHER_ORG,"This email is already associated with a user that is part of, or has been invited to another organization."),(0,o.Z)(i,r.EXISTING_INVITE,"This email is already associated with an invite that has already been made by another user."),(0,o.Z)(i,r.ALREADY_AT_SEAT_LIMIT,"This organization has run out of seats. Please contact support@flowcode.com to inquire."),(0,o.Z)(i,r.EXISTING_MEMBER,"This email is already associated with a user that is part of, or has been invited to another organization."),(0,o.Z)(i,r.OTHER,"Other"),i),m=(s={},(0,o.Z)(s,u.c.VIEWER,a.k.VIEWER),(0,o.Z)(s,u.c.MEMBER,a.k.MEMBER),(0,o.Z)(s,u.c.ADMIN,a.k.ADMIN),s)},93698:function(n,e,t){t.d(e,{Au:function(){return Z},KD:function(){return T},OP:function(){return w},mL:function(){return E},t7:function(){return A},v4:function(){return M},y2:function(){return x}});var r=t(98788),i=t(94776),o=t.n(i),a=t(7295),u=t(13634),l=t(62030),c=t(19122),d=t(2784),s=t(24938),v=t(2305),m=t(87560),f=t(67535),h=t(72),p=t.n(h),b=t(79262),g=t.n(b),I=t(85482);function E(n){var e=(0,c.F)().token,t=(0,d.useState)(null),r=t[0],i=t[1];return(0,d.useEffect)((function(){var t;!r&&n.id&&fetch("".concat("https://api.flowcode.com","/v2/authentication/").concat(n.linkType,"/").concat(null!==(t=n.id)&&void 0!==t?t:"","/invitation-link"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(n){if(200!==n.status)throw new Error("Failed to fetch invitation link");return n.json()})).then((function(n){return i(n)})).catch((function(n){return console.error(n)}))}),[r,i,n,e]),r?"".concat("https://www.flowcode.com/","accept-org-invite/").concat(r.invitationLinkId):null}function Z(n,e){return(0,d.useMemo)((function(){return g()(n,p()(n,null!==e&&void 0!==e?e:"",{insideWords:!0}))}),[n,e])}var A=function(n,e){var t,i,a,l,v,m=(0,s.wh)(),f=(0,c.F)().jwt,h=null!==(a=null===f||void 0===f||null===(t=f.org)||void 0===t?void 0:t.orgId)&&void 0!==a?a:"",p=(0,u.oq)({orgId:h,teamId:n,orderBy:e}),b=(0,I.kY)().mutate,g=(0,I.ZP)(p,h?m:(0,r.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",void 0);case 1:case"end":return n.stop()}}),n)}))),{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0}),E=g.data,Z=g.isValidating,A=(0,u.eo)(null===E||void 0===E||null===(i=E.teams)||void 0===i?void 0:i[0]),x=(0,d.useState)(null),T=x[0],M=x[1];(0,d.useEffect)((function(){(null===A||void 0===A?void 0:A.directChildren)&&!T&&M(null===A||void 0===A?void 0:A.directChildren)}),[A,T]);var w=null!==(v=null!==(l=null===A||void 0===A?void 0:A.directChildren)&&void 0!==l?l:T)&&void 0!==v?v:[];return{team:A,subteams:w,subteamsLoading:!T&&Z,refreshTeam:function(){return b(p)}}},x=function(n){var e,t,i=n.limit,u=void 0===i?a.gT:i,v=n.offset,m=void 0===v?0:v,f=n.orderBy,h=void 0===f?a.q.NameAsc:f,p=n.searchTerm,b=n.paginate,g=void 0===b||b,E=n.teamId,Z=n.directChildren,A=void 0!==Z&&Z,x=n.topLevel,T=void 0!==x&&x,M=n.members,w=void 0!==M&&M,R=(0,c.F)().jwt,y=null!==(t=null===R||void 0===R||null===(e=R.org)||void 0===e?void 0:e.orgId)&&void 0!==t?t:"",C={orderBy:h};g&&(C.limit=u.toString(),C.offset=m.toString()),p&&(C.searchTerm=p),E&&(C.teamId=E);var N=new URLSearchParams(C).toString();A&&(N+="&directChildren"),T&&(N+="&topLevel"),w&&(N+="&members");var B=y?l.vb.teams+y+"/?"+N:null,S=(0,s.wh)(),k=(0,I.kY)().mutate,L=(0,I.ZP)(B,y?S:(0,r.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",void 0);case 1:case"end":return n.stop()}}),n)}))),{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0}),O=L.data,P=L.isValidating,_=(0,d.useState)(!1),D=_[0],V=_[1];return(0,d.useEffect)((function(){(null===O||void 0===O?void 0:O.teams)&&V(!0)}),[O]),{loading:!D&&P,teams:null===O||void 0===O?void 0:O.teams,refreshTeams:function(){return k(B)}}};function T(){var n=(0,m.Z)();return(0,v.Z)(n.breakpoints.down("md"))}function M(){var n=(0,c.F)().token;return(0,d.useCallback)(function(){var e=(0,r.Z)(o().mark((function e(t){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{error:"unknown-error"});case 2:return e.next=4,fetch("".concat(f.Z.uri,"/v2/authentication/invitation-link/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 4:return r=e.sent,e.next=7,r.json();case 7:if(i=e.sent,r.ok){e.next=11;break}return a=i.message,e.abrupt("return",a?{error:a}:{error:"unknown-error"});case 11:return e.abrupt("return",{invitation:i});case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n])}function w(){var n=(0,c.F)().token;return(0,d.useCallback)(function(){var e=(0,r.Z)(o().mark((function e(t,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return",{success:!1});case 2:return e.next=4,fetch("".concat(f.Z.uri,"/v2/authentication/invitation-link/").concat(t,"/join"),{method:"PUT",headers:{Authorization:"Bearer ".concat(n)}});case 4:return i=e.sent,e.abrupt("return",{success:null!==(a=i.ok)&&void 0!==a&&a});case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[n])}},88520:function(n,e,t){var r;t.d(e,{k:function(){return r}}),function(n){n.ADMIN="team_role:admin",n.MEMBER="team_role:member",n.VIEWER="team_role:viewer"}(r||(r={}))},13634:function(n,e,t){t.d(e,{$t:function(){return m},FW:function(){return v},SH:function(){return f},VY:function(){return I},WV:function(){return p},eo:function(){return d},hc:function(){return h},oq:function(){return b},qT:function(){return g},tE:function(){return c}});var r=t(70865),i=t(96670),o=t(50930),a=t(33790),u=t(88520),l=t(53975);function c(n){return{id:null===n||void 0===n?void 0:n.ithacaId,name:(null===n||void 0===n?void 0:n.firstName)&&(null===n||void 0===n?void 0:n.lastName)?"".concat(n.firstName," ").concat(n.lastName):"",email:null===n||void 0===n?void 0:n.email,role:u.k.ADMIN,hasJoinedOrg:!0,hasBeenInvited:!0}}function d(n){var e,t,o,c,d,v,m,f,h=function(n){return(null===n||void 0===n?void 0:n.parentTeamName)&&(null===n||void 0===n?void 0:n.parentTeamId)?{id:n.parentTeamId,name:n.parentTeamName}:void 0}(n),p=function(n){return(null===n||void 0===n?void 0:n.directChildren)?n.directChildren.map((function(n){var e,t,o,a,l,c=null===n||void 0===n||null===(e=n.members)||void 0===e?void 0:e.map((function(n){return(0,i.Z)((0,r.Z)({},n),{id:"member-id",role:u.k.MEMBER,hasBeenInvited:!0,hasJoinedOrg:!0})}));return{teamId:null!==(t=null===n||void 0===n?void 0:n.teamId)&&void 0!==t?t:"",name:null!==(o=null===n||void 0===n?void 0:n.name)&&void 0!==o?o:"",memberCount:null!==(a=null===n||void 0===n?void 0:n.memberCount)&&void 0!==a?a:0,members:null!==c&&void 0!==c?c:[],directChildrenCount:null!==(l=null===n||void 0===n?void 0:n.directChildrenCount)&&void 0!==l?l:0}})):void 0}(n);return{teamId:null!==(t=null===n||void 0===n?void 0:n.teamId)&&void 0!==t?t:"",name:null!==(o=null===n||void 0===n?void 0:n.name)&&void 0!==o?o:"",memberCount:null!==(c=null===n||void 0===n?void 0:n.memberCount)&&void 0!==c?c:0,members:null===n||void 0===n||null===(e=n.members)||void 0===e?void 0:e.map((function(n){return function(n){var e;return{id:n.ithacaId,name:s(n),role:a.yl[null!==(e=n.teamRole)&&void 0!==e?e:l.c.VIEWER],hasBeenInvited:!0,hasJoinedOrg:!0}}(n)})),directChildren:p,directChildrenCount:null!==(d=null===n||void 0===n?void 0:n.directChildrenCount)&&void 0!==d?d:0,parentTeamId:null!==(v=null===h||void 0===h?void 0:h.id)&&void 0!==v?v:"",parentTeamName:null!==(m=null===h||void 0===h?void 0:h.name)&&void 0!==m?m:"",profilePictureUrl:null!==(f=null===n||void 0===n?void 0:n.profilePictureUrl)&&void 0!==f?f:""}}function s(n){return n.firstName||n.lastName?"".concat(null!==(e=n.firstName)&&void 0!==e?e:""," ").concat(null!==(t=n.lastName)&&void 0!==t?t:""):"";var e,t}function v(){return"".concat(a.V7,"/teams/")}function m(){return"".concat(a.V7,"/team-members")}function f(){return"".concat(a.V7,"/teams/")}function h(){return"".concat(a.V7,"/teams/")}function p(){return"".concat(a.V7,"/invitations")}function b(n){var e=new URL(a.E5);return e.pathname="/v2/authentication/teams/".concat(encodeURIComponent(n.orgId)),n.orderBy&&e.searchParams.set("orderBy",n.orderBy),e.searchParams.set("teamId",n.teamId),"".concat(e.toString(),"&members&directChildren&paginateDirectChildren&directChildrenMembers")}function g(n,e){var t=new URL(a.E5);return t.pathname="/v2/authentication/team-members/".concat(encodeURIComponent(n)),e&&t.searchParams.set("orderBy",e),"".concat(t.toString())}function I(n,e){var t=[],r=[],i=n.filter((function(n){return!n.hasBeenInvited||!n.hasJoinedOrg}));if(!e)return function(n){return n.map((function(n){return E(n)}))}(i);var u=!0,l=!1,c=void 0;try{for(var d,s=function(n,i){var o=i.value,u=e.find((function(n){return n.email===o.email}));u?r.push(function(n){var e;return{email:null!==(e=null===n||void 0===n?void 0:n.email)&&void 0!==e?e:"",success:!1,failureMessage:a.yb[n.reason]}}(u)):t.push(E(o))},v=i[Symbol.iterator]();!(u=(d=v.next()).done);u=!0)s(0,d)}catch(m){l=!0,c=m}finally{try{u||null==v.return||v.return()}finally{if(l)throw c}}return(0,o.Z)(t).concat((0,o.Z)(r))}function E(n){var e;return{email:null!==(e=null===n||void 0===n?void 0:n.email)&&void 0!==e?e:"",success:!0}}},12495:function(n,e,t){t.d(e,{RR:function(){return h},hP:function(){return m},h_:function(){return v},wo:function(){return f}});var r=t(70865),i=t(96670),o=t(52903),a=t(3734),u=t(81191),l=t(12804),c=t(3023),d=t(50985),s=t(2784),v=function(n){var e,t=null===(e=null===n||void 0===n?void 0:n.sx)||void 0===e?void 0:e["& .MuiMenu-paper"];return(0,o.tZ)(a.Z,(0,i.Z)((0,r.Z)({},n),{anchorOrigin:(0,r.Z)({vertical:"bottom",horizontal:"right"},null===n||void 0===n?void 0:n.anchorOrigin),transformOrigin:(0,r.Z)({vertical:"top",horizontal:"right"},null===n||void 0===n?void 0:n.transformOrigin),sx:(0,i.Z)((0,r.Z)({},null===n||void 0===n?void 0:n.sx),{"& .MuiMenu-paper":(0,i.Z)((0,r.Z)({},t),{borderRadius:"12px",boxShadow:"3px 3px 30px rgba(17, 17, 17, 0.1)"})}),children:n.children}))},m=s.forwardRef((function(n,e){return(0,o.tZ)(u.Z,(0,i.Z)((0,r.Z)({},n),{ref:e,disableRipple:!0,sx:(0,i.Z)((0,r.Z)({},null===n||void 0===n?void 0:n.sx),{"&.Mui-selected":{backgroundColor:"white","&:focus":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},"&:focus":{backgroundColor:"rgba(0, 0, 0, 0.04)"}})}))}));m.displayName="DropdownItem";var f=function(n){var e,t=n.children,a=n.sx,u=null===(e=a)||void 0===e?void 0:e["& .MuiListItemText-primary"];return(0,o.tZ)(l.Z,{sx:(0,i.Z)((0,r.Z)({},a),{"& .MuiListItemText-primary":(0,r.Z)({fontWeight:"bold",fontSize:"16px"},u)}),children:t})},h=s.forwardRef((function(n,e){return(0,o.tZ)(c.Z,(0,i.Z)((0,r.Z)({ref:e},n),{sx:{width:"50px",height:"50px"},children:(0,o.tZ)(d.Z,{})}))}));h.displayName="MobileDropdownButton"},66197:function(n,e,t){t.d(e,{x:function(){return i}});var r=t(2784);function i(n){var e=n.disabled,t=n.buttonId,i=n.menuId,o=(0,r.useState)(null),a=o[0],u=o[1],l=Boolean(a),c=(0,r.useState)(!1),d=c[0],s=c[1];(0,r.useEffect)((function(){l&&s(!0)}),[l,d,s]);var v=(0,r.useCallback)((function(n){l?u(null):e||u(n)}),[e,l,u]),m=(0,r.useCallback)((function(){u(null)}),[u]),f=(0,r.useRef)(null);return(0,r.useEffect)((function(){!l&&d&&f.current&&f.current.focus()}),[d,l,f]),{menuId:i,buttonId:t,hasOpened:d,disabled:null!==e&&void 0!==e&&e,isOpen:l,toggleDropdown:v,closeDropdown:m,dropdownAnchorElement:a,buttonRef:f}}},35098:function(n,e,t){function r(n){return{id:n.buttonId,"aria-labelledby":n.menuId,anchorEl:n.dropdownAnchorElement,open:n.isOpen,onClose:n.closeDropdown}}function i(n){return{ref:n.buttonRef,id:n.buttonId,tabIndex:n.disabled?-1:0,"aria-controls":n.isOpen?n.menuId:void 0,"aria-haspopup":"true","aria-expanded":n.isOpen?"true":void 0,onClick:function(e){return n.toggleDropdown(e.currentTarget)}}}t.d(e,{a:function(){return r},m:function(){return i}})},10643:function(n,e,t){t.d(e,{Ex:function(){return s},HT:function(){return d}});var r=t(52903),i=t(21758),o=t(35691),a=t(25813),u=t(93698),l=t(2784),c=function(n){var e=n.nameParts;return(0,r.tZ)(r.HY,{children:e.map((function(n,e){return(0,r.tZ)("span",{style:{fontWeight:(null===n||void 0===n?void 0:n.highlight)?"bold":"normal"},children:n.text},e)}))})},d=function(n){var e=n.member,t=n.boldSubstring,d=!e.hasBeenInvited||!e.hasJoinedOrg,s=(0,l.useMemo)((function(){return(null===e||void 0===e?void 0:e.name)?null===e||void 0===e?void 0:e.name:(null===e||void 0===e?void 0:e.email)?null===e||void 0===e?void 0:e.email:""}),[e]),v=(0,u.Au)(s,t);return(0,r.BX)(o.x,{display:"flex",width:"90%",alignItems:"center",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,r.tZ)(i.q,{alt:e.name||e.email||"avatar",disabled:d,src:null===e||void 0===e?void 0:e.profilePictureUrl,"data-testid":"initials-container"}),(0,r.BX)(o.x,{display:"flex",flexDirection:"column",ml:"8px",children:[(0,r.tZ)(o.x,{width:"100%",display:"table",style:{tableLayout:"fixed"},children:(0,r.tZ)(a.xv,{"data-testid":"name",display:"table-cell",style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},fontSize:"14px",color:d?"secondary.disabled":"primary.black",children:(0,r.tZ)(c,{nameParts:v})})}),e.name&&e.email&&(0,r.tZ)(a.xv,{"data-testid":"member-email",color:"primary.grey",fontSize:"12px",children:e.email})]})]})},s=function(n){var e,t=n.team,l=n.boldSubstring,d=(0,u.Au)(null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:"",l);return(0,r.BX)(o.x,{display:"flex",width:"100%",alignItems:"center",children:[(0,r.tZ)(i.q,{alt:t.name||"team-avatar",src:null===t||void 0===t?void 0:t.profilePictureUrl,"data-testId":"initials-container"}),(0,r.tZ)(o.x,{display:"flex",flexDirection:"column",ml:"8px",children:(0,r.tZ)(a.xv,{"data-testid":"name",fontSize:"14px",children:(0,r.tZ)(c,{nameParts:d})})})]})}},87220:function(n,e,t){t.d(e,{f:function(){return f}});var r=t(87394),i=t(6182),o=t(75776),a=t(19122),u=t(94225),l=t(2784),c=t(24938),d=t(44525),s=t.n(d),v=t(85482);function m(n){var e=(0,l.useState)([]),t=e[0],r=e[1],i=(0,c.wh)(),u=function(n,e,t){var r=(0,a.F)().jwt,i=(0,o.$6)(n,e);return(0,l.useMemo)((function(){var e,a=t||(null===r||void 0===r||null===(e=r.org)||void 0===e?void 0:e.orgId)||"";switch(n){case"members":return(0,o.rI)(i,a);case"teams":return(0,o.my)(i,a);case"membersAndTeams":return(0,o.Jw)(i,a);default:return""}}),[r,i,n,t])}(n.searchFor,n.searchTerm,n.orgId),d=(0,v.ZP)(n.disableFetch?null:u,i),s=d.data,m=d.error,f=d.isValidating,h=(0,l.useMemo)((function(){return!s||f}),[s,f]),p=n.setLoading;return(0,l.useEffect)((function(){p(h)}),[h,p]),(0,l.useEffect)((function(){if(m||200!==(null===s||void 0===s?void 0:s.status))h||r([]);else if(s){var n,e,t,i=null!==(t=null!==(e=null!==(n=null===s||void 0===s?void 0:s.collaborators)&&void 0!==n?n:null===s||void 0===s?void 0:s.orgMembers)&&void 0!==e?e:null===s||void 0===s?void 0:s.teams)&&void 0!==t?t:[];r((0,o.hm)(i))}}),[h,s,m]),t}function f(n){var e=n.showInvitationPrompt,t=n.searchFor,a=n.removeFromResults,c=(0,l.useState)(""),d=c[0],v=c[1],f=(0,r.Z)((0,u.Nr)(d,500),1)[0],h=(0,l.useState)(!1),p=h[0],b=m({searchTerm:f,setLoading:h[1],searchFor:t,disableFetch:n.disableFetch,orgId:n.orgId});return{searchResults:(0,l.useMemo)((function(){return 0===b.length&&s()(d)&&e?[{type:i.Bk.INVITATION_PROMPT,email:d}]:a?b.filter((function(n){return!a.some((function(e){return(0,o.OG)(n,e)}))})):b}),[b,d,e,a]),searchTerm:d,setSearchTerm:v,loading:p}}},49985:function(n,e,t){t.d(e,{I:function(){return A}});var r=t(52903),i=t(70865),o=t(96670),a=t(2784),u=t(67768),l="".concat(204,"px"),c={width:"100%","& label":{color:u.r.colors.primary.grey,fontSize:"12px"},"& input":{mt:"8px",padding:"12px",paddingLeft:"44px",borderRadius:"4px",width:"100%",boxSizing:"border-box",border:"1px solid ".concat(u.r.colors.secondary.border),"&:focus":{border:"1px solid black",outline:0}}},d={display:"flex",position:"absolute",top:"8px",height:"44px",width:"44px",alignItems:"center",justifyContent:"center"},s=t(86423),v=t(4030),m=t(9345),f=t(25813),h=t(85735),p=t(10643),b=t(75776),g=function(n){var e=n.label,t=n.loading,u=n.placeholder,m=n.results,f=n.inputValue,p=n.setInputValue,g=n.onResultClicked,Z=n.onRefInitialized,A=n.searchFor,x=n.onFocus,T=n.fromInternalAdmin,M=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(M.current){var n=M.current.getElementsByTagName("input")[0];null===Z||void 0===Z||Z(n)}}),[M,Z]),(0,r.tZ)(s.Z,{sx:c,id:"org-member-team-search",noOptionsText:"No results",ListboxProps:{style:{maxHeight:l}},options:m,filterOptions:function(n){return n},filterSelectedOptions:!0,getOptionLabel:b.Jn,renderTags:function(){return null},inputValue:f,onChange:function(n,e,t){"selectOption"===t&&g(e)},onInputChange:function(n){n&&p(n.target.value)},onFocus:function(){null===x||void 0===x||x()},onClose:function(){return p("")},autoSelect:!1,renderOption:function(n,e,t){var u=t.inputValue;return(0,a.createElement)("li",(0,o.Z)((0,i.Z)({},n),{key:(0,b.jw)(e),"data-testid":"search-result"}),(0,r.tZ)(v.Z,{sx:{py:"4px"},children:(0,r.tZ)(E,{searchResult:e,searchString:u})}))},renderInput:function(n){return(0,r.BX)(v.Z,{ref:M,children:[(0,r.tZ)("label",{children:e}),(0,r.BX)(v.Z,{sx:{"&:hover":{"& input":{borderColor:"black"}}},ref:n.InputProps.ref,position:"relative",children:[(0,r.tZ)(v.Z,{sx:d,children:t?(0,r.tZ)(h.T,(0,i.Z)({},T&&{iconSrc:"/internal-admin/icons/spinner.svg"})):(0,r.tZ)(I,{searchFor:A,fromInternalAdmin:T})}),(0,r.tZ)("input",(0,i.Z)({placeholder:u,type:"text"},n.inputProps))]})]})}})},I=function(n){var e=n.searchFor,t=n.fromInternalAdmin,i="teams"===e?"/icons/search.svg":"/icons/add-user.svg";return(0,r.tZ)(m.J,{color:"black",src:t?"/internal-admin/icons/add-user.svg":i,alt:"",width:"24px",height:"24px"})},E=function(n){var e=n.searchResult,t=n.searchString;if((0,b.Dy)(e))return(0,r.tZ)(p.HT,{member:e,boldSubstring:t});if((0,b.ef)(e))return(0,r.tZ)(p.Ex,{team:e,boldSubstring:t});if((0,b.BA)(e)){var i=e,o=(0,b.LJ)(i);return(0,r.BX)(v.Z,{"data-testid":"invitation-prompt",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.tZ)(p.HT,{member:o}),(0,r.tZ)(f.xv,{fontSize:"14px",minWidth:"25px",maxWidth:"25px",px:"8px",color:"primary.flowBlue",children:"Invite"})]})}return(0,r.tZ)(r.HY,{})},Z=t(87220),A=function(n){var e,t,i=(0,Z.f)(n),o=i.loading,a=i.searchResults,u=i.searchTerm,l=i.setSearchTerm;return(0,r.tZ)(g,{onRefInitialized:n.onRefInitialized,placeholder:null!==(e=n.placeholder)&&void 0!==e?e:"",label:null!==(t=n.label)&&void 0!==t?t:"",loading:o,onFocus:n.onFocus,results:a,inputValue:u,setInputValue:l,onResultClicked:n.onSearchResultClicked,searchFor:n.searchFor,fromInternalAdmin:n.fromInternalAdmin})}},6182:function(n,e,t){var r,i,o,a;t.d(e,{Bk:function(){return r},TC:function(){return a},c9:function(){return o},eR:function(){return i}}),function(n){n.TEAM_MEMBER="TEAM_MEMBER",n.TEAM="TEAM",n.INVITATION_PROMPT="INVITATION_PROMPT"}(r||(r={})),function(n){n.NAMES_ALPHABETICALLY="name",n.NAMES_REVERSE_ALPHABETICALLY="-name"}(i||(i={})),function(n){n.NAMES_ALPHABETICALLY="teamName",n.NAMES_REVERSE_ALPHABETICALLY="-teamName"}(o||(o={})),function(n){n.NAMES_ALPHABETICALLY="entityName",n.NAMES_REVERSE_ALPHABETICALLY="-entityName"}(a||(a={}))},75776:function(n,e,t){t.d(e,{$6:function(){return T},BA:function(){return h},Dy:function(){return m},Jn:function(){return p},Jw:function(){return A},LJ:function(){return I},OG:function(){return w},ef:function(){return f},hm:function(){return b},jw:function(){return v},my:function(){return Z},rI:function(){return E},st:function(){return M}});var r=t(70865),i=t(88520),o=t(14905),a=t(6182),u=t(53975),l=t(33790),c=t(13634),d=t(74930),s=t.n(d);function v(n){var e,t,r;return m(n)?null===(e=n)||void 0===e?void 0:e.id:f(n)?null===(t=n)||void 0===t?void 0:t.teamId:h(n)?null===(r=n)||void 0===r?void 0:r.email:""}function m(n){return n.type===a.Bk.TEAM_MEMBER}function f(n){return n.type===a.Bk.TEAM}function h(n){return n.type===a.Bk.INVITATION_PROMPT}function p(n){if(m(n)){var e=n;return e.name||e.email||""}return f(n)&&n.name||""}function b(n){var e=[];return n.forEach((function(n){if(function(n){return"type"in n}(n)){var t=null;n.type===o.DC.TEAM?t=function(n){var e;return{type:a.Bk.TEAM,teamId:n.id,name:null!==(e=n.name)&&void 0!==e?e:"",memberCount:0,directChildren:[],directChildrenCount:0}}(n):n.type===o.DC.USER&&(l=n,t={type:a.Bk.TEAM_MEMBER,id:l.id,name:l.name,email:l.email,role:i.k.MEMBER,hasBeenInvited:!0,hasJoinedOrg:!0}),t&&e.push(t)}else!function(n){return"orgRole"in n}(n)?function(n){return"memberCount"in n}(n)&&e.push((u=n,(0,r.Z)({type:a.Bk.TEAM},(0,c.eo)(u)))):e.push(function(n){var e=n.firstName&&n.lastName?"".concat(n.firstName," ").concat(n.lastName):"";return{type:a.Bk.TEAM_MEMBER,id:n.ithacaId,name:e,email:n.email,role:g(n.orgRole),hasBeenInvited:!0,hasJoinedOrg:!0}}(n));var u,l})),e}function g(n){switch(n){case u.rq.ADMIN:return i.k.ADMIN;case u.rq.MEMBER:return i.k.MEMBER;default:return i.k.VIEWER}}function I(n){return{id:s()(),email:n.email,role:i.k.MEMBER,hasBeenInvited:!1,hasJoinedOrg:!1}}function E(n,e){return e?"".concat(l.V7,"/org-members/").concat(e,"?").concat(n):null}function Z(n,e){return e?"".concat(l.V7,"/teams/").concat(e,"?").concat(n):null}function A(n,e){return e?"".concat(l.V7,"/collaborators?").concat(n,"&fetchCollaborators"):null}function x(n){switch(n){case"members":return a.eR.NAMES_ALPHABETICALLY;case"teams":return a.c9.NAMES_ALPHABETICALLY;case"membersAndTeams":return a.TC.NAMES_ALPHABETICALLY;default:return""}}function T(n,e){return new URLSearchParams({orderBy:x(n),searchTerm:e}).toString()}function M(n){return n.map((function(n){return e=n,(0,r.Z)({type:a.Bk.TEAM_MEMBER},e);var e}))}function w(n,e){return m(n)&&m(e)?n.id===e.id:f(n)&&f(e)?n.teamId===e.teamId:!(!h(n)||!h(e))&&n.email===e.email}},7295:function(n,e,t){t.d(e,{BR:function(){return o},gT:function(){return a},q:function(){return i}});var r,i,o,a=25;!function(n){n.VIEWER="team_role:viewer",n.MEMBER="team_role:member",n.ADMIN="team_role:admin"}(r||(r={})),function(n){n.NameAsc="teamName",n.NameDsc="-teamName",n.MemberCountAsc="memberCount",n.MemberCountDsc="-memberCount",n.SubteamCountAsc="directChildrenCount",n.SubteamCountDsc="-directChildrenCount"}(i||(i={})),function(n){n.NameAsc="name",n.NameDsc="-name",n.RoleAsc="role",n.RoleDsc="-role"}(o||(o={}))},24938:function(n,e,t){t.d(e,{LR:function(){return f},NP:function(){return h},Th:function(){return g},lU:function(){return b},lz:function(){return I},q:function(){return m},q4:function(){return r},wh:function(){return v},y2:function(){return p}});var r,i=t(98788),o=t(94776),a=t.n(o),u=t(90836),l=t(62030),c=t(19122),d=t(85482),s=d.J$.default.cache,v=function(){var n=(0,c.F)().jwt,e=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.t1=fetch,e.t2=t,e.next=5,(0,u.ve)(null===n||void 0===n?void 0:n.token);case 5:return e.t3=e.sent,e.t4={method:"GET",headers:e.t3},e.next=9,(0,e.t1)(e.t2,e.t4).then((function(n){return n.json()}));case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=[];case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return e};!function(n){n.NameAsc="name",n.NameDsc="-name",n.RoleAsc="role",n.RoleDsc="-role",n.LastLoginAsc="lastLogin",n.LastLoginDesc="-lastLogin"}(r||(r={}));var m,f=function(n){var e=n.orgId,t=n.limit,i=void 0===t?l.wb:t,o=n.offset,a=void 0===o?0:o,u=n.orderBy,c=void 0===u?r.NameAsc:u,s=n.searchTerm,m=n.paginate,f=void 0===m||m,h=n.invitationsOnly,p=void 0!==h&&h,b=n.teams,g=void 0!==b&&b,I={orderBy:c};p?(I.limit="0",I.offset="0"):f&&(I.limit=i.toString(),I.offset=a.toString()),s&&(I.searchTerm=s);var E=new URLSearchParams(I).toString(),Z=g?E+"&teams":E,A=e?l.vb.members+e+"?"+Z:null,x=v(),T=(0,d.ZP)(A,x,{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!1}),M=T.data;return T.error||200!==(null===M||void 0===M?void 0:M.status)||!e?{members:void 0}:{members:p?(null===M||void 0===M?void 0:M.invitations)||[]:(null===M||void 0===M?void 0:M.orgMembers)||[],path:A||l.vb.members+e}},h=function(n,e){var t=n&&(null===e||void 0===e?void 0:e.toLowerCase().includes("flowcode"))?l.vb.orgExtras+n:null,r={revalidateOnMount:!s.has(t),revalidateOnFocus:!1,revalidateOnReconnect:!1},i=v(),o=(0,d.ZP)(t,i,r),a=o.data;return!o.error&&a&&200===(null===a||void 0===a?void 0:a.status)&&n&&(null===a||void 0===a?void 0:a.orgExtras)||[]};!function(n){n.NameAsc="teamName",n.NameDsc="-teamName",n.CountAsc="memberCount",n.CountDsc="-memberCount"}(m||(m={}));var p=function(n){var e=n.orgId,t=n.limit,r=void 0===t?l.mg:t,i=n.offset,o=void 0===i?0:i,a=n.orderBy,c=void 0===a?m.NameAsc:a,s=n.searchTerm,f=n.paginate,h=void 0===f||f,p=n.teamId,b=n.directChildren,g=void 0!==b&&b,I=n.me,E=void 0!==I&&I,Z={orderBy:c};h&&(Z.limit=r.toString(),Z.offset=o.toString()),s&&(Z.searchTerm=s),p&&(Z.teamId=p);var A=new URLSearchParams(Z).toString();g&&(A+="&directChildren"),E&&(A+="&me");var x=e?l.vb.teams+e+"/?"+A:null,T=v(),M=(0,d.ZP)(x,T,{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0}),w=M.data,R=M.error,y=M.mutate;if(!R&&w&&200===(null===w||void 0===w?void 0:w.status)&&e)return{teams:(0,u.aF)(w.teams),mutate:y}},b=function(n){var e=n?l.vb.teamMembers+n:null,t=v(),r=(0,d.ZP)(e,t),i=r.data;return!r.error&&i&&200===(null===i||void 0===i?void 0:i.status)&&n&&(null===i||void 0===i?void 0:i.teamMembers)||[]},g=function(n){var e=n.orgId,t=e?l.vb.invitations+"?orgId="+e:null,r=v(),i=(0,d.ZP)(t,r,{revalidateOnMount:!0,revalidateOnFocus:!1,revalidateOnReconnect:!0}),o=i.data;if(!i.error&&o&&200===(null===o||void 0===o?void 0:o.status))return null===o||void 0===o?void 0:o.invitations},I=function(n,e){var t=e&&n?l.vb.invitations+"?invitationId="+n+"&token="+e:null,r=v(),i=(0,d.ZP)(t,r),o=i.data,a=i.error;return 404===(null===o||void 0===o?void 0:o.status)?{invitation:void 0,orgName:void 0}:!a&&o&&200===(null===o||void 0===o?void 0:o.status)&&e?{invitation:(null===o||void 0===o?void 0:o.invitations[0])||void 0,orgName:null===o||void 0===o?void 0:o.orgName}:void 0}}}]);