(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3338],{81930:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var a=r(59499),n=r(81020),s=r.n(n),i=r(67294),o=r(72555),c=r.n(o),d=r(43393),l=r.n(d),p=r(96486);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e,t,r){var n=e.displayName||e.name;t=t||{};var o={displayName:"".concat(n,"MutationExposer"),propTypes:{propName:s().any},exposeProps:function(){var e=(0,p.extend)({},this.props);return(0,p.each)(t,(0,p.bind)((function(t){var a=this.props[t];a&&a.size&&(a.get&&a.get("mutations")?a=l().List([a]):"paginationData"===t&&a.get&&a.first().get("mutations")&&(a=a.reduce((function(e,t){return t&&e.push(t),e}),[])),a.forEach((function(t){l().Map.isMap(t)&&(t.get("mutations")||l().Map()).forEach((function(a,n){var s,i;r&&r.groupedBy&&(i=t.get(r.groupedBy)),e[n]?(r&&r.groupedBy?(s=e[n].get(i,l().Map()).merge(a),s=e[n].set(i,s)):s=e[n].merge(a),e[n]=s):(s=a&&0!==a.size?a:l().Map(),r&&r.groupedBy&&(s=l().Map().set(i,s)),e[n]=s)}))})))}),this)),e},render:function(){return i.createElement(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ref:"component"},this.exposeProps()))}};return c()(o)}},18976:function(e,t,r){"use strict";var a=r(59499),n=r(67294),s=r(72555),i=r.n(s),o=r(43393),c=r.n(o),d=r(20084),l=r(18783),p=r(94248),u=r(85893);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=i()({displayName:"PaginationIncrementalLoader",mixins:[l.Z],getDefaultProps:function(){return{navigateOnPageChange:!0,showArrows:!0,maxLoaders:2}},paginationClicked:function(e){d.Z.canGoToPage(e,this.props.numPages)&&this.props.goToPage&&this.props.goToPage(e,!this.props.navigateOnPageChange)},renderItem:function(e,t){return"function"===typeof this.props.item?this.props.item(e,this.props):n.cloneElement(this.props.item,Object.assign({key:"item-".concat(t),itemData:e},this.props))},renderLoadingItem:function(e){return"function"===typeof this.props.loadingItem?this.props.loadingItem(e):n.cloneElement(this.props.loadingItem,Object.assign({key:"loader-".concat(e)},this.props))},render:function(){var e,t,r,a=[],n=this.props.paginationData,s=Math.min(this.props.perPage,this.props.total),i=0;!c().List.isList(n)&&c().Iterable.isIterable(n)&&(n=n.toList());for(var o=0;o<s;o++){var d=n.get(o),l=this.props.loading&&this.props.hasMore&&this.props.initialLoad,g=!d&&this.props.hasMore||!l&&this.props.loading;this.props.maxLoaders<=i&&(g=!1),g?(i++,t=this.renderLoadingItem(o)):t=d?this.renderItem(d,o):null,t&&a.push(t)}return a.length?r=this.props.contentClassName:a=this.props.emptyState,this.props.showArrows&&(e=(0,u.jsx)(p.Z,h(h({},this.props),{},{paginationClicked:this.paginationClicked}))),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:r,children:a}),e]})}});t.Z=m},46483:function(e,t,r){"use strict";r(67294);var a=r(30381),n=r.n(a),s=r(43393),i=r.n(s),o=r(67764),c=r(96908),d=r(85893);t.Z=o.Z.extend({isEnabled:function(){return!!this._model&&!(this._model.get("rosterCreationStartAt")>(new Date).getTime()/1e3)},getUrl:function(e){var t=this.getFantasyUrl(e);return this._model&&this._model.get("id")&&(t+="/event/".concat(this._model.get("id"))),t},getRosterUrl:function(e,t){var r=this.getFantasyUrl(e);return t&&(r+="/roster/".concat(t)),r},getCreateUrl:function(e){var t=this.getFantasyUrl(e);return this._model&&this._model.get("id")&&(t+="/create/event/".concat(this._model.get("id"))),t},getFantasyUrl:function(e){return e?"".concat(e,"/fantasy"):null},isPublished:function(){return this._model.get("published")},getAdminPageAlert:function(e){if(!e)return(0,d.jsx)("div",{className:"alert alert-info text-center strong no-margin",children:"You can see this page because you're an admin for this tournament, but fantasy is not published. Contact startgg for publishing"});if(!this.isEnabled()){var t=n().unix(this._model.get("rosterCreationStartAt")).format("dddd, MMMM Do YYYY, h:mm:ss a");return(0,d.jsxs)("div",{className:"alert alert-info text-center strong no-margin",children:["You can see this page because you're an admin for this tournament. Others will not be able to see it until ",t]})}},getPrizeImage:function(e){var t="prize".concat(e);return this.getImage(t,null,180)},getPreviewPrizeImage:function(e){var t="prize".concat(e);return this.getImage(t,null,600)},hasRosterCreationEnded:function(){var e=this._model.get("rosterCreationEndAt");return e&&n().unix(e).isBefore(n()())},isScored:function(){return(this._model.get("bonusQuestions")||i().Map()).reduce((function(e,t){return!1!==t.get("answer")&&void 0!==t.get("answer")&&null!==t.get("answer")&&e}),!0)&&this._model.get("state")===c.Z.COMPLETED}},{})},89866:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return H},default:function(){return A}});var a=r(74896),n=(r(67294),r(23672)),s=r(59499),i=r(72555),o=r.n(i),c=r(43393),d=r.n(c),l=r(78147),p=r(83049),u=r(48206),g=r(97115),h=r(21108),m=r(81930),f=r(18976),v=r(90977),y=r(46483),j=r(93658),b=r(96908),_=r(34174),C=r(85893),x=o()({displayName:"FantasyCard",getFantasyUrl:function(){var e=this.props.cardData.getIn(["tournamentData","slug"]);return new y.Z(this.props.fantasyEvent).getUrl(e)},getRosterUrl:function(e){var t=this.props.cardData.getIn(["tournamentData","slug"]),r=new y.Z(this.props.fantasyEvent),a=this.props.cardData.getIn(["userData","roster","hash"]);return e||(e=a),r.getRosterUrl(t,e)},getCreateRosterUrl:function(){var e=this.props.cardData.getIn(["tournamentData","slug"]);return new y.Z(this.props.fantasyEvent).getCreateUrl(e)},getPrizeImage:function(e){return new y.Z(this.props.fantasyEvent).getPrizeImage(e)},renderCardHeading:function(){var e=this.props.cardData,t=e&&e.get("tournamentData");if(t){var r=new j.Z,a=e.getIn(["tournamentData","name"]),n=e.getIn(["eventData","gameName"]),s=e.getIn(["tournamentData","profileImage"])||d().Map(),i=(new j.Z).convertToBingThImageUrl(s.get("url"),100),o=this.getFantasyUrl(),c=(0,C.jsx)("i",{className:"fa fa-4x fa-book"});i&&(c=(0,C.jsx)("img",{src:i,alt:"tournament icon"}));var l=function(e,a){var n=t.get(e);return n&&r.convertToBingThImageUrl(n.get("url"),a)}("bannerImage"),p={"background-image":"url(".concat(l,")")};return(0,C.jsxs)("div",{className:"CardHeading CardHeading--full",children:[(0,C.jsx)("div",{className:"CardHeading__bg",style:p}),(0,C.jsx)("a",{href:o,className:"CardHeading__icon",children:c}),(0,C.jsxs)("div",{className:"CardHeading__information",children:[(0,C.jsx)("div",{className:"CardHeading__title",children:(0,C.jsx)(_.rU,{url:o,children:a})}),(0,C.jsx)("div",{className:"CardHeading__game",children:n})]})]})}},renderTopRoster:function(e,t){var r=e.get("score")||0,a=e.get("name"),n=e.get("gamerTag"),s=this.getRosterUrl(e.get("hash"));return(0,C.jsxs)("li",{className:"CardItem",children:[(0,C.jsxs)("div",{className:"CardItem__content",children:[(0,C.jsx)(_.rU,{url:s,className:"CardItem__title",children:a}),(0,C.jsx)("div",{className:"CardItem__subtitle",children:n})]}),(0,C.jsx)("div",{className:"CardItem__info",children:r})]},"top-roster-".concat(t))},renderCardBody:function(){var e,t,r=this.props.cardData,a=this.props.fantasyEvent,n=a.get("prizes"),s=r.getIn(["fantasyEventData","topRosters"])||d().List(),i=a.get("hasPrizes")&&n.size;if(i){var o=this.getPrizeImage(0),c=n.first(),l=this.getFantasyUrl(),p=n.size-1;p&&(t=(0,C.jsx)("div",{className:"CardItem__info",children:(0,C.jsxs)(_.rU,{url:l,children:["+",p," more prize levels"]})})),e=(0,C.jsxs)("li",{className:"CardItem CardItem--featured",children:[(0,C.jsx)("div",{className:"CardItem__icon",style:{backgroundImage:"url(".concat(o,")")}}),(0,C.jsxs)("div",{className:"CardItem__content",children:[(0,C.jsx)("div",{className:"CardItem__header",children:c.get("title")}),(0,C.jsx)("div",{className:"CardItem__title",children:c.get("text")})]}),t]})}var u=[],g=3;i||g++;for(var h=0;h<g;h++){var m=s.get(h);m&&u.push(this.renderTopRoster(m,h))}return(0,C.jsxs)("ul",{className:"CardItemList",children:[e,u]})},renderCardFooter:function(){var e,t=this.props.cardData,r=t.get("userData"),a=t.get("numRosters"),n=!new y.Z(this.props.fantasyEvent).hasRosterCreationEnded(),s=this.getFantasyUrl();if(r&&r.size){var i=this.getRosterUrl();e=(0,C.jsx)("div",{className:"CardFooting__links",children:(0,C.jsx)(_.rU,{url:i,type:"primary",children:"View your roster"})})}else if(n){var o=this.getCreateRosterUrl();e=(0,C.jsx)("div",{className:"CardFooting__links CardFooting__links--success",children:(0,C.jsx)(_.rU,{url:o,type:"primary",children:"Create team"})})}var c=null;return t.get("eventState")===b.Z.COMPLETED&&(c=(0,C.jsx)("div",{className:"pull-right",children:(0,C.jsx)("div",{className:"text-success text-bold",children:"Scored"})})),(0,C.jsxs)("div",{className:"CardFooting CardFooting--bordered",children:[(0,C.jsx)("div",{className:"CardFooting__actions",children:(0,C.jsxs)(_.rU,{url:s,type:"primary",children:[a," rosters"]})}),e,c]})},render:function(){return(0,C.jsxs)("div",{className:"ShopCard Card--sm",children:[this.renderCardHeading(),this.renderCardBody(),this.renderCardFooter()]})}}),N=(0,l.Z)(x),O=r(94116),P={filters:[[{label:"Active",fieldName:"active",type:"bool"}],[{label:"Has Prize",fieldName:"hasPrizes",type:"bool"}],[{label:"Before Date",fieldName:"beforeDate",type:"date"},{label:"After Date",fieldName:"afterDate",type:"date"},{label:"Specific Date",fieldName:"specificDate",type:"date"}]],search:{placeholder:"Enter Tournament Name"}},D=r(37975);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=o()({displayName:"FantasyPage",renderFantasyCard:function(e){var t=this.props.cardData&&this.props.cardData.get(e&&e.get("id"));return t?(0,C.jsx)("div",{className:"Column",children:(0,C.jsx)(N,{fantasyEvent:e,cardData:t})},"fantasy-card-".concat(e.get("id"))):(0,C.jsx)("div",{})},renderHeader:function(){return(0,C.jsx)("div",{className:"TopLevelFilterBackground TopLevelFilterBackground--fantasy",children:(0,C.jsx)(D.Z,{query:d().fromJS(this.props.query),containerClass:"container",titleKey:"fantasy"})})},renderLoaderCard:function(e){return(0,C.jsxs)("div",{className:"LoadingCard Card Card--wide",children:[(0,C.jsx)("div",{className:"LoadingCard__icon"}),(0,C.jsxs)("div",{className:"LoadingCard__container",children:[(0,C.jsx)("div",{className:"LoadingCard__header"}),(0,C.jsx)("div",{className:"LoadingCard__bar LoadingCard__bar--md"}),(0,C.jsx)("div",{className:"LoadingCard__bar LoadingCard__bar--lg"}),(0,C.jsx)("div",{className:"LoadingCard__bar LoadingCard__bar--sm"})]})]},"loader-".concat(e))},render:function(){var e="/fantasy",t=(0,C.jsx)("a",{href:e,children:"Clear filters"}),r=(0,C.jsx)(v.Z,{title:"No results found",message:t}),a=(0,C.jsx)("div",{children:(0,C.jsx)(f.Z,I(I({},this.props),{},{paginationData:this.props.paginationData,contentClassName:"ColumnGroup ColumnGroup__spaced ColumnGroup--objectCard",emptyState:r,item:this.renderFantasyCard,loadingItem:this.renderLoaderCard,showArrows:!0,navigateOnPageChange:!p.Z.get("noNavigate")}))});return(0,C.jsxs)("div",{children:[this.renderHeader(),(0,C.jsx)("div",{className:"top-spacer bottom-spacer",children:(0,C.jsx)(u.Z,{children:(0,C.jsx)(O.Z,{baseUrl:e,query:this.props.query,searchField:"name",filterTabs:{filters:{label:"Filters",leftIcon:"fa-plus"},search:{label:"Search",leftIcon:"fa-search",collapsible:!0}},filterConfig:P})})}),(0,C.jsx)(u.Z,{children:a})]})}});E=(0,m.Z)(E,["paginationData"]),E=(0,l.Z)(E);var Z=(0,h.Z)((0,g.Z)(E,"FantasyEventListStore","FantasyEventStore")),L=r(96486),F=r(9301),U=r(81645).Z.extend({getPage:function(e,t){var r=this;this.request("read","/fantasy/events",e,(function(a,n,s){var i=r.normalizePaginatedData(a,s,e.schema,n);t(i,n)}))}}),T=r(43274);var S=r(28968),k="fantasy-page",M=(0,n.Z)((function(){return(0,C.jsx)(Z,{paginationKey:k,currentRoute:(0,S.N0)()})}),(function(e,t,r){var a=new U(e),n=F.Z.FANTASY_EVENT.FETCHED,s=(0,L.extend)({},t.query);s.page=t.page||1,a.getPage({params:s,schema:T.Z.paginatedSchema,validationKey:t.validationKey},(function(t,a){a||e.dispatch(n,t),r(a,t)}))}),k),z=function(){return(0,C.jsx)(M,{})},R={titleKey:"fantasy",pageTelemetry:{name:"Fantasy Events"}};z.routeMeta=R,z.getLayout=(0,a.G)(R);var H=!0,A=z},67827:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fantasy",function(){return r(89866)}])}},function(e){e.O(0,[3338],(function(){e.E(9135),e.E(5720)}),5);e.O(0,[9729,9741,2110,9135,5499,7958,6845,9643,6291,9774,2888,179],(function(){return t=67827,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=fantasy-d748a89a4bbfb845.js.map