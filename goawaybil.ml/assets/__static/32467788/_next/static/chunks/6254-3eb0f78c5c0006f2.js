(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6254],{41239:function(e,t,n){"use strict";var i=n(93679);t.Z=i.Z},76254:function(e,t,n){"use strict";n.d(t,{Z:function(){return rn}});var i=n(59499),a=n(81020),r=n.n(a),s=n(67294),o=n(11214),l=n(72555),c=n.n(l),d=n(96486),u=n(94184),m=n.n(u),p=n(43393),h=n.n(p),v=n(78147),g=n(3248),f=n(22713),k=n(85302),y=n(13607),S=n(93267),b=n(13770),I={visible:{47870:x(1525726800),102414:x(1539025200),84422:x(1539025200),135733:x(1549569600),128651:x(1549569600)},details:{small:{1331:!0,1639:!0,1641:!0,2115:!0,2118:!0,2258:!0,2198:!0,4148:!0,6973:!0,15922:!0,10287:!0,41534:!0,47149:!0,47870:!0,102414:!0,84422:!0},visible:{1858:!1,1865:!1,1641:!1,1911:!1,1912:!1,2042:!1,2077:!1,2131:!1,2135:!1,2118:!1,2198:!1,4148:!1,10287:!1,4612:!1,6973:!1,15922:!1,16279:!1,23901:!1,41534:!1,47149:!1,47870:!1,102414:!1,84422:!1,135733:!1,128651:!1}},events:{visible:{4612:!1}},attendees:{small:{1858:!1,1865:!1,2042:!1}}},N={name:"Dashboard",classes:{"visible-xs-block":!0},visible:function(e,t,n){return!!n},small:!0},P={items:{details:{name:"Details",collapsible:!1,small:function(e){var t=e.get("id");return I.details.small[t]||!1},visible:function(e,t,n){var i=e.get("id");return void 0===I.details.visible[i]||I.details.visible[i]}},events:{name:function(e){return 10435===e.get("id")?"Brackets":"Events"},collapsible:!1,visible:function(e,t,n){var i=e.get("id");return void 0===I.events.visible[i]||I.events.visible[i]},small:function(e,t,n){return!new k.Z(e).isLivePlayerVisible(t,n)}},attendees:{name:"Attendees",collapsible:function(e){return 1250!==e.get("id")},small:function(e,t,n){var i=new k.Z(e),a=e.get("id");return void 0!==I.attendees.small[a]?I.attendees.small[a]:!i.isLivePlayerVisible(t,n)},visible:function(e,t,n){return new k.Z(e).getPublishingOption(y.Z.ATTENDEES.key)}},claim:{name:"Claim",collapsible:!1,small:function(e,t,n){return!new k.Z(e).isLivePlayerVisible(t,n)},visible:!1},voting:{name:function(e){var t=new k.Z(e),n=e.get("id");return t.isDota()||9619===n?"Team Voting":1606===n?"The Contract":1906===n||2018===n?"Compendium":16254===n||12629===n?"Crew Voting":"Player Voting"},small:!0,tabKey:function(e){var t=(new Date).getTime()/1e3;switch(e&&e.get("id")){case 1331:case 1063:case 1641:case 1639:case 2118:case 2198:case 1606:case 1649:case 4148:case 4612:case 6973:case 10287:case 9619:case 16254:case 12629:case 15922:case 16279:case 23901:case 41534:case 47149:case 47870:case 102414:return"voting";case 84422:return t>1539723600?"voting":"nomination";case 128651:case 135733:return t>1550001600?"voting":"nomination";case 2018:case 6396:case 6076:case 3175:case 7093:case 13299:case 28269:case 30686:case 61085:return"nomination";case 1906:return"shop"}},visible:function(e,t){t&&new b.Z(t).hasPermission(S.Z.VIEW_ADMIN,e);return e.get("id")&&{1641:!0,1639:!0,1331:!1,2118:!0,2198:!0,4148:!0,4612:!0,1649:!0,1606:!0,1906:!0,2018:!0,6396:!0,6076:!0,6973:!0,3175:!0,10287:!0,9619:!0,7093:!0,16254:!0,12629:!0,16628:!0,15922:!0,16279:!0,23901:!0,13299:!0,28269:!0,41534:!0,47149:!0,47870:!0,61085:!0,30686:!0,102414:!0,84422:!0,135733:!0,128651:!0}[e.get("id")]}},smashdraft:{name:"Smash Draft",collapsible:!0,small:!0,visible:function(e,t,n){return 1250===e.get("id")||2018===e.get("id")}},makeup:{name:"Makeup Registration",collapsible:!0,small:!0,accessible:!0,visible:!1},fantasy:{name:"Fantasy",visible:function(e,t){return new k.Z(e).getPublishingOption(y.Z.FANTASY.key)},small:!0},checkout:{name:"Checkout"},register:{name:"Register",classes:{"visible-xs-block":!0},visible:function(e,t,n){var i=new k.Z(e);return!n&&i.isRegistrationOpen()}},manage:N,dashboard:N,manage_registration:N,admin:{name:"Switch to admin",visible:function(e,t,n){var i=!1;return t&&(i=new b.Z(t).hasPermission(S.Z.VIEW_ADMIN,e)),i}},donate:{name:function(e){var t=e&&e.get("id");return!e||1250!==t&&1311!==t?"Donate":"Compendium"},small:!0,visible:function(e,t,n){return 1045===e.get("id")||1078===e.get("id")||1120===e.get("id")||1331===e.get("id")||1063===e.get("id")||1028===e.get("id")||1212===e.get("id")||1185===e.get("id")||1250===e.get("id")||1311===e.get("id")}},compendium:{name:"Compendium",small:!0,visible:function(e,t,n){return 1102===e.get("id")}},shop:{name:"Shop",small:!0,collapsible:function(e){return 1250!==e.get("id")},visible:function(e,t,n){return 1028===e.get("id")||1250===e.get("id")}},leaderboard:{name:"Civil War",small:!0,collapsible:!0,visible:function(e){return 3175===e.get("id")}}},generators:{shop:function(e){return{name:e.get("name"),small:!0,collapsible:function(e){return 1250!==e.get("id")},visible:(0,d.partial)((function(e,t,n,i){if(!new k.Z(t).isValidGeneratedTab(e.get("name")))return!1;var a=!0;return e.get("adminOnly")&&(a=!1),e.get("adminOnly")&&n&&(a=new b.Z(n).hasPermission(S.Z.VIEW_ADMIN,t)),a}),e),customTab:e.get("customTab")}},link:function(e){return{name:e.get("name"),url:e.get("url"),target:e.get("target"),small:!0,collapsible:function(e){return 1250!==e.get("id")},visible:(0,d.partial)((function(e,t,n,i){if(!new k.Z(t).isValidGeneratedTab(e.get("name")))return!1;var a=!0;return e.get("adminOnly")&&(a=!1),e.get("adminOnly")&&n&&(a=new b.Z(n).hasPermission(S.Z.VIEW_ADMIN,t)),a}),e)}},custom:function(e){return{config:e,name:e.get("name"),small:!0,collapsible:function(e){return 1250!==e.get("id")},visible:(0,d.partial)((function(e,t,n,i){if(!new k.Z(t).isValidGeneratedTab(e.get("name")))return!1;var a=!0;return e.get("adminOnly")&&(a=!1),e.get("adminOnly")&&n&&(a=new b.Z(n).hasPermission(S.Z.VIEW_ADMIN,t)),a}),e)}},nomination:function(e){return{name:e.get("name"),small:!0,collapsible:function(e){return 1250!==e.get("id")},visible:(0,d.partial)((function(e,t,n,i){if(!new k.Z(t).isValidGeneratedTab(e.get("name")))return!1;var a=!0;(e.get("adminOnly")&&(a=!1),e.get("adminOnly")&&n&&(a=new b.Z(n).hasPermission(S.Z.VIEW_ADMIN,t)),4148===t.get("id"))&&(a=(new Date).getTime()/1e3>=1475521200);return a}),e)}}},processGeneratedTabs:function(e){var t={};return(e.get("generatedTabs")||h().Map()).forEach((function(e,n){e.forEach((function(e,i){P.generators[n]&&(t[i]=P.generators[n](e))}),this)}),this),t},buildNavForItems:function(e,t,n,i){var a={},r=[],s=t&&t.get("id"),o=!s||!1!==I.visible[s];return s&&"function"===typeof I.visible[s]&&(o=I.visible[s](t)),(0,d.each)(e,(function(e,s){var o=!0,l=!0,c={};"function"===typeof e.visible?o=e.visible(t,n,i):void 0!==e.visible&&(o=e.visible),o||("function"===typeof e.accessible?l=e.accessible(t,n,i):void 0!==e.accessible&&(l=e.accessible)),c.visible=o,c.accessible=l,c.slug=s,"function"===typeof e.name&&(c.name=e.name(t,n,i)),(o||l)&&(a[s]=(0,d.extend)({},e,c),r.push(s))})),{navOrder:r,nav:a,headerVisible:o}},buildNav:function(e,t,n){var i=P.processGeneratedTabs(e),a=(0,d.extend)({},P.items,i);return P.buildNavForItems(a,e,t,n)},doesTabExist:function(e,t){var n={};(t.get("generatedTabs")||h().Map()).forEach((function(e,t){e.forEach((function(e,i){P.generators[t]&&(n[i]=P.generators[t](e))}),this)}),this);var i=(0,d.extend)({},P.items,n);return"nomination"===e&&128651===t.get("id")||void 0!==i[e]},getTabRedirect:function(e,t){var n,i=t.getIn(["generatedTabs","link"]),a=e||"";return a="string"===typeof a?a.toLocaleLowerCase():"",i&&i.forEach((function(e,t){e&&e.get("path")===a&&(n=t)})),n},isValidTab:function(e,t,n,i){var a=P.buildNav(t,n,i);return a&&void 0!==a.nav[e]&&(a.nav[e].visible||a.nav[e].accessible)},getLeagueGeneratedNav:function(e,t){var n=P.processGeneratedTabs(e);return P.buildNavForItems(n,e,t,!1).nav}};function x(e){return Date.now()/1e3>=e}var j=P,C=n(33241),T=n(43929),w=n(90977),Z=n(48206),E=n(83025),O=n(17253),D=n(12315),_=n(17673),M=n(4620),A=n(72355),B=n(9301);function R(e,t){e.dispatch(B.Z.LIVE_PLAYER.SIZE_CHANGE,t)}function F(e,t){e.dispatch(B.Z.LIVE_PLAYER.MINI_PLAYER_OPEN,t)}function L(e,t){e.dispatch(B.Z.LIVE_PLAYER.MINI_PLAYER_CLOSED,t)}var V=n(45564),z=n(43516),U=n(1967),G=n(11342),H=n(92777),q=n(82262),W=n(81531),Y=n(63553),K=n(37247),Q=n(95053),$=n(41239),X=n(95453),J=n(43098),ee=n(85893);function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,K.Z)(e);if(t){var a=(0,K.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,Y.Z)(this,n)}}var ne=function(e){(0,W.Z)(n,e);var t=te(n);function n(e){var i;return(0,H.Z)(this,n),(i=t.call(this,e)).state={playing:e.autoPlay},i}return(0,q.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!e.stream&&this.props.stream||e.stream&&!this.props.stream||e.stream.get("streamName")!==this.props.stream.get("streamName")||this.state.playing!==t.playing}},{key:"enablePlay",value:function(){this.setState({playing:!0})}},{key:"disablePlay",value:function(){this.setState({playing:!1})}},{key:"buildEmbed",value:function(){var e=this.props.stream.get("streamName");switch(this.props.stream.get("streamSource")){case Q.Z.TWITCH:return(0,ee.jsx)("iframe",{title:"streamPlayer",src:G.Z.getTwitchEmbedUrl(e),height:"100%",width:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0});case Q.Z.SMASHCAST:return(0,ee.jsx)("iframe",{title:"streamPlayer",width:"100%",height:"100%",src:G.Z.getSmashCastEmbedUrl(e),frameBorder:"0",allowFullScreen:!0});case Q.Z.STREAMME:return(0,ee.jsx)("iframe",{title:"streamPlayer",src:G.Z.getStreamMeEmbedUrl(e),height:"100%",width:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0});case Q.Z.MIXER:return(0,ee.jsx)("iframe",{title:"streamPlayer",src:G.Z.getMixerEmbedUrl(e),height:"100%",width:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0});default:return(0,ee.jsx)("div",{})}}},{key:"render",value:function(){var e=this.props.stream.get("streamName"),t=this.props.stream.get("streamSource"),n=this.buildEmbed();return(0,ee.jsx)(J.I.Consumer,{children:function(i){var a=i.groups;return(void 0===a?[]:a).includes(X.w.THIRD_PARTY_ANALYTICS)?(0,ee.jsx)("div",{className:"VideoPlayer__videoEmbed",children:n}):(0,ee.jsx)($.Z,{url:t===Q.Z.TWITCH&&G.Z.getTwitchEmbedUrl(e)})}})}}]),n}(s.Component);ne.defaultProps={stream:!1,autoPlay:!1};var ie=ne,ae=n(96908),re=n(49929),se={BRACKET:1,POOLS:2,EXHIBITION:3,getName:function(e){var t;switch(e){case se.BRACKET:t="Bracket";break;case se.POOLS:t="Pools";break;case se.EXHIBITION:t="Exhibition"}return t}},oe=se,le=n(34141),ce=n(83871),de=n(36139),ue=n(46288),me=n(34202),pe=n(74524),he=n(41074),ve=c()({displayName:"StreamMatchSet",getDefaultProps:function(){return{expanded:!1}},getInitialState:function(){return{liveStreams:h().Map()}},componentWillReceiveProps:function(e){if(this.props.loading&&!e.loading){"function"===typeof this.props.onLoad&&this.props.onLoad(e.sets);var t=e.stations.filter((function(e){return e.get("isOnline")}));this.setState({liveStreams:t})}},tweetClicked:function(e,t){t.stopPropagation(),t.preventDefault();var n=this.props.translate,i="https://twitter.com/share",a=new k.Z(this.props.tournament),r=this.props.sets.get(e),s=new U.Z(r),o=this.props.phaseGroups.get(r.get("phaseGroupId")),l=this.props.phases.get(o.get("phaseId")),c=oe.getName(l.get("typeId")),d=o.get("displayIdentifier"),u=this.props.entrants.get(s.getEntrantId(1)),m=this.props.entrants.get(s.getEntrantId(2)),p=D.Z.where(this.props.players,{id:u.get("playerIds").toArray()}),h=D.Z.where(this.props.players,{id:m.get("playerIds").toArray()}),v=ue.Z.getTwitterNames(p),g=ue.Z.getTwitterNames(h),f="",y=this.props.tournament.get("hashtag");f="".concat(c," ").concat(d," - ").concat(s.getRoundText(),"\n"),f+="".concat(v," vs ").concat(g),y&&(y="#"===y.substring(0,1)?y:"#".concat(y),f+="\n".concat(y)),i=ce.Z.addToUrl(i,{url:a.getShortUrl("https://www.start.gg/"),via:"startgg",text:"".concat(f,"\n")});var S=n("Common.share",{service:n("Services.Twitter")});window.open(i,S,"height=420,width=625")},renderPlayerData:function(e,t){var n=this.props.entrants.get(e),i=n?new de.Z(n):null;return i?i.renderPlayerData(this.props.players,t,this.props.participants):{prefix:null,gamerTag:t}},renderSet:function(e){var t,n,i,a,r=this.props.translate,s=this.props.phaseGroups.get(e.get("phaseGroupId")),o=this.props.phases.get(s.get("phaseId")),l=e.get("entrant1Score")||0,c=e.get("entrant2Score")||0,u=l>c,p=l===c,h=m()("MatchRecap__score",p?null:{"MatchRecap__score--winner":u,"MatchRecap__score--loser":!u}),v=m()("MatchRecap__score",p?null:{"MatchRecap__score--winner":!u,"MatchRecap__score--loser":u}),g=!p&&u?(0,ee.jsx)("div",{className:"MatchRecap__arrow MatchRecap__arrow--left"}):null,f=p||u?null:(0,ee.jsx)("div",{className:"MatchRecap__arrow MatchRecap__arrow--left"}),k=this.renderPlayerData(e.get("entrant1Id"),e.get("entrant1PrereqStr")),y=this.renderPlayerData(e.get("entrant2Id"),e.get("entrant2PrereqStr")),S=(this.props.stations.get(e.get("stationId")),this.props.streams.get(e.get("streamId"))),b=e.get("streamId")&&e.get("streamId").toString(),I=S?(0,ee.jsx)("a",{href:"http://www.twitch.tv/".concat(S.get("streamName")),className:"MatchRecap__action SocialIcon SocialIcon--twitch"}):null,N=e.get("state")===ae.Z.ACTIVE,P=this.props.activeStreams.has(b),x=this.state.liveStreams.has(b);n=m()({MatchRecap:!0,"MatchRecap--active":this.props.allowActive&&P&&(this.props.streams.size>1||N),"MatchRecap--empty":!(N||x),pointer:!0});var j=this.props.events.get(e.get("eventId"));t=new me.Z(j).getTabUrl("brackets",[o.get("id"),s.get("id")]),N&&(i=(0,ee.jsx)("div",{className:"MatchRecap__row",children:(0,ee.jsx)("div",{className:"MatchRecap__subtitle",children:(0,ee.jsx)(le.Z,{startTime:e.get("startedAt")})})})),x&&(a=(0,ee.jsx)("div",{className:"MatchRecap__row",children:(0,ee.jsx)("div",{className:"MatchRecap__stream",children:(0,ee.jsxs)("a",{children:[(0,ee.jsx)("span",{className:"fa fa-youtube-play"})," ",r("LivePlayer.states.live")]})})}));var C=(0,ee.jsx)("div",{className:n,children:(0,ee.jsxs)("div",{className:"MatchRecap__container",children:[(0,ee.jsxs)("div",{className:"MatchRecap__players",children:[(0,ee.jsx)("div",{className:"MatchRecap__row",children:(0,ee.jsxs)("div",{className:"Player Player--horizontal",children:[k.profilePic,(0,ee.jsxs)("div",{className:"PlayerTag",children:[(0,ee.jsx)("span",{className:"Player__prefix",children:k.prefix}),(0,ee.jsx)("span",{className:"Player__gamertag",children:k.gamerTag})]})]})}),(0,ee.jsx)("div",{className:"MatchRecap__row",children:(0,ee.jsxs)("div",{className:"Player Player--horizontal",children:[y.profilePic,(0,ee.jsxs)("div",{className:"PlayerTag",children:[(0,ee.jsx)("span",{className:"Player__prefix",children:y.prefix}),(0,ee.jsx)("span",{className:"Player__gamertag",children:y.gamerTag})]})]})})]}),(0,ee.jsxs)("div",{className:"MatchRecap__scores",children:[(0,ee.jsxs)("div",{className:"MatchRecap__row",children:[(0,ee.jsx)("div",{className:h,children:l}),g]}),(0,ee.jsxs)("div",{className:"MatchRecap__row",children:[(0,ee.jsx)("div",{className:v,children:c}),f]})]}),(0,ee.jsxs)("div",{className:"MatchRecap__recap",children:[i,a]}),(0,ee.jsxs)("div",{className:"MatchRecap__actions",children:[(0,ee.jsx)("div",{className:"MatchRecap__row",children:(0,ee.jsx)("a",{href:t,className:"MatchRecap__option MatchRecap__option--bracket",children:(0,ee.jsx)("span",{className:"fa fa-link"})})}),(0,ee.jsx)("div",{className:"MatchRecap__row",children:(0,ee.jsxs)("div",{className:"SocialList",children:[(0,ee.jsx)("a",{href:"#",onClick:(0,d.partial)(this.tweetClicked,e.get("id")),className:"MatchRecap__action SocialIcon SocialIcon--twitter"}),I]})})]})]})},"set-".concat(e.get("id")));return(0,ee.jsx)(pe.Z,{onClick:(0,d.partial)(this.props.onMatchClick,e.get("streamId")),trackingData:{subViewKey:"streamMatchSet"},children:C})},render:function(){if(this.props.set)return this.renderSet(this.props.set)}}),ge=(0,o.qC)((0,he.Z)(),v.Z)(ve);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=c()({displayName:"StreamMatchQueue",getDefaultProps:function(){return{expanded:!1}},getInitialState:function(){return{liveStreams:h().Map()}},sortByBroadcast:function(e,t){var n=this.props.stations.get(e.get("streamId").toString())||h().Map(),i=this.props.stations.get(t.get("streamId").toString())||h().Map(),a=this.props.liveStreams.has(e.get("streamId").toString()),r=this.props.liveStreams.has(t.get("streamId").toString()),s=n.get("streamType")===re.Z.BROADCASTER,o=i.get("streamType")===re.Z.BROADCASTER;return 0===n.size?1:0===i.size||s&&a?-1:o&&r?1:a?-1:r?1:s?-1:o?1:0},buildSetList:function(){var e,t,n,i=this,a=this.props.translate,r=this.props.sets.toList().sort((function(e,t){var n=i.props.setPositions.get(e.get("id")),a=i.props.setPositions.get(t.get("id"));return n===a?t.get("state")-e.get("state"):n-a})).groupBy((function(e){return e.get("state")})),s=r.get(ae.Z.CREATED)||h().Map(),o=r.get(ae.Z.ACTIVE)||h().Map(),l=r.get(ae.Z.COMPLETED)||h().Map();return s=s.sort(this.sortByBroadcast,this).map(this.renderSet,this),o=o.sort(this.sortByBroadcast,this).map(this.renderSet,this),l=l.sort(this.sortByBroadcast,this).map(this.renderSet,this),s.size&&(e=(0,ee.jsxs)("div",{className:"MatchCategory",children:[(0,ee.jsx)("div",{className:"MatchCategory__title",children:a("LivePlayer.states.upcoming")}),s]})),o.size&&(t=(0,ee.jsxs)("div",{className:"MatchCategory",children:[(0,ee.jsx)("div",{className:"MatchCategory__title",children:a("LivePlayer.states.active")}),o]})),l.size&&(n=(0,ee.jsxs)("div",{className:"MatchCategory",children:[(0,ee.jsx)("div",{className:"MatchCategory__title",children:a("LivePlayer.states.completed")}),l]})),(0,ee.jsxs)("div",{children:[t,n,e]})},renderSet:function(e){return(0,s.createElement)(ge,ke(ke({},this.props),{},{set:e,allowActive:!0,onMatchClick:this.props.onMatchClick,tournament:this.props.tournament,activeStreams:this.props.activeStreams,key:"stream-match-set-".concat(e&&e.get("id"))}))},render:function(){var e,t,n=this.props.translate;return e=this.props.sets&&this.props.sets.size?this.buildSetList():this.props.loading?(0,ee.jsx)("div",{className:"empty-state-container text-center center-block",children:(0,ee.jsxs)("p",{className:"empty-state-header text-lg",children:[(0,ee.jsx)("span",{className:"fa fa-refresh fa-spin"})," ",n("LivePlayer.matchStates.loading")]})}):(0,ee.jsx)("div",{className:"empty-state-container text-center center-block",children:(0,ee.jsx)("p",{className:"empty-state-header text-lg",children:n("LivePlayer.matchStates.empty")})}),t=m()({"live-details-expanded":this.props.expanded}),(0,ee.jsx)("div",{className:t,children:e})}}),Se=(0,o.qC)((0,he.Z)(),v.Z)(ye);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=c()({displayName:"StreamQueue",getDefaultProps:function(){return{expanded:!1}},getInitialState:function(){return{liveStreams:h().Map()}},sortByBroadcast:function(e,t){var n=e.get("streamId"),i=t.get("streamId"),a=this.props.stations.get(n&&n.toString())||h().Map(),r=this.props.stations.get(i&&i.toString())||h().Map(),s=this.props.liveStreams.has(n&&n.toString()),o=this.props.liveStreams.has(i&&i.toString()),l=a.get("streamType")===re.Z.BROADCASTER,c=r.get("streamType")===re.Z.BROADCASTER,d=0;return l&&s?d=-1:c&&o?d=1:l?d=-1:c?d=1:s?d=-1:o||0===a.size?d=1:0===r.size&&(d=-1),d},getSetsWithPlaceholders:function(){var e=this.props.sets,t=(e=e?e.toList():null)?e.groupBy((function(e){return e.get("streamId")})):null;return e&&e.size&&t.size?(this.props.streams.forEach((function(n){if(!t.get(n.get("id"))){var i=h().Map({id:"temp-".concat(n.get("id")),streamId:n.get("id"),state:ae.Z.COMPLETED});e=e.push(i)}})),e):e},dedupeSetList:function(e){return e=e.sortBy((function(e){return e.get("state")===ae.Z.ACTIVE?1:0})),e=D.Z.indexBy(e,"streamId").toList()},sortSetList:function(e){var t=this;return e=e.sort((function(e,n){var i=t.props.setPositions.get(e.get("id")),a=t.props.setPositions.get(n.get("id"));return i===a?n.get("state")-e.get("state"):i-a}))},buildSetSection:function(e){var t={};var n,i,a=e&&e.groupBy((function(e){var n=e&&e.get("streamId"),i=this.props.liveStreams.has(n&&n.toString());return t[n]=n,i?"online":"offline"}),this),r=a&&a.get("online"),s=a&&a.get("offline");return r=r&&r.sort(this.sortByBroadcast,this),s=s&&s.sort(this.sortByBroadcast,this),r&&r.size&&(n=r.map(this.renderSet,this).toArray()),s&&s.size&&(i=s.map(this.renderSet,this).toArray()),{online:n,offline:i,usedStreamIds:t}},buildStreamList:function(e){var t=this.props.streams.filter((function(t){return!e[t.get("id").toString()]})).groupBy((function(e){return e.get("isOnline")?"online":"offline"}),this),n=t.get("online")||h().Map(),i=t.get("offline")||h().Map();return{online:n.map(this.renderStream,this).toArray(),offline:i.map(this.renderStream,this).toArray()}},buildSetList:function(){var e=this.sortSetList(this.dedupeSetList(this.getSetsWithPlaceholders())).groupBy((function(e){return e.get("state")})),t=e.get(ae.Z.CREATED),n=e.get(ae.Z.ACTIVE),i=e.get(ae.Z.COMPLETED),a=this.buildSetSection(t),r=this.buildSetSection(n),s=this.buildSetSection(i),o=(0,d.extend)({},a.usedStreamIds,r.usedStreamIds,s.usedStreamIds),l=this.buildStreamList(o);return(0,ee.jsxs)("div",{children:[r.online,a.online,r.offline,a.offline,s.online,s.offline,l.online,l.offline]})},renderStream:function(e){var t,n=this.props.translate,i=this.props.activeStreams.has(e.get("id")),a=this.props.liveStreams.get(e.get("id")),r=n("LivePlayer.states.offline"),s=e&&e.get("streamName"),o=null,l=null;a&&(a.get("isOnline")&&(r=n("LivePlayer.states.online"),s=a.get("streamGame")?n("LivePlayer.states.streaming",{streamName:e.get("streamName"),streamGame:a.get("streamGame")}):s),(o=a.get("streamLogo"))&&(l=(0,ee.jsx)("div",{className:"PlayerStream__snapshot",children:(0,ee.jsx)("img",{src:o,alt:""})})));return t=m()({PlayerStream:!0,"PlayerStream--active":i&&this.props.streams.size>1,pointer:!0}),this.renderRowDOM(e.get("id"),t,e.get("id"),r,s,l,null)},renderSet:function(e){var t=this.props,n=t.activeStreams,i=t.liveStreams,a=t.stations,r=t.translate,s=a.get(e.get("streamId")),o=e.get("streamId")&&e.get("streamId").toString(),l=e.get("state")===ae.Z.ACTIVE,c=n.has(o),d=i.get(o),u=r("LivePlayer.states.offline"),p=s&&s.get("streamName"),h=null,v=null,g=null;d&&(d.get("isOnline")&&(u=r("LivePlayer.states.online"),p=d.get("streamGame")?r("LivePlayer.states.streaming",{streamName:s.get("streamName"),streamGame:d.get("streamGame")}):p),(h=d.get("streamLogo"))&&(g=(0,ee.jsx)("div",{className:"PlayerStream__snapshot",children:(0,ee.jsx)("img",{src:h,alt:""})})));var f=m()({PlayerStream:!0,"PlayerStream--active":c&&(this.props.streams.size>1||l),pointer:!0});return l&&(v=(0,ee.jsx)(ge,Ie(Ie({},this.props),{},{set:e,allowActive:!1,onMatchClick:this.props.onMatchClick,tournament:this.props.tournament,activeStreams:this.props.activeStreams}))),this.renderRowDOM(o,f,e.get("id"),u,p,g,v)},renderRowDOM:function(e,t,n,i,a,r,s){return(0,ee.jsxs)("div",{onClick:(0,d.partial)(this.props.onMatchClick,e),className:t,children:[(0,ee.jsxs)("div",{className:"PlayerStream__container",children:[(0,ee.jsxs)("div",{className:"PlayerStream__information",children:[(0,ee.jsx)("div",{className:"PlayerStream__title",children:i}),(0,ee.jsx)("div",{className:"PlayerStream__subtitle",children:a})]}),r]}),s]},"set-".concat(n))},render:function(){var e,t,n=this.props,i=n.streams,a=n.loading,r=n.expanded,s=n.translate;return e=i&&i.size?this.buildSetList():a?(0,ee.jsx)("div",{className:"empty-state-container text-center center-block",children:(0,ee.jsxs)("p",{className:"empty-state-header text-lg",children:[(0,ee.jsx)("span",{className:"fa fa-refresh fa-spin"})," ",s("LivePlayer.streamStates.loading")]})}):(0,ee.jsx)("div",{className:"empty-state-container text-center center-block",children:(0,ee.jsx)("p",{className:"empty-state-header text-lg",children:s("LivePlayer.streamStates.empty")})}),t=m()({"live-details-expanded":r}),(0,ee.jsx)("div",{className:t,children:e})}}),Pe=(0,he.Z)()(Ne),xe=(0,v.Z)(Pe),je=n(85646),Ce=n(83461),Te={_defaultName:"field1",setActiveSideBarTab:function(e){return"".concat(e,"Tab")||0},toggleTheatre:function(e){return e?"showTheatre":"hideTheatre"},toggleSideBar:function(e){return e?"showSideBar":"hideSideBar"},streamMatchSet:"streamMatchSet",streamPreview:"streamPreview",viewBrackets:"viewBrackets",expandPlayer:"expandPlayer",hidePlayer:"hidePlayer"};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee={id:"streamQueue"},Oe=c()({displayName:"LivePlayer",mixins:[je.OnScroll],getDefaultProps:function(){return{layouts:h().fromJS({normal:{key:"normal",icon:["fa-square-o"]},fullscreen:{key:"fullscreen",icon:["fa-arrows-alt"],fullscreen:!0},columns:{key:"columns",icon:["fa-columns","fa-rotate-180"],multi:!0,fullscreen:!0},rows:{key:"rows",icon:["fa-columns","fa-rotate-90"],multi:!0,fullscreen:!0}}),miniPlayerWidth:300,miniPlayerHeight:170,miniPlayerMarginLeft:100,miniPlayerMarginTop:10}},getInitialState:function(){var e=!1;window&&window.location.search&&(_.decode(window.location.search.substring(1)).autoplay&&(e=!0,this.props.shouldInitUIStore()));return{layout:"normal",invisible:this.props.invisible,liveStreams:this.props.streams,activeStreams:h().Map(),activeDetailTab:Ee.id,detailsExpanded:!1,haveStreamSets:!0,activeSideBarTab:"streams",showSideBar:!0,wasClosed:!1,animating:!1,theatre:!1,mini:!1,expanded:e}},componentWillReceiveProps:function(e){var t={},n=!1,i=!1;if(this.props.linksToEventsPage!==e.linksToEventsPage&&this.props.linksToEventsPage&&!e.linksToEventsPage&&(n=!0),this.props.invisible!==e.invisible&&(t.invisible=e.invisible,this.props.invisible&&!e.invisible&&(n=!0),!this.props.invisible&&e.invisible&&this.state.expanded&&!this.state.mini&&(i=!0)),this.props.loading&&!e.loading){this.streamQueueLoaded(e.sets);var a=e.stations.filter((function(e){return e.get("isOnline")}));t.liveStreams=a}i&&this.enforceMiniPlayer(),this.setState(t,(function(){n&&this.onScroll()}))},componentDidUpdate:function(e,t){!t.expanded&&this.state.expanded&&this.props.shouldInitUIStore()},resetElement:function(){var e=this.videoElement;e.style.position="",e.style.left="",e.style.top="",e.style.transition="",e.style.transform="",e.style["transform-origin"]=""},positionElement:function(e,t,n,i,a){var r=this.videoElement;a?(t=-(window.scrollY-t),r.style.position="fixed"):r.style.position="absolute",r.style.left="".concat(e,"px"),r.style.top="".concat(t,"px"),r.style.width="".concat(n,"px"),r.style.height="".concat(i,"px")},transformElement:function(e,t,n,i){var a=this.videoElement;a.style.transition="transform 0.5s ease-out",a.style["transform-origin"]="0px 0px",a.style.transform="scaleX(".concat(e,") scaleY(").concat(t,") ")+"translateX(".concat(n,"px) translateY(").concat(i,"px)")},onTransitionEnd:function(e){e.target===this.videoElement&&"transform"===e.propertyName&&(this.state.mini?(this.videoElement.style.width="",this.videoElement.style.height="",this.setState({mini:!1,animating:!1},this.resetElement)):this.enforceMiniPlayer())},enforceMiniPlayer:function(){this.videoElement.style.width="".concat(this.props.miniPlayerWidth,"px"),this.videoElement.style.height="".concat(this.props.miniPlayerHeight,"px"),this.setState({mini:!0,animating:!1},this.resetElement)},enableMiniPlayer:function(){var e,t,n,i,a=this.videoElement,r=a.getBoundingClientRect();this.positionElement(r.left,r.top,a.offsetWidth,a.offsetHeight,!0),e=this.props.miniPlayerWidth/a.offsetWidth,t=this.props.miniPlayerHeight/a.offsetHeight,n=1/e*(window.innerWidth-this.props.miniPlayerWidth-this.props.miniPlayerMarginLeft-r.left),i=1/t*(window.scrollY-r.top+(window.innerHeight-this.props.miniPlayerHeight-this.props.miniPlayerMarginTop)),this.transformElement(e,t,n,i),this.setState({animating:!0}),this.props.executeAction(F)},disableMiniPlayer:function(){var e,t,n,i,a,r=this.videoElement,s=r.getBoundingClientRect(),o=this.videoContainer,l=o.getBoundingClientRect();a=this.sidebarElement;var c=s.left-l.left,d=s.top-l.top;this.positionElement(c,d,r.offsetWidth,r.offsetHeight,!1),e=(o.offserWidth-a.offsetWidth)/this.props.miniPlayerWidth,t=o.offsetHeight/this.props.miniPlayerHeight,n=(s.left-l.left)/e*-1,i=(s.top-l.top)/t*-1,this.transformElement(e,t,n,i),this.setState({animating:!0}),this.props.executeAction(L)},onScroll:function(){var e=this.mainContainer,t=e&&e.offsetHeight;!t||!this.state.expanded||this.state.animating||this.state.theatre||this.state.invisble||(window.scrollY>t&&!this.state.mini&&!this.state.wasClosed?this.enableMiniPlayer():window.scrollY<t&&(this.state.mini?this.disableMiniPlayer():this.setState({wasClosed:!1})))},toggleStream:function(e){var t=this.state.activeStreams;this.state.activeStreams.get(e)&&this.state.activeStreams.size>1?t=t.delete(e.toString()):(this.props.layouts.get(this.state.layout).get("multi")||(t=h().Map()),this.props.streams.get(e)&&(t=t.set(e.toString(),this.props.streams.get(e))));this.setState({activeStreams:t,expanded:!0})},toggleChat:function(e){this.setState({chat:e})},scrollUp:function(){window.scrollTo(0,0)},changeDetailsTab:function(e){this.setState({activeDetailTab:e})},viewMoreClicked:function(){this.setState({detailsExpanded:!this.state.detailsExpanded}),"function"===typeof this.props.updateAffix&&this.props.updateAffix()},collapseSection:function(){this.setState({detailsExpanded:!1})},streamQueueLoaded:function(e){if("function"===typeof this.props.updateAffix&&this.props.updateAffix(),!this.state.haveStreamSets||e&&e.size?!this.state.haveStreamSets&&e&&e.size&&this.setState({haveStreamSets:!0}):this.setState({haveStreamSets:!1}),this.state.expanded&&!(this.state.activeStreams&&this.state.activeStreams.size>0))if(e&&e.size){var t=e.first();this.toggleStream(t.get("streamId"))}else if(this.props.streams.size){var n=this.props.streams.first();this.toggleStream(n.get("id"))}},viewBrackets:function(){var e=new k.Z(this.props.tournament);this.props.executeAction(M.Z,{url:e.getTabUrl("events")})},sizeChange:function(){var e=this.state.expanded,t=this.mainContainer,n=t&&t.offsetHeight+1;n&&(e&&!this.state.invisible||(n=0),this.props.executeAction(R,{size:n}))},expandPlayer:function(){this.setState({expanded:!0},this.sizeChange)},hidePlayer:function(){this.setState({expanded:!1},this.sizeChange)},setActiveSideBarTab:function(e){this.setState({activeSideBarTab:e,showSideBar:!0})},toggleSideBar:function(){this.setState({showSideBar:!this.state.showSideBar})},toggleTheatre:function(){this.state.theatre||(this.videoElement.style.width="",this.videoElement.style.height="",this.scrollUp()),this.setState({theatre:!this.state.theatre,mini:!1})},closeMiniPlayer:function(){this.videoElement.style.width="",this.videoElement.style.height="",this.setState({mini:!1,wasClosed:!0},this.resetElement),this.props.executeAction(L)},hasActiveStation:function(e){var t=this.props.stations.get(e.get("stationId"));return e.get("state")===ae.Z.ACTIVE&&t},renderChats:function(){return this.state.activeStreams.sort((function(e,t){return e.get("id")>t.get("id")})).map((function(e){var t=new G.Z(e);return(0,ee.jsx)("iframe",{frameBorder:"0",scrolling:"no",id:"chat_embed",title:"chat_embed",src:t.getChatUrl(),height:"100%",width:"100%"},"chat-".concat(e.get("id")))}),this).toArray()},renderStreamPreviews:function(){var e=m()({VideoPlayer__preview:!0}),t=this.props.streams.filter((function(e){return e.get("isOnline")})).sort((function(e,t){return e.get("id")>t.get("id")})).slice(0,2).map((function(e){var t=new G.Z(e).getPreviewData();return(0,ee.jsx)(pe.Z,{onClick:(0,d.partial)(this.toggleStream,e.get("id")),trackingData:{converter:{inName:"streamPreview"}},children:(0,ee.jsx)("a",{className:t.classNames,style:t.inlineStyle})},"preview-".concat(e.get("id")))}),this).toArray();return(0,ee.jsx)("div",{className:e,children:t})},renderStreams:function(){return this.state.activeStreams.sort((function(e,t){return e.get("id")>t.get("id")})).map((function(e){return(0,ee.jsx)(ie,{stream:e,autoPlay:!0},"stream-".concat(e.get("id")))}),this)},renderStation:function(e){return this.props.stations.get(e.get("stationId")).get("streamName")},renderStationsString:function(){var e=this.props.sets.filter(this.hasActiveStation);return e=(e=D.Z.indexBy(e,"stationId")).map(this.renderStation).toArray()},renderHeader:function(){var e=this.props.translate,t=this.renderStationsString(),n=[];t&&t.length&&(n=t.splice(0,2),t=t.length?e("LivePlayer.preview.subtitle_more",{players:n.join(e("Common.commaJoiner")),total:t.length}):e("LivePlayer.preview.subtitle",{players:n.join(e("Common.commaJoiner"))}));var i=(0,ee.jsx)(A.Z,{label:e("LivePlayer.buttons.open"),onClick:this.expandPlayer,type:"inverted"});return(0,ee.jsxs)("div",{className:"VideoHeading",children:[(0,ee.jsx)("div",{className:"VideoHeading__title",children:e("LivePlayer.preview.title")}),(0,ee.jsx)("div",{children:i}),(0,ee.jsx)("div",{className:"VideoHeading__subtitle",children:t})]})},renderContent:function(){var e,t,n,i=this,a=this.props,r=a.tournament,s=a.translate,o=this.state.theatre?"fa fa-compress":"fa fa-expand",l="fa fa-caret-".concat(this.state.showSideBar?"right":"left"),c=this.renderStreams().toArray(),u=this.renderChats(),p="matches"===this.state.activeSideBarTab,h="chat"===this.state.activeSideBarTab,v="streams"===this.state.activeSideBarTab,g=this.state.showSideBar,f=m()({VideoPlayer__sidebar:!0,"VideoPlayer__sidebar--dark":!0,"VideoPlayer__sidebar--condensed":!g}),k=m()({active:g&&v}),y=m()({active:g&&p}),S=m()({active:g&&h}),b=m()({VideoPlayer__tab:!0,"VideoPlayer__tab--active":g&&v}),I=m()({VideoPlayer__tab:!0,"VideoPlayer__tab--active":g&&p}),N=m()({VideoPlayer__tab:!0,"VideoPlayer__tab--active":g&&h}),P=(0,ee.jsx)(xe,Ze(Ze({},this.props),{},{liveStreams:this.state.liveStreams,expanded:this.state.detailsExpanded,activeStreams:this.state.activeStreams,onMatchClick:this.toggleStream})),x=(0,ee.jsx)(Ce.Z,{className:"VideoPlayer__scrollableWrapper",children:P}),j=(0,ee.jsx)(Se,Ze(Ze({},this.props),{},{liveStreams:this.state.liveStreams,expanded:this.state.detailsExpanded,activeStreams:this.state.activeStreams,onMatchClick:this.toggleStream})),C=(0,ee.jsx)(Ce.Z,{className:"VideoPlayer__scrollableWrapper",children:j});e=(0,ee.jsx)(J.I.Consumer,{children:function(e){var t=e.groups,n=(void 0===t?[]:t).includes(X.w.THIRD_PARTY_ANALYTICS);return(0,ee.jsxs)("div",{className:f,ref:function(e){i.sidebarElement=e},children:[(0,ee.jsx)("div",{className:"VideoPlayer__controls",children:(0,ee.jsx)(pe.Z,{onClick:i.toggleSideBar,trackingData:{converter:{inArg:!i.state.showSideBar}},children:(0,ee.jsx)("a",{className:"VideoPlayer__controlButton",children:(0,ee.jsx)("span",{className:l})})})}),(0,ee.jsxs)("div",{className:"Nav Nav--tabbed Nav--dark",children:[(0,ee.jsx)("li",{className:k,children:(0,ee.jsx)(pe.Z,{onClick:(0,d.partial)(i.setActiveSideBarTab,"streams"),trackingData:{converter:{inArg:"streams",inName:"setActiveSideBarTab"}},children:(0,ee.jsx)("a",{className:"fa fa-video-camera",alt:s("LivePlayer.tabs.streams",null,!0)})})}),(0,ee.jsx)("li",{className:y,children:(0,ee.jsx)(pe.Z,{onClick:(0,d.partial)(i.setActiveSideBarTab,"matches"),trackingData:{converter:{inArg:"matches",inName:"setActiveSideBarTab"}},children:(0,ee.jsx)("a",{className:"fa fa-trophy",alt:s("LivePlayer.tabs.matches",null,!0)})})}),n&&(0,ee.jsx)("li",{className:S,children:(0,ee.jsx)(pe.Z,{onClick:(0,d.partial)(i.setActiveSideBarTab,"chat"),trackingData:{converter:{inArg:"chat",inName:"setActiveSideBarTab"}},children:(0,ee.jsx)("a",{className:"fa fa-comment",alt:s("LivePlayer.tabs.chat",null,!0)})})}),(0,ee.jsx)("li",{className:"VideoPlayer__theatre",children:(0,ee.jsx)(pe.Z,{onClick:i.toggleTheatre,trackingData:{converter:{inArg:!i.state.theatre}},children:(0,ee.jsx)("a",{className:o,alt:s("LivePlayer.tabs.theatre",null,!0)})})})]}),(0,ee.jsxs)("div",{className:"VideoPlayer__tabs",children:[(0,ee.jsx)("div",{className:b,children:x}),(0,ee.jsx)("div",{className:I,children:C}),n&&(0,ee.jsx)("div",{className:N,children:(0,ee.jsx)("div",{className:"VideoPlayer__chatEmbed",children:u})})]}),(0,ee.jsx)(pe.Z,{onClick:i.hidePlayer,children:(0,ee.jsx)("div",{className:"VideoPlayer__close",children:(0,ee.jsx)("i",{className:"fa fa-close"})})})]})}}),this.state.mini&&(t=(0,ee.jsxs)("div",{className:"VideoPlayer__miniTitle",children:[(0,ee.jsx)(O.ZT,{variant:"h5",component:"h3",children:r.get("name")}),(0,ee.jsx)(pe.Z,{onClick:this.closeMiniPlayer,trackingData:{converter:{inName:"closeMiniPlayer"}},children:(0,ee.jsx)("a",{className:"fa fa-close"})})]}),n=(0,ee.jsxs)("div",{className:"VideoPlayer__miniControls",children:[(0,ee.jsx)(pe.Z,{onClick:this.scrollUp,trackingData:{converter:{inName:"scrollUp"}},children:(0,ee.jsx)("a",{className:"fa fa-arrow-up"})}),(0,ee.jsx)(pe.Z,{onClick:this.toggleTheatre,trackingData:{converter:{inArg:!this.state.theatre}},children:(0,ee.jsx)("a",{className:"fa fa-expand"})})]}));var T=m()("VideoPlayer__content",{"VideoPlayer--sidebarShowing":this.state.showSideBar});return(0,ee.jsxs)("div",{className:T,ref:function(e){i.videoContainer=e},children:[(0,ee.jsxs)("div",{className:"VideoPlayer__video",onTransitionEnd:this.onTransitionEnd,ref:function(e){i.videoElement=e},children:[t,c,n]}),e]})},render:function(){var e,t=this,n=this.props,i=n.tournament;n.translate;new k.Z(i).isInProgress()&&(e=this.renderStreamPreviews());var a=this.state.invisible,r=this.state.expanded||this.state.theatre?this.renderContent():null,s=m()("VideoPlayer",{"VideoPlayer--animating":this.state.animating,"VideoPlayer--mini":this.state.mini,"VideoPlayer--dark":!0,"VideoPlayer--preview":!this.state.expanded,"VideoPlayer--theatre":this.state.theatre,"VideoPlayer--invisible":a,"gg-background-color-gray_midnight":!0}),o="";this.state.expanded||(o=this.props.className);var l=m()(o,{"hidden-xs":!0}),c=this.state.expanded?null:this.renderHeader();return(0,ee.jsx)("div",{className:l,ref:function(e){t.mainContainer=e},children:(0,ee.jsxs)("div",{className:s,children:[c,e,r]})})}}),De={storeName:"StationQueueUIStore",updateInterval:5e4,shouldUpdate:function(e,t){var n=new k.Z(e.tournament);return t.expanded&&n.isInProgress(86400,86400)},getFetchParams:function(e){return{tournamentId:e.tournament.get("id")}},shouldReset:function(e,t){return(e&&e.tournament&&e.tournament.get("id"))!==(t&&t.tournament&&t.tournament.get("id"))}};Oe=(0,z.Z)(Oe,De),Oe=(0,V.Z)(Oe,{local:function(){return{converterConfig:Te,subView:"LivePlayer"}}}),Oe=(0,g.Z)(Oe,["StationQueueUIStore","StreamStore","SetStore","EntrantStore","PlayerStore","PhaseStore","PhaseGroupStore","ParticipantStore"],(function(e,t){var n=e.StationQueueUIStore.get("queues")||h().Map(),i=h().Map().asMutable(),a=h().Map(),r=h().Map(),s=h().Map(),o=h().Map(),l=[],c=h().Map().asMutable(),d=h().Map().asMutable(),u=h().Map(),m=[];if(n.size>0){a=a.asMutable(),r=r.asMutable(),n.forEach((function(t,n){a.set(n,e.StreamStore.get(n)),r.merge(e.SetStore.getByIds(t)),t.forEach((function(e,t){i.set(e,t)}))})),a=a.asImmutable(),r=r.asImmutable();var p=U.Z.getEntrantIds(r);s=e.EntrantStore.getByIds(p)}s.forEach((function(e){e.get("playerIds").forEach((function(e,t){l.push(e),m.push(t)}))})),o=e.PlayerStore.getByIds(l),u=e.ParticipantStore.getByIds(m),r.forEach((function(t){var n=t.get("phaseGroupId"),i=e.PhaseGroupStore.get(n),a=i.get("phaseId"),r=e.PhaseStore.get(a);d.set(n,i),c.set(a,r)}));var v=e.StreamStore.getAllInTournament(t.tournament.get("id"));return a=a.merge(v),{loading:e.StationQueueUIStore.isFetching(),stations:a,sets:r,streams:v,setPositions:i.asImmutable(),entrants:s,players:o,participants:u,queues:n,phases:c.asImmutable(),phaseGroups:d.asImmutable()}}));var _e=(0,o.qC)((0,he.Z)(),v.Z)(Oe),Me=n(61722),Ae=n(4899),Be=n(51938),Re=n(34174);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=function(e){var t=function(e){var t={};if(e.get("title")&&(t.title=e.get("title")),e.get("content")){var n=(0,ee.jsx)(Be.Z,{markdown:e.get("content")});t.content=(0,ee.jsx)("div",{children:n})}if(e.get("url")){var i=e.get("urlText")||e.get("url");t.action=(0,ee.jsx)(Re.rU,{url:e.get("url"),newTab:!0,children:(0,ee.jsx)(Re.zx,{label:i})})}return t}(e.tabInfo.config||h().Map());return(0,ee.jsx)(Z.Z,{size:"fluid",className:"page-section",children:(0,ee.jsx)(Re.fM,Le({isCentered:!0},t))})};function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,K.Z)(e);if(t){var a=(0,K.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,Y.Z)(this,n)}}var Ue=function(e){(0,W.Z)(n,e);var t=ze(n);function n(){return(0,H.Z)(this,n),t.apply(this,arguments)}return(0,q.Z)(n,[{key:"render",value:function(){var e=this.props.tournament.get("customMarkdown").get(this.props.tabInfo.slug),t=(0,ee.jsx)(Be.Z,{markdown:e});return(0,ee.jsx)("div",{className:"page-section page-section-grey page-section-sm",children:(0,ee.jsx)(Z.Z,{size:"fluid",children:t})})}}]),n}(s.Component),Ge=Ue;function He(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,K.Z)(e);if(t){var a=(0,K.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,Y.Z)(this,n)}}var qe=function(e){(0,W.Z)(n,e);var t=He(n);function n(e){var i;(0,H.Z)(this,n),i=t.call(this,e);var a=new k.Z(e.tournament).getTabConfig(e.tab),r="800",s="100%";return a&&(r=a.get("height"),s=a.get("width")),i.state={height:r,width:s},i}return(0,q.Z)(n,[{key:"render",value:function(){var e=new k.Z(this.props.tournament).getTabConfig(this.props.tab),t="";e&&(t=e.get("embedUrl"));var n=this.props.tournament.get("id");return 16628===n||15922===n?(0,ee.jsx)("div",{style:{textAlign:"center"},children:(0,ee.jsx)("img",{src:"https://i.imgur.com/GiM4mHp.jpg",alt:""})}):(0,ee.jsx)("div",{className:"",children:(0,ee.jsx)("iframe",{title:"embeddedFrame",id:"embeddedFrame",src:t,width:this.state.width,height:this.state.height,frameBorder:"0",marginHeight:"0",marginWidth:"0",children:"Loading..."})})}}]),n}(s.Component),We=n(88745),Ye=n(60926),Ke=n(17674),Qe=n(8129),$e=n(23147),Xe=n(12273),Je=n(14046),et=n(32741),tt=n(10748),nt=n(30381),it=n.n(nt);function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,K.Z)(e);if(t){var a=(0,K.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,Y.Z)(this,n)}}var ot=function(e,t){return function(n){return function(a){(0,W.Z)(s,a);var r=st(s);function s(t){var n;return(0,H.Z)(this,s),n=r.call(this,t),(0,i.Z)((0,tt.Z)(n),"scroll",(function(t){var n=it()(),i=e(t),a=i.map((function(e){return e.get("until")})).filter(nt.isMoment).findIndex((function(e){return e.isAfter(n)}));return a>-1?a:i.size-1})),(0,i.Z)((0,tt.Z)(n),"activePeriod",(function(){return e(n.props).get(n.state.position)})),(0,i.Z)((0,tt.Z)(n),"activeState",(function(){var e=n.activePeriod();return e&&e.get("state")})),(0,i.Z)((0,tt.Z)(n),"transitionTime",(function(){var e=n.activePeriod();return e&&e.get("until")})),(0,i.Z)((0,tt.Z)(n),"hasTransition",(function(){return!!n.transitionTime()})),(0,i.Z)((0,tt.Z)(n),"queueTransition",(function(){if(n.hasTransition()){clearTimeout(n.state.timeout);var e=it().duration(n.transitionTime().diff(it()())).asMilliseconds(),t=setTimeout((function(){n.setState({position:n.state.position+1},n.queueTransition)}),e);n.setState({timeout:t})}})),n.state={position:n.scroll(n.props),timeout:null},n}return(0,q.Z)(s,[{key:"componentDidMount",value:function(){this.queueTransition()}},{key:"componentWillReceiveProps",value:function(e){this.setState({position:this.scroll(e)},this.queueTransition)}},{key:"render",value:function(){return(0,ee.jsx)(n,rt(rt({},this.props),t(this.activeState())))}}]),s}(s.Component)}},lt=n(9174),ct=n(64344),dt=n(53213),ut=n(23080),mt=n(56213),pt=n(67219),ht=n(42876),vt=n(35021),gt=n(51886),ft=n(19237),kt=n(21362),yt=n.n(kt),St=function(e){var t=e.translate,n=e.link,i=e.event,a=e.currentUrl;return{bannerAnnouncement:t("PlayerCheckInBanner.checkIn.matchReady",{eventName:i.get("name")}),bannerState:"primary",bannerCTA:t("PlayerCheckInBanner.cta.matchReady"),bannerCTADisabled:!1,bannerCTALink:n,bannerCTAHidden:n===a,handleClick:d.noop,timerLegend:t("PlayerCheckInBanner.timer.legend")}},bt=function(e){return e===mt.Z.NONE||e===mt.Z.REQUIRED},It=function(e){return e.checkInState===mt.Z.CHECKED_IN},Nt=[{predicate:function(e){return e.isFinal},strategy:function(){return null},description:"you progressed or were eliminated from the bracket"},{predicate:function(e){return e.checkInState===mt.Z.MADE_IT},strategy:St,description:"bracket finalized and seed made it"},{predicate:function(e){return e.checkInState===mt.Z.MISSED_IT},strategy:function(e){var t=e.translate,n=e.event,i=e.checkInTimes,a=e.tournament,r=e.checkInFinalizeAction;return{bannerAnnouncement:t("PlayerCheckInBanner.checkIn.failure.individual",{eventName:n.get("name"),time:dt.Z.formatDate(i.endTime,{format:"h:mma",includeTimezone:!0,useLocal:n.get("isOnline"),timezone:a.get("timezone")}),date:dt.Z.formatDate(i.endTime,{format:"MMM Do, YYYY",includeTimezone:!1,useLocal:n.get("isOnline"),timezone:a.get("timezone")}),explanation:t(r?"PlayerCheckInBanner.checkIn.failure.explanations.".concat(r):"PlayerCheckInBanner.checkIn.failure.explanations.default")}),bannerState:"secondary",bannerCTA:t("PlayerCheckInBanner.cta.matchReady"),bannerCTADisabled:!0,bannerCTAHidden:!0,handleClick:d.noop,timerLegend:t("PlayerCheckInBanner.timer.legend")}},description:"bracket finalized and seed missed it"},{predicate:function(e){var t=e.phaseGroupState,n=e.phaseGroupCheckInState,i=t===ae.Z.ACTIVE,a=n===lt.Z.FINALIZED;return i&&!a},strategy:St,description:"event check in was canceled"},{predicate:function(e){var t=e.checkInState;return e.isTeamEvent&&It({checkInState:t})},strategy:function(e){var t=e.translate,n=e.event;return{bannerAnnouncement:t("PlayerCheckInBanner.checkIn.success.team",{pendingAction:e.phaseGroupCheckInState===lt.Z.CHECK_IN_ENDED?t("PlayerCheckInBanner.checkIn.success.pendingTO"):t("PlayerCheckInBanner.checkIn.success.pendingCheckInState"),eventName:n.get("name")}),bannerState:"secondary",bannerCTA:t("PlayerCheckInBanner.cta.success"),bannerCTADisabled:!0,handleClick:d.noop,timerLegend:t("PlayerCheckInBanner.timer.legend")}},description:"team is pending bracket finalization"},{predicate:It,strategy:function(e){var t=e.translate,n=e.event;return{bannerAnnouncement:t("PlayerCheckInBanner.checkIn.success.opener",{pendingAction:e.phaseGroupCheckInState===lt.Z.CHECK_IN_ENDED?t("PlayerCheckInBanner.checkIn.success.pendingTO"):t("PlayerCheckInBanner.checkIn.success.pendingCheckInState"),eventName:n.get("name")}),bannerState:"secondary",bannerCTA:t("PlayerCheckInBanner.cta.success"),bannerCTADisabled:!0,handleClick:d.noop,timerLegend:t("PlayerCheckInBanner.timer.legend")}},description:"participant is pending bracket finalization"},{predicate:function(e){var t=e.checkInState;return e.phaseGroupCheckInState===lt.Z.WAITING&&bt(t)},strategy:function(e){var t=e.translate,n=e.checkInTimes,i=e.event,a=e.tournament,r=e.checkInSeed;return{bannerAnnouncement:t("PlayerCheckInBanner.checkIn.waiting",{date:dt.Z.formatDate(n.startTime,{format:"MMM Do, YYYY",includeTimezone:!1,useLocal:i.get("isOnline"),timezone:a.get("timezone")}),start:dt.Z.formatDate(n.startTime,{format:"h:mma",includeTimezone:!1,useLocal:i.get("isOnline"),timezone:a.get("timezone")}),end:dt.Z.formatDate(n.endTime,{format:"h:mma",includeTimezone:!0,useLocal:i.get("isOnline"),timezone:a.get("timezone")}),eventName:i.get("name")}),bannerState:"secondary",bannerCTA:t("PlayerCheckInBanner.cta.open"),bannerCTADisabled:!0,handleClick:r,timerLegend:t("PlayerCheckInBanner.timer.legend")}},description:"waiting for check-in to open"},{predicate:function(e){var t=e.checkInState;return bt(t)},strategy:function(e){var t=e.translate,n=e.event,i=e.checkInSeed;return{bannerAnnouncement:t("PlayerCheckInBanner.checkIn.open",{eventName:n.get("name")}),bannerState:"primary",bannerCTA:t("PlayerCheckInBanner.cta.open"),bannerCTADisabled:!1,handleClick:i,timerLegend:t("PlayerCheckInBanner.timer.legend"),canCheckIn:!0}},description:"check-in is open"}],Pt=n(41640),xt=n(79845);function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CheckInFinalizedDialog"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"eventId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"event"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"eventId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"checkInFinalizedDialog"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"checkInFinalizedDialog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Event"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"overviewUrl"},name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tab"},value:{kind:"StringValue",value:"overview",block:!1}}],directives:[]}]}}],loc:{start:0,end:152,source:{body:'#import "./CheckInFinalizedDialog.fragment.gql"\n\nquery CheckInFinalizedDialog ($eventId: ID!) {\n\tevent (id: $eventId) {\n\t\t...checkInFinalizedDialog\n\t}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}}}};function wt(e){var t=e.eventId,n=e.event,i=(0,Pt.Z)(Tt,{variables:{eventId:t},skip:!!n}),a=i.loading,r=i.error,s=i.data,o=(0,xt.Z)().translate;if(a||r)return null;var l=n||s.event,c=[(0,ee.jsx)(O.zx,{label:o("PlayerCheckInBanner.cta.matchReady"),href:l.overviewUrl})];return(0,ee.jsx)($e.Vq,Ct(Ct({},e),{},{title:o("PlayerCheckInBanner.checkIn.matchReady",{eventName:l.name}),content:o("CheckInFinalizedDialog.description"),actions:c}))}wt.defaultProps={event:null};var Zt=wt;function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EntrantCheckInSeed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"entrantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entrant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"entrantId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gamerTag"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"playerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"registrationState"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"checkInSeed"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"checkInState"},directives:[]},{kind:"Field",name:{kind:"Name",value:"phaseGroup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkInState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkInFinalizeAction"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOnline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"firstRoundTime"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"overviewUrl"},name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tab"},value:{kind:"StringValue",value:"overview",block:!1}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"tournament"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tournamentType"},arguments:[],directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"checkInTimes"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"checkInState"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Seed"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkInState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkedInParticipants"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"checkInTimes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Event"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkInBuffer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkInDuration"},arguments:[],directives:[]}]}}],loc:{start:0,end:656,source:{body:'#import "app/components/event/PlayerCheckInBanner/checkInState.fragment.gql"\n#import "app/components/tournament/admin/event/EventCheckInConfig/checkInTimes.fragment.gql"\n\nquery EntrantCheckInSeed($entrantId: ID!) {\n\tentrant(id: $entrantId) {\n\t\tid\n\t\tparticipants {\n\t\t\tid\n\t\t\tgamerTag\n\t\t\tplayerId\n\t\t\tregistrationState\n\t\t}\n\t\tcheckInSeed {\n\t\t\t...checkInState\n\t\t\tphaseGroup {\n\t\t\t\tid\n\t\t\t\tstartAt\n\t\t\t\tstate\n\t\t\t\tcheckInState\n\t\t\t\tcheckInFinalizeAction\n\t\t\t}\n\t\t}\n\t\tevent {\n\t\t\tid\n\t\t\tname\n\t\t\tslug\n\t\t\ttype\n\t\t\tisOnline\n\t\t\tfirstRoundTime\n\t\t\toverviewUrl: url(tab: "overview")\n\n\t\t\ttournament {\n\t\t\t\tid\n\t\t\t\ttimezone\n\t\t\t\tslug\n\t\t\t\ttournamentType\n\t\t\t}\n\t\t\t...checkInTimes\n\t\t}\n\t}\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},_t={entrant:(0,p.Map)(),checkInSeed:d.noop,mutationState:{checkInSeed:{}}},Mt="playerCheckIn",At=function(e){var t,n,i,a=e.entrant,r=e.translate,o=e.mutationState,l=e.phaseGroupCheckInState,c=e.playerId,u=e.currentRoute,h=a&&a.get("checkInSeed"),v=h&&h.get("checkInState"),g=(0,ct.D9)(v),f=a&&a.get("event"),k=f&&f.get("overviewUrl"),y=u&&u.get("url"),S=(0,ct.Rh)(Zt),b=(0,Ke.Z)(S,2),I=b[0],N=b[1];(0,s.useEffect)((function(){g===mt.Z.CHECKED_IN&&v===mt.Z.MADE_IT&&y!==k&&N()}),[v]);var P=(0,s.useState)(!0),x=P[0],j=P[1];function C(){var e=a.get("participants");return e&&e.find((function(e){return e.get("playerId")===c}))}if(null!==(t=e.apollo)&&void 0!==t&&null!==(n=t.forOperation)&&void 0!==n&&null!==(i=n.call(t,Dt))&&void 0!==i&&i.loading)return null;if(!function(){if(!a)return!1;var e=h&&h.getIn(["phaseGroup","startAt"]),t=me.Z.getCheckInTimes(e,f&&f.get("checkInBuffer"),f&&f.get("checkInDuration")),n=h&&h.get("checkInState"),i=t&&dt.Z.isWithinXHours(t.startTime.unix(),24),r=C(),s=r&&r.get("registrationState")===E.Z.UNVERIFIED;return f&&h&&t&&n!==mt.Z.IGNORE&&i&&!s}())return null;var T,w,Z=ce.Z.deepGet(o,["checkInSeed","loading"]),D=h.getIn(["phaseGroup","startAt"]),_=h.getIn(["phaseGroup","state"]),M=h.get("isFinal"),A=me.Z.getCheckInTimes(D,f.get("checkInBuffer"),f.get("checkInDuration")),B=f.get("tournament"),R=f.get("type")===ut.Z.TEAMS,F=h.get("checkInState");l!==lt.Z.CHECK_IN_ENDED||Z||F!==mt.Z.NONE&&F!==mt.Z.REQUIRED||(T=mt.Z.MISSED_IT);var L=T||F,V=(function(){var e=a.getIn(["checkInSeed","checkedInParticipants"]),t=C();return!(!t||!e)&&e.get(t.get("id"))}()&&L!==mt.Z.CHECKED_IN&&mt.Z.MADE_IT,function(){var e=a.getIn(["checkInSeed","checkedInParticipants"])||(0,p.List)();e.filter((function(e){return e})).size,e.size}(),{checkInState:L,isTeamEvent:R,phaseGroupState:_,phaseGroupCheckInState:l,isFinal:M}),z=h.getIn(["phaseGroup","checkInFinalizeAction"]),U=function(e,t){var n=Nt.find((function(t){return t.predicate(e)}));if(n&&(0,d.isFunction)(n.strategy))return(0,n.strategy)(t)}(V,{checkInTimes:A,event:f,tournament:B,link:k,translate:r,checkInSeed:function(){return e.checkInSeed(h.get("id"))},checkInFinalizeAction:z,currentUrl:y,phaseGroupCheckInState:l});if(!U)return null;l===lt.Z.CHECK_IN_STARTED&&(w=(0,ee.jsxs)("div",{children:[(0,ee.jsx)("div",{className:yt().timerHeader,children:U.timerLegend}),(0,ee.jsx)(ht.Z,{startTime:A.startTime,endTime:A.endTime,className:"".concat(yt().timerContent," gg-color-white")})]}));var G=m()(yt().bannerCells,"gg-color-white");return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)("div",{className:" ",children:[(0,ee.jsx)(Re.jL,{type:U.bannerState,className:" ",children:(0,ee.jsxs)(Re.rj,{alignItems:"center",children:[(0,ee.jsxs)(Re.r8,{className:G,size:6,lgSize:8,children:[(0,ee.jsx)("div",{className:yt().announcement,children:U.bannerAnnouncement}),(0,ee.jsx)("div",{className:yt().timerContainer,children:w})]}),(0,ee.jsx)(Re.r8,{className:m()(G,"text-center"),xsHidden:!0,smHidden:!0,mdSize:2,lgSize:2,children:w}),(0,ee.jsx)(Re.r8,{className:m()(G,"text-right"),size:6,mdSize:4,lgSize:2,children:Bt(U,L,Z)})]})}),(0,ee.jsx)(vt.Z,{dismissible:!0,validationKey:Mt,clearErrorsOnMount:!x}),(0,ee.jsx)(Qe.iz,{})]}),(0,ee.jsx)(I,{eventId:f.get("id")}),(0,ee.jsx)($e.Vq,{open:x&&U.canCheckIn,onClose:function(){return j(!1)},title:U.bannerAnnouncement,content:(0,ee.jsxs)(Qe.Ki,{children:[(0,ee.jsx)(O.ZT,{children:r("PlayerCheckInBanner.checkIn.confirm")}),(0,ee.jsxs)(Qe.xu,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,ee.jsx)(O.ZT,{children:U.timerLegend}),(0,ee.jsx)(ht.Z,{startTime:A.startTime,endTime:A.endTime,className:yt().timerAlert})]}),Bt(U,L,Z,"primary"),(0,ee.jsx)(vt.Z,{dismissible:!0,validationKey:Mt,clearErrorsOnMount:!0})]})})]})};function Bt(e,t,n,i){var a=function(e){return{field1:"PlayerCheckInBar",field2:e,field3:"MainButton"}}(t),r={label:e.bannerCTA,type:i||"invertedOutline",onClick:e.bannerCTALink?null:e.handleClick,disabled:e.bannerCTADisabled||n,fullWidth:!0};if(!e.bannerCTAHidden)return e.bannerCTALink?(0,ee.jsx)(pt.Z,{url:e.bannerCTALink,trackingData:a,children:(0,ee.jsx)(O.zx,Ot({},r))}):(0,ee.jsx)(A.Z,Ot(Ot({},r),{},{trackingData:a}))}At.defaultProps=_t;var Rt=ot((function(e){var t=e.entrant,n=t&&t.get("event"),i=t&&t.get("checkInSeed"),a=i&&i.getIn(["phaseGroup","startAt"]),r=me.Z.getCheckInTimes(a,n&&n.get("checkInBuffer"),n&&n.get("checkInDuration"));if(!r)return(0,p.List)();var s=r.startTime,o=r.endTime;return(0,p.List)([(0,p.Map)({state:lt.Z.WAITING,until:s}),(0,p.Map)({state:lt.Z.CHECK_IN_STARTED,until:o}),(0,p.Map)({state:lt.Z.CHECK_IN_ENDED})])}),(function(e){return{phaseGroupCheckInState:e}}))(At),Ft=function(e){var t=(e.get("phaseGroup")||(0,p.Map)()).get("id");if(t)return ft.Z.makePhaseGroupFirebasePath(t)},Lt=(0,et.Z)(Rt,{getKeyMapping:function(e){var t={},n=e.entrant,i=n&&n.get("checkInSeed");if(i){var a=i.get("id");t[gt.Z.makeFirebasePath(a)]=!0;var r=Ft(i);r&&(t[r]=!0)}return t},shouldConnect:function(e){var t=e.entrant,n=t&&t.get("checkInSeed");return n&&n.get("id")},shouldReset:function(e,t){var n=e.entrant,i=t.entrant;return(n&&n.getIn(["checkInSeed","id"]))!==(i&&i.getIn(["checkInSeed","id"]))},transformer:function(e,t){var n=t.entrant,i=n&&n.get("checkInSeed");if(i){var a=i.get("id"),r=gt.Z.makeFirebasePath(a),s=e.get(r);s&&(s.checkInState=mt.Z.toName(s.checkInState),n=n.set("checkInSeed",i.merge(s)));var o=Ft(i),l=e.get(o),c=n.getIn(["checkInSeed","phaseGroup"])||(0,p.Map)();l&&(n=n.setIn(["checkInSeed","phaseGroup"],c.merge(l)))}return{entrant:n}}}),Vt=(0,o.qC)(Ye.Z,(0,Xe.Z)(Dt,{options:function(){return{fetchPolicy:"cache-and-network"}}}),(0,Xe.Z)({kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CheckInSeed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkInSeed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"checkInState"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"checkInState"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Seed"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkInState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkedInParticipants"},arguments:[],directives:[]}]}}],loc:{start:0,end:158,source:{body:'#import "app/components/event/PlayerCheckInBanner/checkInState.fragment.gql"\n\nmutation CheckInSeed($id: ID!) {\n\tcheckInSeed(id: $id) {\n\t\t...checkInState\n\t}\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},{props:function(e){var t=e.mutate;return{checkInSeed:function(e){return t({variables:{id:e,validationKey:Mt}})}}}}),(0,Je.Z)({name:"checkInSeed"}))(Lt),zt=(0,he.Z)()(Vt),Ut=n(9398),Gt=n(509),Ht=n(24129),qt=n.n(Ht);function Wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,K.Z)(e);if(t){var a=(0,K.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,Y.Z)(this,n)}}var Yt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PlayerBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tournamentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"upcomingEvents"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"tournamentId"},value:{kind:"Variable",name:{kind:"Name",value:"tournamentId"}}},{kind:"Argument",name:{kind:"Name",value:"userIsOwner"},value:{kind:"BooleanValue",value:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"playerBannerComponent"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"playerBannerComponent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Event"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCompleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOnline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRace"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userNextMatchTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bracketsPublished"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"overviewUrl"},name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tab"},value:{kind:"StringValue",value:"overview",block:!1}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"tournament"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:237,source:{body:'#import "app/components/event/PlayerBanner/playerBannerComponent.fragment.gql"\n\nquery PlayerBanner($tournamentId: ID!) {\n\tupcomingEvents(\n\t\tlimit: 1\n\t\ttournamentId: $tournamentId\n\t\tuserIsOwner: false\n\t) {\n\t\t...playerBannerComponent\n\t}\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},Kt="MMMM D, YYYY",Qt=function(e){(0,W.Z)(n,e);var t=Wt(n);function n(){var e;(0,H.Z)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,i.Z)((0,tt.Z)(e),"getTimezone",(function(e){var t=it().tz.guess();return e.get("isOnline")?t:e.getIn(["tournament","timezone"],t)})),(0,i.Z)((0,tt.Z)(e),"renderMessage",(function(t){var n=e.props.translate,i=t.get("name"),a=e.getTimezone(t),r=t.get("isOnline"),s=t.get("bracketsPublished"),o=t.get("userNextMatchTime"),l=t.get("startAt"),c=null;if(s)if(o){c=n("PlayerBanner.message.matchTimeKnown",{eventName:i,time:dt.Z.formatDate(o,{includeTimezone:!0,useLocal:r,timezone:a})})}else{c=n("PlayerBanner.message.matchTimeUnknown",{eventName:i,time:dt.Z.formatDate(l,{format:Kt})})}else c=n(o?"PlayerBanner.message.unpublishedBracketsMatchKnown":"PlayerBanner.message.unpublishedBracketsMatchUnknown",{eventName:i});return(0,ee.jsx)("div",{className:qt().messageContainer,children:c})})),e}return(0,q.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.apollo,n=e.isClient,i=e.translate,a=e.upcomingEvents;if(!n)return null;var r=a&&!a.isEmpty();if(Gt.Z.isLoading(t,Yt)||!r)return null;var s=a.first(),o=s.get("overviewUrl"),l=s.get("hasRace");return T.Z.endsWith(this.props.currentRoute,o)||l?null:(0,ee.jsx)("div",{className:" ",children:(0,ee.jsx)(Re.jL,{className:qt().PlayerBanner,children:(0,ee.jsxs)(Re.rj,{className:qt().Grid,alignItems:"center",justifyContent:"center",children:[(0,ee.jsx)(Re.r8,{className:qt().GridCell,size:6,lgSize:9,children:this.renderMessage(s)}),(0,ee.jsx)(Re.r8,{className:qt().GridCell,size:6,lgSize:3,children:(0,ee.jsx)(Re.rU,{url:o,children:(0,ee.jsx)(Re.zx,{type:"secondary",fullWidth:!0,label:i("PlayerBanner.button.label")})})})]})})})}}]),n}(s.Component);(0,i.Z)(Qt,"defaultProps",{apollo:null,upcomingEvents:(0,p.List)()});var $t=(0,he.Z)()(Qt),Xt=(0,o.qC)(Ye.Z,(0,Ut.Z)(),(function(e){return(0,Ae.Z)(e)}),(0,Xe.Z)({kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PlayerBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tournamentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"upcomingEvents"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"tournamentId"},value:{kind:"Variable",name:{kind:"Name",value:"tournamentId"}}},{kind:"Argument",name:{kind:"Name",value:"userIsOwner"},value:{kind:"BooleanValue",value:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"playerBannerComponent"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"playerBannerComponent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Event"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCompleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOnline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRace"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userNextMatchTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bracketsPublished"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"overviewUrl"},name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tab"},value:{kind:"StringValue",value:"overview",block:!1}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"tournament"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:237,source:{body:'#import "app/components/event/PlayerBanner/playerBannerComponent.fragment.gql"\n\nquery PlayerBanner($tournamentId: ID!) {\n\tupcomingEvents(\n\t\tlimit: 1\n\t\ttournamentId: $tournamentId\n\t\tuserIsOwner: false\n\t) {\n\t\t...playerBannerComponent\n\t}\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},{skip:function(e){var t=e.currentUser,n=e.tournamentId;return!t||!n},options:function(e){return{fetchPolicy:"network-only",variables:{tournamentId:e.tournamentId}}}}))($t),Jt=n(18974),en=n(30238);function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an=c()({displayName:"TournamentPage",childContextTypes:{isUserRegistered:r().bool,userRegistrationData:r().any,tournament:r().instanceOf(h().Map),event:r().instanceOf(h().Map)},getChildContext:function(){return{isUserRegistered:this.props.storeData.isUserRegistered,userRegistrationData:this.props.storeData.userRegistrationData,tournament:this.props.storeData.tournament,event:this.props.storeData.event}},getInitialState:function(){return{pixelContent:null}},componentDidMount:function(){window.addEventListener("consent.onetrust",this.generateTrackingPixel)},componentWillUnmount:function(){window.removeEventListener("consent.onetrust",this.generateTrackingPixel)},componentDidUpdate:function(e){this.props.tab!==e.tab&&this.generateTrackingPixel()},videoPlayerConf:{default:{containerClassNames:"",linksToEventsPage:!0,videoPlayerInvisible:!0},events_overview:{linksToEventsPage:!0},brackets:{linksToEventsPage:!0},events_list:{linksToEventsPage:!1},standings:{linksToEventsPage:!0}},generateTrackingPixel:function(){var e=this.props.storeData.tournament,t=new k.Z(e),n=this.getTab(),i=t.getPixelContent("tabs",n);this.setState(nn(nn({},this.state),{},{pixelContent:i}))},getContentPath:function(e){return"string"===typeof e.content?e.content:e.content(this.props.currentRoute,this.props.storeData.tournament)},getVideoPlayerConf:function(){var e=this.props.currentRoute.get("name")||"";return this.videoPlayerConf[e]||this.videoPlayerConf.default},getContent:function(e){var t,n,i=this.props.children,a=e.config&&e.config.get("type");if(this.props.content)t=this.props.content,n=(0,d.extend)({tabInfo:e},t.props,this.props,this.props.storeData),t=s.cloneElement(t,n,t.props.children);else if(a)switch(n=(0,d.extend)({tabInfo:e},this.props,this.props.storeData),a){case"markdown":t=(0,ee.jsx)(Ge,nn({},n));break;case"actionCard":t=(0,ee.jsx)(Ve,nn({},n));break;default:t=(0,ee.jsx)(qe,nn({},n))}else t=i||(0,ee.jsx)(w.Z,{title:"Page Not Found",message:"The page you are looking for can not be found"});return t},getLivePlayer:function(e){var t=this.getVideoPlayerConf(e),n=this.props.storeData.tournament,i=this.props.storeData.streams,a=this.props.storeData.events,r=new k.Z(n).isLivePlayerVisible(i,a),s=t.containerClassNames,o=t.videoPlayerInvisible,l=t.linksToEventsPage;return r?(0,ee.jsx)(Z.Z,{size:"fluid",children:(0,ee.jsx)(_e,{className:s,invisible:o,linksToEventsPage:l,tournament:n,events:a,currentUser:this.props.currentUser})}):null},isSmall:function(e){return"function"===typeof e.small?e.small(this.props.storeData.tournament,this.props.storeData.streams,this.props.storeData.events):e.small},getNotifications:function(e,t){var n=null,i=this.props.currentUser,a=this.props.storeData.tournament,r=new b.Z(i),s=new k.Z(a),o=s.getAdminUrl("/","dashboard"),l=s.isPublished(),c=s.isLinkOnly(),d=r.hasPermission(S.Z.VIEW_ADMIN,a),u=null;switch(t?t.split("/")[0]:null){case"fantasy":case"shop":case"apply":u=null;break;default:u=c?"default-link-only--m^":"default--m^"}return(!l||c)&&d&&u&&(n=(0,ee.jsx)(Re.e3,{type:"info",text:this.props.translate("TournamentPage.notifications.".concat(u),{name:a.get("name"),url:o,interpolation:{escapeValue:!1}})})),n},isPlayerRegisteredForEvent:function(e){var t=this.props.storeData,n=(void 0===t?{}:t).userRegistrationData;if(!e||!n)return!1;var i=e.get("id");return n&&n.get("events")&&n.get("events").includes(i)},isUserTournamentAdmin:function(){var e=this.props.storeData.tournament;return new b.Z(this.props.currentUser).hasPermission(S.Z.CHECK_IN_SEED,e)},isCurrentRouteEmbedded:function(){var e=this.props.currentRoute;return T.Z.isEmbedded(e)},shouldRenderCheckInBannerForEvent:function(e){if(!e||this.isCurrentRouteEmbedded())return!1;var t=this.isUserTournamentAdmin(),n=e.get("checkInEnabled",!1),i=this.isPlayerRegisteredForEvent(e);return n&&(t||i)},shouldRenderPlayerBannerForEvent:function(e){if(!e||this.isCurrentRouteEmbedded())return!1;var t=this.props.storeData,n=(void 0===t?{}:t).userRegistrationData,i=this.isUserTournamentAdmin(),a=e.get("checkInEnabled",!1),r=this.isPlayerRegisteredForEvent(e,n);return!a&&!i&&r},getAllEvents:function(){var e=this.props.storeData,t=void 0===e?{}:e,n=t.event,i=t.events.valueSeq().toArray().filter((function(e){return!n||n.get("id")!==e.get("id")}));return h().List((0,d.compact)((0,d.flatten)([n,i])))},getCurrentUserEntrantIdForEvent:function(e){if(!e)return null;var t=this.props.storeData;return(void 0===t?{}:t).userRegistrationData.getIn(["entrants",e.get("id").toString()],null)},getCurrentUserPlayerIdForEvent:function(e){var t=this.props.currentUser;return e&&t?t.get("playerId",null):null},renderGlobalEventBanner:function(){var e=this,t=this.getAllEvents(),n=this.isUserTournamentAdmin(),i=t.filter((function(t){return e.shouldRenderCheckInBannerForEvent(t)}));if(!i){var a=this.props.storeData,r=(void 0===a?{}:a).tournament;return r?(0,ee.jsx)(Xt,{tournamentId:r.get("id")}):null}if(i&&i.size&&n)return(0,ee.jsx)(Jt.Z,{eventId:i.first().get("id")});if(i){var s=i.map((function(t){var n=e.getCurrentUserEntrantIdForEvent(t),i=e.getCurrentUserPlayerIdForEvent(t);return n&&i?(0,ee.jsx)(zt,{entrantId:n,playerId:i}):null})).filter((function(e){return e})).toJS();return(0,ee.jsx)(ee.Fragment,{children:s})}},getTab:function(){return this.props.tab||this.props.currentRoute.get("tab")},render:function(){var e=this.props,t=e.currentRoute,n=e.currentUser,i=e.slug,a=e.storeData,r=e.pageClassName,o=e.contentClassName,l=e.contentHeader,c=e.shouldHideToaster,d=this.getTab(),u=a.tournament,p={},h=j.buildNav(u,n,a.isUserRegistered),v=j.isValidTab(d,u,n,a.isUserRegistered);d&&h.nav[d]&&(p=h.nav[d]);var g={tourney:!0,tournamentProfile:!0,"tourney-no-header":!0,"tourney-sm":this.isSmall(p)};r&&(g[r]=!0);var f,k=m()(g),y=m()(o,{"tourney-content":!0});f=v||"register"===d||"manage_merchandise"===d||"apply"===d?this.getContent(p):(0,ee.jsx)(w.Z,{title:"Page Not Found",message:"The page you are looking for can not be found"});var S=this.getNotifications(p,d),b=this.getLivePlayer(p,d);return(0,ee.jsxs)(s.Fragment,{children:[(0,ee.jsx)(We.Z,{slug:i,profileId:u.get("id"),profileType:C.Z.TOURNAMENT,tab:d,contentHeader:l,currentRoute:t,currentUser:n,className:k,tickerBar:this.renderGlobalEventBanner(),shouldHideToaster:c,children:(0,ee.jsxs)("div",{className:y,children:[S,b,f]})}),(0,ee.jsx)(en.K,{pixelContent:this.state.pixelContent})]})}});an=(0,g.Z)(an,["TournamentStore","UserLinkStore","EventStore","RegionStore","StreamStore"],(function(e,t){var n=t.currentRoute.getIn(["params","slug"]),i=t.currentRoute.get("params",(0,p.Map)()).toJS(),a=e.TournamentStore.getBySlug(n),r=h().Map(),s=null,o=h().Map(),l=h().Map();if(a){var c=a.get("id");r=e.EventStore.getByTournament(c),o=e.UserLinkStore.getTournamentData(c),l=e.StreamStore.getAllInTournament(c)}a&&t.eventSlug&&(s=e.EventStore.getBySlug(t.eventSlug,a.get("slug")));var d=e.RegionStore.getAll().sortBy((function(e){return new f.Z(e).getDisplayName()}));return{storeData:nn(nn({},i),{},{isUserRegistered:!!o,userRegistrationData:o,userRegistrationState:E.Z.getFromUserData(o),tournament:a||h().Map(),regions:d,events:r,event:s,streams:l})}}));var rn=(0,o.qC)((0,he.Z)(),Me.Z,Ye.Z,v.Z,Ae.Z)(an)},51886:function(e,t,n){"use strict";var i=n(67764).Z.extend({},{projectSeeds:function(e){return e.map((function(e){var t=e,n=t.get("entrantId");return"string"===typeof n&&"placeholder"===n.substring(0,11)&&(t=(t=t.set("entrantId",t.get("projectedEntrantId"))).set("isProjected",!0)),t}))},makeFirebasePath:function(e){return"/entity/seeds/".concat(e,"/")}});t.Z=i},30238:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var i=n(4298),a=n.n(i),r=n(85893),s=function(e){var t=e.pixelContent;if(!t)return null;var n=(new DOMParser).parseFromString(t,"text/html").querySelector("script");return n?(0,r.jsx)(a(),{children:null===n||void 0===n?void 0:n.innerHTML}):null}},24129:function(e){e.exports={PlayerBanner:"PlayerBanner-sggRGogC",Grid:"Grid-sggI1x6C",GridCell:"GridCell-sgg1B9a2",messageContainer:"messageContainer-sgg0tF4W"}},21362:function(e){e.exports={announcement:"announcement-sggNWkdI",timerContainer:"timerContainer-sggpOcqx",timerHeader:"timerHeader-sggf7bt7",timerContent:"timerContent-sggVLSQW",timerAlert:"timerAlert-sgg-f681",bannerCells:"bannerCells-sggREZuj"}}}]);
//# sourceMappingURL=6254-3eb0f78c5c0006f2.js.map