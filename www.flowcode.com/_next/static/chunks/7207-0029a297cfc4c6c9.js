"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7207],{72710:function(e,n,i){i.d(n,{R:function(){return O}});var t,o=i(98788),r=i(70865),a=i(96670),l=i(50930),s=i(94776),u=i.n(s),d=i(47842),c=i(14905),m=i(81514),v=(t={},(0,d.Z)(t,m.CZ.OWNER,c.CV.OWNER),(0,d.Z)(t,m.CZ.CREATOR,c.CV.CREATOR),(0,d.Z)(t,m.CZ.EDITOR,c.CV.EDITOR),(0,d.Z)(t,m.CZ.VIEWER,c.CV.VIEWER),t),_=i(60254),p=i(58240),f=i(85854),C=i(69565),h=i(11693),b=i(42470),y=i(17330),E=i(41363),S=function(){var e=(0,o.Z)(u().mark((function e(n){var i,t,o,r,a,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,(0,y.l)(b.Sn,{subdomainIds:[n]});case 4:if(r=e.sent,(a=null===(i=r.redirectSubdomainPermissions)||void 0===i?void 0:i[0])&&!(null===a||void 0===a||null===(t=a.result)||void 0===t?void 0:t.error)){e.next=9;break}throw new Error(null!==(l=null===a||void 0===a||null===(o=a.result)||void 0===o?void 0:o.error)&&void 0!==l?l:"error fetching permissions");case 9:return e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),(0,E._p)("Error fetching permissions for this subdomain",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=(0,o.Z)(u().mark((function e(n){var i,t,o,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,(0,y.N)(h.qy,{assetIds:[n],assetType:C.W3.WhiteLabel});case 4:if(o=e.sent,(r=null===(i=o.getAssetDetails)||void 0===i?void 0:i[0])&&!(null===r||void 0===r?void 0:r.result.error)){e.next=9;break}throw new Error(null!==(a=null===r||void 0===r||null===(t=r.result)||void 0===t?void 0:t.error)&&void 0!==a?a:"error fetching permissions");case 9:return e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),(0,E._p)("Error fetching permissions for this subdomain",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}(),I=i(17123),Z=i(66972),D=i(19122),w=i(2784),k=i(16538),g=i(98014),x=i(88905),T=function(e){return e?e.map((function(e){var n=e.permissionName;return{name:e.entityName,entityId:e.entityId,entityType:e.entityType,icon:(0,f.h0)(),access:Z.PK[n],initials:(0,f.Jt)(e.entityName)}})):[]};function O(e){var n,i,t,s=e.batchId,d=e.directoryId,C=e.isBatch,h=e.pageId,b=e.shouldFetch,y=void 0===b||b,E=e.subdomainId,Z=e.pageTemplateId,O=(0,w.useState)([]),N=O[0],P=O[1],V=(0,w.useState)(!1),M=V[0],B=V[1],W=(0,w.useState)(),A=W[0],F=W[1],H=(0,x.t)(),G=(0,w.useState)(),z=G[0],L=G[1],U=(0,w.useState)(!0),X=U[0],j=U[1],K=(0,D.F)().token,Y=(0,w.useState)(Boolean(h&&h===_.nd)),J=Y[0],q=Y[1],Q=(0,w.useState)({ownerFullName:"",ownerEntityId:"",isOwner:!1,entityPermissions:[]}),$=Q[0],ee=$.isOwner,ne=$.ownerEntityId,ie=$.ownerFullName,te=$.entityPermissions,oe=Q[1],re=(0,D.F)().jwt,ae=null===re||void 0===re?void 0:re.ithacaId,le=(0,g.B8)(),se=(0,k.Wo)(h),ue=(0,w.useCallback)((0,o.Z)(u().mark((function e(){var n,i,t,o,m,v,b,y,D,w,k,g,x,O,N,V,M,W,A,G,z,U,X,Y,J,Q,$,ee,ne,ie,te,re,ue,de,ce,me,ve,_e,pe,fe,Ce,he,be,ye,Ee,Se,Re;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],i=[],t=!1,o="",m="",e.prev=5,j(!0),L(""),!h||le){e.next=29;break}if(h!==_.nd){e.next=13;break}t=!0,q(!0),e.next=27;break;case 13:return q(!1),e.next=17,(0,f.SE)({pageId:h});case 17:return w=e.sent.getAllSharedPagePermissions,i=w,n=(0,l.Z)(T(w)),e.next=22,(0,p.x)({pageId:h});case 22:t=e.sent,o=null!==(g=(null!==(k=null===se||void 0===se||null===(v=se.owner)||void 0===v?void 0:v.displayName)&&void 0!==k?k:"").length>0?null===se||void 0===se||null===(b=se.owner)||void 0===b?void 0:b.displayName:null===se||void 0===se||null===(y=se.owner)||void 0===y?void 0:y.email)&&void 0!==g?g:"",m=null!==(x=null===se||void 0===se||null===(D=se.owner)||void 0===D?void 0:D.ithacaId)&&void 0!==x?x:"";case 27:e.next=92;break;case 29:if(!C||!s||le){e.next=43;break}return e.next=33,(0,f.D)({batchId:s,scopePermissions:!1},null!==K&&void 0!==K?K:"");case 33:A=e.sent,i=null===A||void 0===A||null===(O=A.batch)||void 0===O?void 0:O.entityPermissions,n=(0,l.Z)(T(null===A||void 0===A||null===(N=A.batch)||void 0===N?void 0:N.entityPermissions)),t=null===A||void 0===A||null===(V=A.batch)||void 0===V?void 0:V.batchOwner.isOwner,o=null!==(G=null===A||void 0===A||null===(M=A.batch)||void 0===M?void 0:M.batchOwner.user.fullName)&&void 0!==G?G:"",m=null!==(z=null===A||void 0===A||null===(W=A.batch)||void 0===W?void 0:W.batchOwner.user.ithacaId)&&void 0!==z?z:"",e.next=92;break;case 43:if(!d){e.next=56;break}return e.next=47,(0,f.MW)({directoryId:d,scopePermissions:!1});case 47:$=e.sent,i=null===(U=$.directory)||void 0===U?void 0:U.entityPermissions,n=(0,l.Z)(T(null===(X=$.directory)||void 0===X?void 0:X.entityPermissions)),o=null===(Y=$.directory)||void 0===Y?void 0:Y.user.fullName,t=Boolean(null===(J=$.directory)||void 0===J?void 0:J.isOwner),m=null!==(ee=null===$||void 0===$||null===(Q=$.directory)||void 0===Q?void 0:Q.user.ithacaId)&&void 0!==ee?ee:"",e.next=92;break;case 56:if(!Z){e.next=74;break}return e.next=60,(0,I.Pv)(Z,null!==K&&void 0!==K?K:"");case 60:ce=e.sent,me=ce.getAssetDetails,ve=ce.template,i=null!==(pe=null===me||void 0===me||null===(ne=me[0])||void 0===ne||null===(ie=ne.entityPermissions)||void 0===ie?void 0:ie.map((function(e){return(0,a.Z)((0,r.Z)({},e),{entityName:null!==(_e=e.entityName)&&void 0!==_e?_e:""})})))&&void 0!==pe?pe:[],n=(0,l.Z)(T(i)),o=null!==(fe=(null===ve||void 0===ve||null===(te=ve.owner)||void 0===te?void 0:te.displayName)||(null===ve||void 0===ve||null===(re=ve.owner)||void 0===re?void 0:re.email))&&void 0!==fe?fe:"",t=null!==(Ce=ae===(null===ve||void 0===ve||null===(ue=ve.owner)||void 0===ue?void 0:ue.ithacaId))&&void 0!==Ce?Ce:"",m=null!==(he=null===ve||void 0===ve||null===(de=ve.owner)||void 0===de?void 0:de.ithacaId)&&void 0!==he?he:"",e.next=92;break;case 74:if(!E){e.next=92;break}if(!C){e.next=85;break}return e.next=78,S(null!==E&&void 0!==E?E:"");case 78:be=e.sent,i=(null!==(ye=null===be||void 0===be?void 0:be.entityPermissions)&&void 0!==ye?ye:[]).map((function(e){if(e)return(0,a.Z)((0,r.Z)({},e),{entityType:Number(e.entityType)})})),n=(0,l.Z)(T(i)),t=!0,e.next=92;break;case 85:return e.next=87,R(null!==E&&void 0!==E?E:"");case 87:Ee=e.sent,i=(null!==(Se=null===Ee||void 0===Ee?void 0:Ee.entityPermissions)&&void 0!==Se?Se:[]).map((function(e){if(e)return(0,a.Z)((0,r.Z)({},e),{entityType:Number(e.entityType)})})),n=(0,l.Z)(T(Ee.entityPermissions)),t=!0;case 92:Re=n.find((function(e){return Number(e.entityType)===c.DC.ORG})),H()&&(B(Boolean(Re)),F(null===Re||void 0===Re?void 0:Re.access),P((0,l.Z)(n)),oe({ownerEntityId:m,ownerFullName:o,isOwner:t,entityPermissions:i})),e.next=100;break;case 96:e.prev=96,e.t0=e.catch(5),console.error(e.t0),H()&&L(e.t0.message);case 100:return e.prev=100,H()&&j(!1),e.finish(100);case 103:case"end":return e.stop()}}),e,null,[[5,96,100,103]])}))),[s,d,C,le,H,h,null===se||void 0===se||null===(n=se.owner)||void 0===n?void 0:n.displayName,null===se||void 0===se||null===(i=se.owner)||void 0===i?void 0:i.email,null===se||void 0===se||null===(t=se.owner)||void 0===t?void 0:t.ithacaId,K,Z,ae,E]);(0,w.useEffect)((function(){var e=Boolean(s||d||h||E||Z);y&&H()&&e&&ue()}),[s,d,C,H,h,ae,le,ue,y,Z,E]);var de=(0,w.useMemo)((function(){return ee?m.CZ.CREATOR:(0,f.vK)(ee,te)}),[ee,te]),ce=h?!(ee||de===m.CZ.EDITOR):!ee,me=(0,w.useMemo)((function(){return{entityId:ne,entityName:ie,entityType:c.DC.USER,permissionName:c.CV.OWNER}}),[ne,ie]);return{allPermissions:(0,w.useMemo)((function(){return[me].concat((0,l.Z)(N.map((function(e){return{entityId:e.entityId,entityName:e.name,entityType:"string"===typeof e.entityType?parseInt(e.entityType):e.entityType,permissionName:v[e.access]}}))))}),[N,me]),existingCollaborators:N,hasOrgEntity:M,orgEntityAccess:A,permissionName:de,ownerEntityId:ne,ownerFullName:ie,viewOnly:ce,isOwner:ee,loading:X,error:z,entityPermissions:te,fetchPermissions:ue,isPageUnpublished:J}}},86248:function(e,n,i){i.d(n,{C:function(){return de}});var t,o,r=i(52903),a=i(14905),l=i(35691),s=i(67768),u=i(25813),d=i(71237),c=i(72116),m=i(47842),v=i(70865),_=i(96670),p=i(6078);!function(e){e.OWNER="OWNER",e.CREATOR="CREATOR",e.EDITOR="EDITOR",e.VIEWER="VIEWER",e.REMOVE="REMOVE"}(t||(t={}));var f,C,h=(o={},(0,m.Z)(o,t.OWNER,"Owner"),(0,m.Z)(o,t.CREATOR,"Owner"),(0,m.Z)(o,t.EDITOR,"Editor"),(0,m.Z)(o,t.VIEWER,"Viewer"),(0,m.Z)(o,t.REMOVE,"Remove"),o);!function(e){e.SHARED="SHARED",e.REMOVE="REMOVE"}(f||(f={}));var b,y=(C={},(0,m.Z)(C,f.SHARED,"Shared"),(0,m.Z)(C,f.REMOVE,"Remove"),C),E=i(12495),S=i(9345),R=i(72053),I=i(2784),Z=i(42713),D=function(e){var n=function(e){var n=e.dropdownState,i=e.item,o=e.subdomainItem,r=o?o===n.whiteLabelItemSelected:i===n.itemSelected,a=(0,I.useRef)(null);return(0,I.useEffect)((function(){r&&a.current&&a.current.focus()}),[r,a]),{item:i,selected:i===n.itemSelected,onClick:function(){return n.onNewItemSelected(null!==o&&void 0!==o?o:i)},itemRef:a,isRemovePermissionItem:i===t.REMOVE||o===f.REMOVE,subdomainItem:o}}(e);return(0,r.BX)(E.hP,(0,_.Z)((0,v.Z)({},function(e){return{sx:{color:e.isRemovePermissionItem?"red":"black"},selected:e.selected,onClick:e.onClick,key:e.item,value:e.item,ref:e.itemRef}}(n)),{children:[(0,r.tZ)(R.Z,{children:(0,r.tZ)(S.J,{src:n.subdomainItem?x[n.subdomainItem]:g[n.item]})}),(0,r.tZ)(E.wo,{children:n.subdomainItem?y[n.subdomainItem]:h[n.item]}),(0,r.tZ)(R.Z,{children:n.selected?(0,r.tZ)(w,{}):null})]}))},w=function(){return(0,r.tZ)(Z.Z,{color:"primary",fontSize:"small"})};var k,g=(b={},(0,m.Z)(b,t.CREATOR,"/icons/profile.svg"),(0,m.Z)(b,t.EDITOR,"/icons/pencil-outline.svg"),(0,m.Z)(b,t.VIEWER,"/icons/eye.svg"),(0,m.Z)(b,t.REMOVE,"/icons/close.svg"),b),x=(k={},(0,m.Z)(k,f.SHARED,"/icons/eye.svg"),(0,m.Z)(k,f.REMOVE,"/icons/close.svg"),k),T=i(35098),O=i(83964),N=i(66197),P=i(93698),V=i(85101),M=i(25661),B=function(e){var n=function(e){var n=e.assetId,i=e.permission,o=e.isWhitelabel,r=e.isCodeSubdomain,a=null===e||void 0===e?void 0:e.trackingClickPermission,l=(0,N.x)({menuId:H(i),buttonId:G(i),disabled:e.disabled}),s=l.closeDropdown,u=l.isOpen,d=l.hasOpened,c=(0,P.KD)(),m=(0,O.N)(n,o,r),p=(0,I.useCallback)((function(n){o?n===f.REMOVE?null===m||void 0===m||m.removeDraftPermission(e.permission):null===m||void 0===m||m.updateDraftPermission((0,_.Z)((0,v.Z)({},e.permission),{permissionName:ne[n]})):n===t.REMOVE?null===m||void 0===m||m.removeDraftPermission(e.permission):null===m||void 0===m||m.updateDraftPermission((0,_.Z)((0,v.Z)({},e.permission),{permissionName:Q[n]})),null===a||void 0===a||a(Q[n]),s()}),[e.permission,m,s,o,a]),C=(0,I.useRef)(null);(0,I.useEffect)((function(){!u&&d&&C.current&&C.current.focus()}),[d,u,C]);var h=q[i.permissionName],b=ee[i.permissionName];return(0,_.Z)((0,v.Z)({showMobileStyles:c,onNewItemSelected:p,itemSelected:h,itemsShown:J.filter((function(e){return e!==t.CREATOR&&e!==t.OWNER})).filter((function(n){return!e.hideRemoveItem||n!==t.REMOVE}))},l),{whiteLabelItemSelected:b,whiteLabelItemsShown:$})}(e);return n.showMobileStyles&&!e.disabled?(0,r.tZ)(W,{dropdownState:n,isWhitelabel:e.isWhitelabel}):(0,r.tZ)(F,{dropdownState:n,isWhitelabel:e.isWhitelabel})},W=function(e){var n=e.dropdownState;return e.isWhitelabel?(0,r.BX)(r.HY,{children:[(0,r.tZ)(E.RR,(0,v.Z)({},(0,T.m)(n))),(0,r.tZ)(E.h_,(0,_.Z)((0,v.Z)({},(0,T.a)(n)),{children:n.whiteLabelItemsShown.map((function(e){return(0,r.tZ)(D,{item:t.CREATOR,subdomainItem:e,dropdownState:n},e)}))}))]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(E.RR,(0,v.Z)({},(0,T.m)(n))),(0,r.tZ)(E.h_,(0,_.Z)((0,v.Z)({},(0,T.a)(n)),{children:n.itemsShown.map((function(e){return(0,r.tZ)(D,{item:e,dropdownState:n},e)}))}))]})},A=function(e){var n=e.dropdownIsOpen;return(0,r.tZ)(r.HY,{children:n?(0,r.tZ)(M.Z,{fontSize:"large"}):(0,r.tZ)(V.Z,{fontSize:"large"})})},F=function(e){var n=e.dropdownState,i=e.focusButtonOnNextRender,o=e.isWhitelabel,a=n.buttonRef.current;return(0,I.useEffect)((function(){i&&a&&(null===a||void 0===a||a.focus())}),[i,a]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.Z,(0,_.Z)((0,v.Z)({},z(n)),{children:o?y[n.whiteLabelItemSelected]:h[n.itemSelected]})),(0,r.BX)(E.h_,(0,_.Z)((0,v.Z)({},(0,T.a)(n)),{children:[o&&n.whiteLabelItemsShown.map((function(e){return(0,r.tZ)(D,{item:t.CREATOR,subdomainItem:e,dropdownState:n},e)})),!o&&n.itemsShown.map((function(e){return(0,r.tZ)(D,{item:e,dropdownState:n},e)}))]}))]})};function H(e){var n;return"permissions-role-dropdown-".concat(null!==(n=e.entityId)&&void 0!==n?n:"")}function G(e){var n;return"permissions-role-dropdown-button-".concat(null!==(n=e.entityId)&&void 0!==n?n:"")}function z(e){return{ref:e.buttonRef,id:Y,"aria-controls":e.isOpen?K:void 0,"aria-haspopup":"true","aria-expanded":e.isOpen?"true":void 0,color:"primary",tabIndex:e.disabled?-1:0,disableRipple:!0,sx:{fontSize:"14px",textTransform:"none",border:"none","&:hover":{border:"none",cursor:e.disabled?"auto":"pointer",backgroundColor:e.disabled?"white":"inherit"},"&:focus":{backgroundColor:e.disabled?"white":s.r.colors.secondary.border}},onClick:function(n){return e.toggleDropdown(n.currentTarget)},variant:"outlined",endIcon:e.disabled?null:(0,r.tZ)(A,{dropdownIsOpen:e.isOpen})}}var L,U,X,j,K="permissions-dropdown-menu",Y="permissions-dropdown-button",J=[t.CREATOR,t.EDITOR,t.VIEWER,t.REMOVE],q=(L={},(0,m.Z)(L,a.CV.CREATOR,t.CREATOR),(0,m.Z)(L,a.CV.OWNER,t.CREATOR),(0,m.Z)(L,a.CV.EDITOR,t.EDITOR),(0,m.Z)(L,a.CV.VIEWER,t.VIEWER),L),Q=(U={},(0,m.Z)(U,t.CREATOR,a.CV.CREATOR),(0,m.Z)(U,t.OWNER,a.CV.CREATOR),(0,m.Z)(U,t.EDITOR,a.CV.EDITOR),(0,m.Z)(U,t.VIEWER,a.CV.VIEWER),(0,m.Z)(U,t.REMOVE,a.CV.CREATOR),U),$=[f.SHARED,f.REMOVE],ee=(X={},(0,m.Z)(X,a.CV.CREATOR,f.SHARED),(0,m.Z)(X,a.CV.OWNER,f.SHARED),(0,m.Z)(X,a.CV.EDITOR,f.SHARED),(0,m.Z)(X,a.CV.VIEWER,f.SHARED),X),ne=(j={},(0,m.Z)(j,f.SHARED,a.CV.VIEWER),(0,m.Z)(j,f.REMOVE,a.CV.CREATOR),j),ie=i(49886),te=i(19122),oe=i(37672),re=function(e){var n=e.assetId,i=e.isWhitelabel,t=e.isCodeSubdomain,o=function(e,n,i,t){var o,l,s,d,c=(0,te.F)().jwt,m=null!==(s=null===c||void 0===c||null===(o=c.org)||void 0===o?void 0:o.orgId)&&void 0!==s?s:"",v=null!==(d=null===c||void 0===c||null===(l=c.org)||void 0===l?void 0:l.name)&&void 0!==d?d:"",_=(0,O.N)(e,i,t),p=null===_||void 0===_?void 0:_.currentPermissions,f=null===_||void 0===_?void 0:_.draftPermissions,C=(0,I.useMemo)((function(){return null===p||void 0===p?void 0:p.find((function(e){return e.entityId===m}))}),[p,m]),h=(0,I.useMemo)((function(){return null===f||void 0===f?void 0:f.find((function(e){return e.entityId===m}))}),[f,m]),b=(0,I.useMemo)((function(){return{entityId:m,entityName:v,entityType:a.DC.ORG,permissionName:a.CV.EDITOR}}),[v,m]),y=(0,I.useMemo)((function(){var e;return null!==(e=null!==h&&void 0!==h?h:C)&&void 0!==e?e:b}),[h,C,b]),E=Boolean(h),S=null===_||void 0===_?void 0:_.addDraftPermission,R=null===_||void 0===_?void 0:_.removeDraftPermission,Z=(0,I.useCallback)((function(){var e=oe.Z.Core_Domain_Settings_Clicked_Share_with_Everyone_Box;h?null===R||void 0===R||R(h):null===S||void 0===S||S(b),i&&(0,ie.bR)(e,{action:h?"deselect":"select"})}),[S,R,h,b,i]),D=(0,r.BX)(u.xv,{children:["Share ",(0,r.tZ)("b",{children:n?"".concat(n," "):""}),"with everyone in"," ",(0,r.tZ)("b",{children:null!==v&&void 0!==v?v:"your organization"})]}),w=v?"Share with everyone in ".concat(v):"Share with everyone in your organization";return{checkboxChecked:E,label:w,subdomainLabel:D,organizationPermission:y,onChangeCheckbox:Z}}(n,e.subdomainName,null!==i&&void 0!==i&&i,t);return(0,r.BX)(l.x,{display:"flex",pl:"8px",width:"100%",justifyContent:"space-between",alignItems:"center",children:[(0,r.tZ)(d.Z,{control:(0,r.tZ)(c.Z,{checked:o.checkboxChecked,disableRipple:!0,sx:{color:s.r.colors.primary.flowBlue,"&.Mui-checked":{color:s.r.colors.primary.flowBlue}},onChange:o.onChangeCheckbox}),label:i?o.subdomainLabel:o.label}),o.checkboxChecked&&(0,r.tZ)(B,{disabled:!1,assetId:n,isWhitelabel:!0,isCodeSubdomain:t,permission:o.organizationPermission,hideRemoveItem:!0})]})};var ae=i(21758),le=i(71286),se=function(e){var n=function(e){var n,i=(0,te.F)().jwt,t=(0,le.S)(e.assetId,e.isWhitelabel),o=t===a.CV.VIEWER,r=t===a.CV.OWNER,l=e.permission.entityId===(null===i||void 0===i?void 0:i.ithacaId),s=e.permission.permissionName===a.CV.CREATOR,u=!o&&!s,d=(0,P.KD)(),c=r||l||null!==(n=e.isWhitelabel)&&void 0!==n&&n;return{editable:u,showMobileStyles:d,showRemoveItem:c}}(e),i=n.showMobileStyles,t=n.editable,o=n.showRemoveItem;return(0,r.BX)(l.x,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",mb:"16px",children:[(0,r.tZ)(ue,{permission:e.permission}),(0,r.tZ)(l.x,{minWidth:i?"10px":"150px",justifyContent:"flex-end",children:(0,r.tZ)(B,(0,_.Z)((0,v.Z)({},e),{trackingClickPermission:e.trackingClickPermission,disabled:!t,hideRemoveItem:!o}))})]})},ue=function(e){var n=e.permission;return(0,r.BX)(l.x,{display:"flex",width:"90%",alignItems:"center",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,r.tZ)(ae.q,{alt:n.entityName}),(0,r.tZ)(l.x,{display:"flex",flexDirection:"column",ml:"8px",children:(0,r.tZ)(l.x,{width:"100%",display:"table",style:{tableLayout:"fixed"},children:(0,r.tZ)(u.xv,{display:"table-cell",style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},fontWeight:"bold",fontSize:"14px",color:"primary.black",children:n.entityName})})})]})};var de=function(e){var n=e.assetId,i=e.isWhitelabel,t=e.isCodeSubdomain,o=e.subdomainName,u=e.trackingClickPermission,d=function(e,n,i){var t,o=(0,O.N)(e,n,i),r=(0,le.S)(e,n,i),l=null===o||void 0===o?void 0:o.draftPermissions,s=(0,te.F)().jwt;return{permissionsDisplayed:(0,I.useMemo)((function(){return null!==(t=null===l||void 0===l?void 0:l.filter((function(e,i){var t;return e.entityId!==(null===s||void 0===s||null===(t=s.org)||void 0===t?void 0:t.orgId)&&(!n||0!==i)})))&&void 0!==t?t:[]}),[s,l,n]),showShareWithEveryoneControls:r!==a.CV.VIEWER}}(n,i,t),c=d.permissionsDisplayed,m=d.showShareWithEveryoneControls;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ce,{isWhitelabel:i}),(0,r.tZ)(l.x,{display:"flex",flexDirection:"column",width:"100%",children:null===c||void 0===c?void 0:c.map((function(e){return(0,r.tZ)(se,{assetId:n,permission:e,isWhitelabel:i,trackingClickPermission:u},e.entityId)}))}),m&&(0,r.tZ)(l.x,{width:"100%",height:"1px",backgroundColor:s.r.colors.secondary.border,mb:"16px"}),m&&(0,r.tZ)(re,{assetId:n,subdomainName:o,isWhitelabel:i,isCodeSubdomain:t})]})};var ce=function(e){var n=e.isWhitelabel;return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.x,{justifyContent:"space-between",pb:"8px",pr:"16px",children:[(0,r.tZ)(u.xv,{fontSize:"12px",color:"primary.grey",children:"Member/Team"}),(0,r.tZ)(u.xv,{fontSize:"12px",color:"primary.grey",children:n?"Permissions":"Permission"})]}),(0,r.tZ)(l.x,{width:"100%",height:"1px",backgroundColor:s.r.colors.secondary.border,mb:"16px"})]})}},62627:function(e,n,i){i.d(n,{l:function(){return m}});var t=i(52903),o=i(14905),r=i(49985),a=i(6182),l=i(88520),s=i(49886),u=i(83964),d=i(2784),c=i(37672),m=function(e){var n=e.assetId,i=e.isWhitelabel,m=e.isCodeSubdomain,v=e.trackingCall,_=function(e,n,i){var t,r=(0,u.N)(e,n,i),m=(_=null!==(t=null===r||void 0===r?void 0:r.draftPermissions)&&void 0!==t?t:[],_.map((function(e){return e.entityType===o.DC.USER?(n=e,{type:a.Bk.TEAM_MEMBER,id:n.entityId,name:n.entityName,role:l.k.MEMBER,hasBeenInvited:!0,hasJoinedOrg:!0}):e.entityType===o.DC.TEAM?function(e){return{type:a.Bk.TEAM,teamId:e.entityId,name:e.entityName,memberCount:0,directChildrenCount:0}}(e):null;var n})).filter((function(e){return null!==e}))),v=(0,d.useCallback)((function(e){var i=function(e){if(e.type===a.Bk.TEAM_MEMBER)return function(e){var n;return{entityId:null===e||void 0===e?void 0:e.id,entityName:(null===e||void 0===e?void 0:e.name)?null===e||void 0===e?void 0:e.name:null!==(n=null===e||void 0===e?void 0:e.email)&&void 0!==n?n:"",entityType:o.DC.USER,permissionName:o.CV.EDITOR}}(e);if(e.type===a.Bk.TEAM)return function(e){var n;return{entityId:null===e||void 0===e?void 0:e.teamId,entityName:null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:"",entityType:o.DC.TEAM,permissionName:o.CV.EDITOR}}(e);return null}(e);if(i&&(null===r||void 0===r||r.addDraftPermission(i)),n){var t=c.Z.Core_Domain_Settings_Selected_Team;(0,s.bR)(t)}}),[r,n]);var _;return{resultsToRemove:m,onClickSearchResult:v}}(n,i,m);return(0,t.tZ)(r.I,{removeFromResults:_.resultsToRemove,searchFor:"membersAndTeams",showInvitationPrompt:!0,onSearchResultClicked:_.onClickSearchResult,label:"Enter the team name, member name or email below",placeholder:"",onFocus:v,onRefInitialized:function(){}})}},83964:function(e,n,i){i.d(n,{N:function(){return p}});var t=i(70865),o=i(96670),r=i(94341),a=i(2784),l=i(12278),s=i(3570),u=i(45455),d=i.n(u),c=i(18149),m=i.n(c),v=i(38692),_=i.n(v);function p(e,n,i){(0,s.f)(e,n,i);var u=(0,l.v9)((function(n){return n.flowteamsReducer.assetPermissions[e]})),c=(0,l.I0)(),v=(0,a.useCallback)((function(){c((0,r.Gf)({assetId:e}))}),[c,e]),p=(0,a.useCallback)((function(e){c((0,r.Mk)({assetId:e}))}),[c]),f=(0,a.useCallback)((function(n){c((0,r.Mb)({newDraftPermission:n,assetId:e}))}),[c,e]),C=(0,a.useCallback)((function(n){c((0,r.v8)({entityId:n.entityId,assetId:e}))}),[c,e]),h=(0,a.useCallback)((function(n){c((0,r.$y)({updatedPermission:n,entityId:n.entityId,assetId:e}))}),[c,e]),b=d()(_()(null===u||void 0===u?void 0:u.currentPermissions,null===u||void 0===u?void 0:u.draftPermissions,m())),y=(0,a.useMemo)((function(){return(0,o.Z)((0,t.Z)({},u),{resetDraftPermissions:v,addDraftPermission:f,removeDraftPermission:C,updateDraftPermission:h,deleteAssetPermissions:p,draftPermissionsAreDifferentFromCurrentPermissions:b})}),[u,v,f,C,h,p,b]);return u?y:null}},71286:function(e,n,i){i.d(n,{S:function(){return l}});var t=i(14905),o=i(83964),r=i(19122),a=i(2784);function l(e,n,i){var l=(0,o.N)(e,n,i),s=(0,r.F)().jwt;return(0,a.useMemo)((function(){if(!l||!(null===l||void 0===l?void 0:l.currentPermissions))return null;var e=l.currentPermissions.filter((function(e){var n,i,t;return e.entityId===(null===s||void 0===s?void 0:s.ithacaId)||e.entityId===(null===s||void 0===s||null===(n=s.org)||void 0===n?void 0:n.orgId)||(null===s||void 0===s||null===(i=s.org)||void 0===i||null===(t=i.teams)||void 0===t?void 0:t.some((function(n){return n.teamId===e.entityId})))})),n=e.some((function(e){return e.permissionName===t.CV.OWNER})),i=e.some((function(e){return e.permissionName===t.CV.EDITOR})),o=e.some((function(e){return e.permissionName===t.CV.VIEWER}));return n?t.CV.OWNER:i?t.CV.EDITOR:o?t.CV.VIEWER:null}),[l,s])}},3570:function(e,n,i){i.d(n,{d:function(){return m},f:function(){return v}});var t=i(70865),o=i(96670),r=i(14905),a=i(534),l=i(94341),s=i(19122),u=i(12278),d=i(2784),c=i(72710),m="batch:NEW";function v(e,n,i){var v,_=(0,a.v)(e,n,i),p=(0,u.v9)((function(e){return e.flowteamsReducer.assetPermissions})),f=e?p[e]:null,C=Boolean(f),h=(0,c.R)((0,o.Z)((0,t.Z)({},_),{shouldFetch:e!==m&&Boolean(!C&&_)})),b=h.allPermissions,y=h.loading,E=(0,u.I0)(),S=(0,s.F)().jwt,R=(0,d.useMemo)((function(){return S?{entityId:null===S||void 0===S?void 0:S.ithacaId,entityName:(null===S||void 0===S?void 0:S.firstName)&&(null===S||void 0===S?void 0:S.lastName)?"".concat(null===S||void 0===S?void 0:S.firstName," ").concat(null===S||void 0===S?void 0:S.lastName):null!==(v=null===S||void 0===S?void 0:S.email)&&void 0!==v?v:"",entityType:r.DC.USER,permissionName:r.CV.CREATOR}:null}),[S]);(0,d.useEffect)((function(){var n=e!==m;!C&&!y&&e&&n&&E((0,l.ag)({assetId:e,currentPermissions:b})),C||n||!R||E((0,l.ag)({assetId:e,currentPermissions:[R]}))}),[C,y,b,e,E,R])}},534:function(e,n,i){i.d(n,{c:function(){return o},v:function(){return r}});var t=i(14905);function o(e){var n=e.isBatch,i=e.batchId,o=e.directoryId,r=n?i:o,a=n?t.h3.BATCH:t.h3.DIRECTORY;return r?"".concat(a,":").concat(r):null}function r(e,n,i){if(n)return{subdomainId:e,isBatch:null!==i&&void 0!==i&&i};if(!(null===e||void 0===e?void 0:e.includes(":")))return{pageId:e,isBatch:!1};var o=null===e||void 0===e?void 0:e.split(":"),r=null===o||void 0===o?void 0:o[0],a=null===o||void 0===o?void 0:o[1];return r&&a?"directory"===r?{directoryId:a,isBatch:!1}:r===t.h3.PAGE_TEMPLATE?{pageTemplateId:a,isBatch:!1}:{batchId:a,isBatch:!0}:{isBatch:!1}}},58240:function(e,n,i){i.d(n,{K:function(){return s},x:function(){return d}});var t=i(98788),o=i(94776),r=i.n(o),a=i(11693),l=i(17330);function s(e){return u.apply(this,arguments)}function u(){return(u=(0,t.Z)(r().mark((function e(n){var i,t,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.pageId,t=null,e.prev=2,e.next=5,(0,l.N)(a.v,{id:i});case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:if(o=null===t||void 0===t?void 0:t.Page){e.next=14;break}return e.abrupt("return",null);case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function d(e){return c.apply(this,arguments)}function c(){return(c=(0,t.Z)(r().mark((function e(n){var i,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.pageId,t=null,e.prev=2,e.next=5,(0,l.N)(a.JQ,{pageId:i});case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:return e.abrupt("return",Boolean(null===t||void 0===t?void 0:t.checkPageOwnership));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}},37672:function(e,n){n.Z={Core_Domain_Settings_Clicked_Add_Domain:"Core_Domain_Settings_Clicked_Add_Domain",Core_Domain_Settings_Clicked_Kebab_Menu:"Core_Domain_Settings_Clicked_Kebab_Menu",Core_Domain_Settings_Clicked_Setup_Box:"Core_Domain_Settings_Clicked_Setup_Box",Core_Domain_Settings_Typed_Domain:"Core_Domain_Settings_Typed_Domain",Core_Domain_Settings_Received_Domain_Confirmation_Error:"Core_Domain_Settings_Received_Domain_Confirmation_Error",Core_Domain_Settings_Clicked_Add_Domain_Confirmation_Button:"Core_Domain_Settings_Clicked_Add_Domain_Confirmation_Button",Core_Domain_Settings_Clicked_Add_Domain_Confirmation:"Core_Domain_Settings_Clicked_Add_Domain_Confirmation",Core_Domain_Settings_Clicked_Setup_Domain:"Core_Domain_Settings_Clicked_Setup_Domain",Core_Domain_Setup_Modal_Typed_SubDomain:"Core_Domain_Setup_Modal_Typed_SubDomain",Core_Domain_Setup_Modal_Clicked_Save_Domain:"Core_Domain_Setup_Modal_Clicked_Save_Domain",Core_Domain_Setup_Modal_Clicked_Exit_Popup_Modal:"Core_Domain_Setup_Modal_Clicked_Exit_Popup_Modal",Core_Domain_Setup_Modal_Clicked_Check_DNS_Configuration:"Core_Domain_Setup_Modal_Clicked_Check_DNS_Configuration",Core_Domain_Setup_Modal_Clicked_Closed_DNS_Configuration:"Core_Domain_Setup_Modal_Clicked_Closed_DNS_Configuration",Core_Domain_Settings_Clicked_Pop_Up_Modal_Cancel_Button:"Core_Domain_Settings_Clicked_Pop_Up_Modal_Cancel_Button",Core_Domain_Settings_Clicked_Pop_Up_Modal_Confirm_Button:"Core_Domain_Settings_Clicked_Pop_Up_Modal_Confirm_Button",Core_Domain_Settings_Typed_Subdomain:"Core_Domain_Settings_Typed_Subdomain",Core_Domain_Settings_Subdomain_Type:"Core_Domain_Settings_Subdomain_Type",Core_Domain_Settings_Clicked_Create_Subdomain_Button:"Core_Domain_Settings_Clicked_Create_Subdomain_Button",Core_Domain_Settings_Clicked_Cancel_Subdomain_Button:"Core_Domain_Settings_Clicked_Cancel_Subdomain_Button",Core_Domain_Settings_Clicked_Restore_Domain:"Core_Domain_Settings_Clicked_Restore_Domain",Core_Domain_Settings_Selected_Team:"Core_Domain_Settings_Selected_Team",Core_Domain_Settings_Clicked_Save_Team_Selection_Button:"Core_Domain_Settings_Clicked_Save_Team_Selection_Button",Core_Domain_Settings_Clicked_Share_with_Everyone_Box:"Core_Domain_Settings_Clicked_Share_with_Everyone_Box",Core_Global_Selected_Subdomain:"Core_Global_Selected_Subdomain",Core_Global_Clicked_Save_Domain:"Core_Global_Clicked_Save_Domain",Core_Global_Confirm_Subdomain_Change_Button:"Core_Global_Confirm_Subdomain_Change_Button",Core_Global_Clicked_Cancel_Subdomain_Change_Button:"Core_Global_Clicked_Cancel_Subdomain_Change_Button",Core_Domain_Settings_Clicked_FAQ:"Core_Domain_Settings_Clicked_FAQ",Core_Domain_Settings_Clicked_Add_Subdomain:"Core_Domain_Settings_Clicked_Add_Subdomain"}},17123:function(e,n,i){i.d(n,{Pv:function(){return c},tK:function(){return m}});var t=i(98788),o=i(94776),r=i.n(o),a=i(69565),l=i(11693),s=i(29008),u=i(17330),d=i(2784),c=function(){var e=(0,t.Z)(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.N)(l.cG,{assetIds:[n],assetType:a.W3.Template,entityTypes:[a.py.Org,a.py.Team,a.py.User],templateId:n},i));case 1:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}();function m(){return(0,d.useCallback)(function(){var e=(0,t.Z)(r().mark((function e(n){var i,t,o,l,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.permissionsToRemove,t=n.permissionsToUpsert,o=n.assetId,l=n.token,s=[],t.length&&s.push(v({assetIds:[o],assetType:a.W3.Template,entityPermissions:t.map((function(e){return{entityId:e.entityId,entityType:e.entityType,permissionName:e.permissionName}}))},l)),i.length&&s.push(_({assetIds:[o],assetType:a.W3.Template,entityIds:i.map((function(e){return e.entityId}))},l)),e.next=6,Promise.all(s);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[])}var v=function(){var e=(0,t.Z)(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.N)(s.Ux,n,i));case 1:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),_=function(){var e=(0,t.Z)(r().mark((function e(n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.N)(s.L1,n,i));case 1:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}()},98014:function(e,n,i){i.d(n,{B8:function(){return r}});var t=i(5632),o=i(12278);i(2784);function r(){var e,n=(0,t.useRouter)(),i=(0,o.v9)((function(e){return e.appReducer.userReducer.demo}));return Boolean(i||"true"===(null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.demo))}}}]);